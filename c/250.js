(()=>{var t={693:function(t){t.exports=function(){"use strict";var t="millisecond",e="second",i="minute",n="hour",s="day",r="week",o="month",a="quarter",d="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,h={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},m=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},f={s:m,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),s=i%60;return(e<=0?"+":"-")+m(n,2,"0")+":"+m(s,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var n=12*(i.year()-e.year())+(i.month()-e.month()),s=e.clone().add(n,o),r=i-s<0,a=e.clone().add(n+(r?-1:1),o);return+(-(n+(i-s)/(r?s-a:a-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:o,y:d,w:r,d:s,D:c,h:n,m:i,s:e,ms:t,Q:a}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},p="en",v={};v[p]=h;var g=function(t){return t instanceof M},y=function(t,e,i){var n;if(!t)return p;if("string"==typeof t)v[t]&&(n=t),e&&(v[t]=e,n=t);else{var s=t.name;v[s]=t,n=s}return!i&&n&&(p=n),n||!i&&p},$=function(t,e){if(g(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new M(i)},S=f;S.l=y,S.i=g,S.w=function(t,e){return $(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function h(t){this.$L=y(t.locale,null,!0),this.parse(t)}var m=h.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(S.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(u);if(n){var s=n[2]-1||0,r=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return S},m.isValid=function(){return!("Invalid Date"===this.$d.toString())},m.isSame=function(t,e){var i=$(t);return this.startOf(e)<=i&&i<=this.endOf(e)},m.isAfter=function(t,e){return $(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<$(t)},m.$g=function(t,e,i){return S.u(t)?this[e]:this.set(i,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,a){var u=this,l=!!S.u(a)||a,h=S.p(t),m=function(t,e){var i=S.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return l?i:i.endOf(s)},f=function(t,e){return S.w(u.toDate()[t].apply(u.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},p=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(h){case d:return l?m(1,0):m(31,11);case o:return l?m(1,v):m(0,v+1);case r:var $=this.$locale().weekStart||0,M=(p<$?p+7:p)-$;return m(l?g-M:g+(6-M),v);case s:case c:return f(y+"Hours",0);case n:return f(y+"Minutes",1);case i:return f(y+"Seconds",2);case e:return f(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(r,a){var u,l=S.p(r),h="set"+(this.$u?"UTC":""),m=(u={},u[s]=h+"Date",u[c]=h+"Date",u[o]=h+"Month",u[d]=h+"FullYear",u[n]=h+"Hours",u[i]=h+"Minutes",u[e]=h+"Seconds",u[t]=h+"Milliseconds",u)[l],f=l===s?this.$D+(a-this.$W):a;if(l===o||l===d){var p=this.clone().set(c,1);p.$d[m](f),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else m&&this.$d[m](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[S.p(t)]()},m.add=function(t,a){var c,u=this;t=Number(t);var l=S.p(a),h=function(e){var i=$(u);return S.w(i.date(i.date()+Math.round(e*t)),u)};if(l===o)return this.set(o,this.$M+t);if(l===d)return this.set(d,this.$y+t);if(l===s)return h(1);if(l===r)return h(7);var m=(c={},c[i]=6e4,c[n]=36e5,c[e]=1e3,c)[l]||1,f=this.$d.getTime()+t*m;return S.w(f,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=S.z(this),s=this.$locale(),r=this.$H,o=this.$m,a=this.$M,d=s.weekdays,c=s.months,u=function(t,n,s,r){return t&&(t[n]||t(e,i))||s[n].substr(0,r)},h=function(t){return S.s(r%12||12,t,"0")},m=s.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},f={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:S.s(a+1,2,"0"),MMM:u(s.monthsShort,a,c,3),MMMM:u(c,a),D:this.$D,DD:S.s(this.$D,2,"0"),d:String(this.$W),dd:u(s.weekdaysMin,this.$W,d,2),ddd:u(s.weekdaysShort,this.$W,d,3),dddd:d[this.$W],H:String(r),HH:S.s(r,2,"0"),h:h(1),hh:h(2),a:m(r,o,!0),A:m(r,o,!1),m:String(o),mm:S.s(o,2,"0"),s:String(this.$s),ss:S.s(this.$s,2,"0"),SSS:S.s(this.$ms,3,"0"),Z:n};return i.replace(l,(function(t,e){return e||f[t]||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(t,c,u){var l,h=S.p(c),m=$(t),f=6e4*(m.utcOffset()-this.utcOffset()),p=this-m,v=S.m(this,m);return v=(l={},l[d]=v/12,l[o]=v,l[a]=v/3,l[r]=(p-f)/6048e5,l[s]=(p-f)/864e5,l[n]=p/36e5,l[i]=p/6e4,l[e]=p/1e3,l)[h]||p,u?v:S.a(v)},m.daysInMonth=function(){return this.endOf(o).$D},m.$locale=function(){return v[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=y(t,e,!0);return n&&(i.$L=n),i},m.clone=function(){return S.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},h}(),w=M.prototype;return $.prototype=w,[["$ms",t],["$s",e],["$m",i],["$H",n],["$W",s],["$M",o],["$y",d],["$D",c]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),$.extend=function(t,e){return t.$i||(t(e,M,$),t.$i=!0),$},$.locale=y,$.isDayjs=g,$.unix=function(t){return $(1e3*t)},$.en=v[p],$.Ls=v,$.p={},$}()},1:function(t){t.exports=function(){"use strict";var t,e,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,n=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,s={years:31536e6,months:2592e6,days:864e5,hours:36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},r=function(t){return t instanceof l},o=function(t,e,i){return new l(t,i,e.$l)},a=function(t){return e.p(t)+"s"},d=function(t){return t<0},c=function(t){return d(t)?Math.ceil(t):Math.floor(t)},u=function(t,e){return t?d(t)?{negative:!0,format:""+function(t){return Math.abs(t)}(t)+e}:{negative:!1,format:""+t+e}:{negative:!1,format:""}},l=function(){function d(t,e,i){var r=this;if(this.$d={},this.$l=i,e)return o(t*s[a(e)],this);if("number"==typeof t)return this.$ms=t,this.parseFromMilliseconds(),this;if("object"==typeof t)return Object.keys(t).forEach((function(e){r.$d[a(e)]=t[e]})),this.calMilliseconds(),this;if("string"==typeof t){var d=t.match(n);if(d)return this.$d.years=d[2],this.$d.months=d[3],this.$d.weeks=d[4],this.$d.days=d[5],this.$d.hours=d[6],this.$d.minutes=d[7],this.$d.seconds=d[8],this.calMilliseconds(),this}return this}var l=d.prototype;return l.calMilliseconds=function(){var t=this;this.$ms=Object.keys(this.$d).reduce((function(e,i){return e+(t.$d[i]||0)*s[i]}),0)},l.parseFromMilliseconds=function(){var t=this.$ms;this.$d.years=c(t/31536e6),t%=31536e6,this.$d.months=c(t/2592e6),t%=2592e6,this.$d.days=c(t/864e5),t%=864e5,this.$d.hours=c(t/36e5),t%=36e5,this.$d.minutes=c(t/6e4),t%=6e4,this.$d.seconds=c(t/1e3),t%=1e3,this.$d.milliseconds=t},l.toISOString=function(){var t=u(this.$d.years,"Y"),e=u(this.$d.months,"M"),i=+this.$d.days||0;this.$d.weeks&&(i+=7*this.$d.weeks);var n=u(i,"D"),s=u(this.$d.hours,"H"),r=u(this.$d.minutes,"M"),o=this.$d.seconds||0;this.$d.milliseconds&&(o+=this.$d.milliseconds/1e3);var a=u(o,"S"),d=t.negative||e.negative||n.negative||s.negative||r.negative||a.negative,c=s.format||r.format||a.format?"T":"",l=(d?"-":"")+"P"+t.format+e.format+n.format+c+s.format+r.format+a.format;return"P"===l||"-P"===l?"P0D":l},l.toJSON=function(){return this.toISOString()},l.format=function(t){var n=t||"YYYY-MM-DDTHH:mm:ss",s={Y:this.$d.years,YY:e.s(this.$d.years,2,"0"),YYYY:e.s(this.$d.years,4,"0"),M:this.$d.months,MM:e.s(this.$d.months,2,"0"),D:this.$d.days,DD:e.s(this.$d.days,2,"0"),H:this.$d.hours,HH:e.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:e.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:e.s(this.$d.seconds,2,"0"),SSS:e.s(this.$d.milliseconds,3,"0")};return n.replace(i,(function(t,e){return e||String(s[t])}))},l.as=function(t){return this.$ms/s[a(t)]},l.get=function(t){var e=this.$ms,i=a(t);return"milliseconds"===i?e%=1e3:e="weeks"===i?c(e/s[i]):this.$d[i],0===e?0:e},l.add=function(t,e,i){var n;return n=e?t*s[a(e)]:r(t)?t.$ms:o(t,this).$ms,o(this.$ms+n*(i?-1:1),this)},l.subtract=function(t,e){return this.add(t,e,!0)},l.locale=function(t){var e=this.clone();return e.$l=t,e},l.clone=function(){return o(this.$ms,this)},l.humanize=function(e){return t().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},l.milliseconds=function(){return this.get("milliseconds")},l.asMilliseconds=function(){return this.as("milliseconds")},l.seconds=function(){return this.get("seconds")},l.asSeconds=function(){return this.as("seconds")},l.minutes=function(){return this.get("minutes")},l.asMinutes=function(){return this.as("minutes")},l.hours=function(){return this.get("hours")},l.asHours=function(){return this.as("hours")},l.days=function(){return this.get("days")},l.asDays=function(){return this.as("days")},l.weeks=function(){return this.get("weeks")},l.asWeeks=function(){return this.as("weeks")},l.months=function(){return this.get("months")},l.asMonths=function(){return this.as("months")},l.years=function(){return this.get("years")},l.asYears=function(){return this.as("years")},d}();return function(i,n,s){t=s,e=s().$utils(),s.duration=function(t,e){var i=s.locale();return o(t,{$l:i},e)},s.isDuration=r;var a=n.prototype.add,d=n.prototype.subtract;n.prototype.add=function(t,e){return r(t)&&(t=t.asMilliseconds()),a.bind(this)(t,e)},n.prototype.subtract=function(t,e){return r(t)&&(t=t.asMilliseconds()),d.bind(this)(t,e)}}}()},840:function(t,e,i){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=n(i(693)),r=n(i(1));s.default.extend(r.default);class o{constructor(){this.element=o.createElement(),this.blink=0}start(t){if(!t)return this.showBuilding();this.nextBuild=s.default(t).add(1,"day");const e=s.default();this.nextBuild<=e&&this.nextBuild.add(s.default.duration(e.diff(this.nextBuild)).days()+1,"days"),this.monitor()}static createElement(){const t=document.createElement("div");return t.classList.add("countdown"),t.innerHTML="Initializing...",document.querySelector(".body").appendChild(t),t}monitor(){this.timer=window.setInterval((()=>this.showNextUpdate()),500),this.showNextUpdate()}showNextUpdate(){const t=this.calculateDuration();if(t.asMilliseconds()<=0)return clearInterval(this.timer),this.showReady();const e=t.format("[<span>]HH:mm.ss[</span>]");this.element.innerHTML="Next update in "+((this.blink^=1)?e:e.replace(/:/," "))}showBuilding(){this.element.classList.add("building"),this.element.innerHTML="Building update"+"<span>.</span>".repeat(3)}showReady(){this.element.classList.add("ready"),this.element.innerHTML='<a onclick="location.reload()">Ready for launch</a>'}calculateDuration(){return s.default.duration(this.nextBuild.diff(s.default()))}}e.default=o}},e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=i(840),e=i.n(t);class n{constructor(){this.tryParseOpenIdPostback(),this.initLogInOut(),this.syncLogInOutState(),this.initFixedMenu(),this.initMenuScrollbarTransitions(),this.constrainDropdownMenuPositions(),this.scrollToCurrentHash(),this.overrideHashChange(),this.overrideFixedLinks(),this.initSearchValue(),this.initAppLinkMenu(),this.initRankingHoverItems(),this.initCountdown()}initLogInOut(){const t=document.querySelector("#lout form");t?(t["openid.return_to"].value=location.origin+location.pathname,document.querySelector("#lin button").addEventListener("click",(t=>this.logout()))):console.debug("Steam user area unavailable: skipped.")}initFixedMenu(){const t=document.querySelector("ol.menu"),e=t.cloneNode(!0);function i(){e.style.position="fixed",e.style.visibility=t.offsetTop<scrollY?"visible":"hidden"}i(),t.insertAdjacentElement("afterend",e),addEventListener("scroll",i)}initMenuScrollbarTransitions(){const t="t11g";document.querySelectorAll("ol.menu li").forEach((e=>{const i=e.querySelector("ol");i&&(e.addEventListener("mouseenter",(e=>0===i.clientHeight&&i.classList.add(t))),e.addEventListener("mouseleave",(e=>i.classList.add(t))))})),document.querySelectorAll("ol.menu > li ol").forEach((e=>{e.addEventListener("transitionend",(i=>e.classList.remove(t))),e.addEventListener("wheel",(t=>{e.clientHeight+e.scrollTop+t.deltaY>e.scrollHeight?(e.scrollTop=e.scrollHeight,t.preventDefault()):e.scrollTop+t.deltaY<0&&(e.scrollTop=0,t.preventDefault()),t.stopPropagation()}))}))}constrainDropdownMenuPositions(){document.querySelectorAll("ol.menu > li > ol").forEach((t=>{const e=t.getBoundingClientRect();e.left<0&&(t.style.left=`calc(${getComputedStyle(t).left} - ${e.left}px)`),e.right>document.documentElement.clientWidth&&(t.style.left=`calc(${getComputedStyle(t).left} - ${e.right-document.documentElement.clientWidth}px)`)}))}scrollToCurrentHash(){addEventListener("load",(t=>this.scrollToHash(location.hash)))}overrideHashChange(){addEventListener("hashchange",(t=>this.scrollToHash(location.hash)))}overrideFixedLinks(){document.querySelectorAll(".fixedlinks a").forEach((t=>{t.addEventListener("click",(e=>{this.scrollToHash(t.hash),e.preventDefault()}))}))}scrollToHash(t){const e="highlight";if(document.querySelectorAll(".ranking [id]").forEach((t=>t.classList.remove(e))),!t)return;const i=document.querySelector("ol.menu").getBoundingClientRect().height,n=this.resolveHashTarget(t);if(n){let t=n.getBoundingClientRect().top-i;const s=document.querySelector(".ranking");if(s&&s.contains(n)){if(n.classList.add(e),function(t){const e=t.getBoundingClientRect();return e.top>=i&&e.left>=0&&e.bottom<=innerHeight&&e.right<=innerWidth}(n))return;t+=n.getBoundingClientRect().height/2-innerHeight/3}scrollTo(pageXOffset,pageYOffset+Math.ceil(t))}}resolveHashTarget(t){if(t.startsWith("#app/")){let[e,i,n]=t.split("/",3),s=document.querySelector(`.ranking img[src*="/${i}/"]`);return s?s.closest("[id]"):void console.error(`Couldn't find game on this ranking: "${decodeURIComponent(n)}".`)}return document.getElementById(t.substr(1))}syncLogInOutState(){const t=document.getElementById("user").classList;t.remove("lin","lout"),t.add(n.isLoggedIn()?"lin":"lout"),n.isLoggedIn()&&(this.markOwnedGames(),this.updateUserBar())}markOwnedGames(){const t=JSON.parse(localStorage.getItem("games")),e=document.querySelectorAll(".ranking > div[id] > div:first-of-type > a");let i,n;e.forEach((e=>{const i=e.firstElementChild.src.match(/\/apps\/(\d+)/)[1];t.hasOwnProperty(i)&&(e.classList.add("owned"),e.setAttribute("data-content",t[i]+" hours"))})),document.querySelector("#user .owned").innerText=e.length?(i=document.querySelectorAll(".ranking .owned").length)+"/"+(n=e.length)+" ("+Math.round(i/n*100)+"%)":"n/a"}unmarkOwnedGames(){document.querySelectorAll(".ranking a.owned").forEach((t=>{t.classList.remove("owned")}))}updateUserBar(){const t=JSON.parse(localStorage.getItem("steam")),e=document.querySelector("#lin .avatar");e.href=`http://steamcommunity.com/profiles/${t.id}/`,e.title=t.name;const i=document.createElement("img");i.src=t.avatar,e.appendChild(i)}static isLoggedIn(){return localStorage.hasOwnProperty("steam")&&localStorage.hasOwnProperty("games")}logout(){localStorage.removeItem("steam"),localStorage.removeItem("games"),this.unmarkOwnedGames(),this.syncLogInOutState()}tryParseOpenIdPostback(){const t=this.parseParam("openid.claimed_id");if(!t)return;const e=t.replace(/.*\//,"");fetch(`https://cors.bridged.cc/https://steamcommunity.com/profiles/${e}/games/?tab=all`).then((t=>t.text())).then((t=>{const i=t.match(/var rgGames = ([^\n]+);/);if(!i||2!==i.length)return void alert("Unable to load your profile. This is usually because your Steam profile is not public.\nTry setting your Steam Community profile visibility to public, then refresh this page to try again.");const n=JSON.parse(i[1]).reduce(((t,e)=>(t[e.appid]=e.hours_forever||0,t)),{});if(!Object.keys(n).length)return void alert("No games found in your account! This is usually because your game details are not public.\nTry setting your game details to public on your Steam Community privacy settings page, then refresh this page to try again.");localStorage.setItem("games",JSON.stringify(n));const s=(new DOMParser).parseFromString(t,"text/html");localStorage.setItem("steam",JSON.stringify({id:e,name:s.querySelector(".profile_small_header_name").innerText,avatar:s.querySelector(".playerAvatar > img").src.replace("_medium","")})),location.replace(location.pathname)}))}initSearchValue(){const t=this.parseParam("q");null!==t&&document.querySelectorAll("input[name=q]").forEach((e=>e.value=t.replace(/\+/g," ")))}initAppLinkMenu(){const t=document.getElementById("linkmenu"),e="show";let i;document.querySelectorAll(".ranking .links").forEach((n=>{n.addEventListener("click",(s=>{t.style.top=n.offsetTop+n.offsetHeight+5+"px",t.style.left=n.offsetLeft+"px",t.querySelector("a:first-of-type > span").innerHTML=n.closest("[id]").id,t.classList.toggle(e,i!==n||void 0),n.classList.toggle(e,t.classList.contains(e)),i=n,s.preventDefault()})),n.addEventListener("blur",(i=>{t.classList.remove(e),n.classList.remove(e)}))})),document.querySelectorAll("#linkmenu a").forEach((t=>{t.addEventListener("click",(e=>{if(t.classList.contains("cp")&&(t.classList.contains("rank")&&this.copyToClipboard(i.href),t.classList.contains("app"))){const t=this.findSteamAppId(i.closest("[id]")),e=encodeURIComponent(this.findSteamAppName(i.closest("div")));this.copyToClipboard(`${location.origin}${location.pathname}#app/${t}/${e}`)}}))}))}initRankingHoverItems(){document.querySelectorAll(".compact.ranking li > .title").forEach((t=>{const e=t.appendChild(t.cloneNode(!0));e.style.pointerEvents="none",t.addEventListener("mouseenter",(t=>{e.classList.remove("animate"),e.offsetWidth,e.classList.add("animate")})),t.addEventListener("animationend",(t=>{e.classList.remove("animate")}))}))}async initCountdown(){const t=new(e()),i=await(await fetch("https://api.github.com/repos/250/Steam-250/actions/workflows/Build.yml/runs?actor=Azure-bot&status=completed&per_page=1")).json();t.start(i.workflow_runs[0].updated_at)}parseParam(t){const e=RegExp("[?&]"+t+"=([^&]*)").exec(location.search);return e&&decodeURIComponent(e[1])}findSteamAppId(t){const e=t.querySelector("img[src]");if(e)return e.src.match(/\/(\d+)\//)[1]}findSteamAppName(t){return t.querySelector(".title > a").innerText}copyToClipboard(t){if(window.clipboardData&&window.clipboardData.setData)return clipboardData.setData("Text",t);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){const e=document.createElement("textarea");e.textContent=t,e.style.position="fixed",document.body.appendChild(e),e.select();try{return document.execCommand("copy")}catch(t){return!1}finally{document.body.removeChild(e)}}}}new n})(),new class{constructor(){this.initDom(),this.initVideo(),this.initVideoLinks(),this.initKeyboard(),this.initFooterScroll()}initDom(){this.container=document.body.appendChild(document.createElement("div")),this.frame=this.container.appendChild(document.createElement("div")),this.header=this.frame.appendChild(document.createElement("header")),this.video=this.frame.appendChild(document.createElement("video")),this.footer=this.frame.appendChild(document.createElement("footer")),this.page=document.querySelector("#page"),this.container.id="video-container",this.container.addEventListener("click",(t=>t.target===this.container&&this.deactivate()))}initVideo(){this.video.controls=this.video.autoplay=!0;const t=this.loadVolumeState();this.video.volume=t.volume,this.video.muted=t.muted,this.video.addEventListener("volumechange",(t=>this.saveVolumeState())),this.video.addEventListener("loadedmetadata",(t=>{this.video.removeAttribute("width"),this.video.removeAttribute("height"),this.frame.style.maxWidth=this.video.videoWidth+"px"}))}initVideoLinks(){document.querySelectorAll("[data-video]").forEach((t=>t.addEventListener("click",(e=>{"A"===e.target.tagName&&e.target!==t||(this.loadThumbs(t.getAttribute("data-video").split(",")),this.header.innerHTML=t.getAttribute("data-title"),"href"in t&&(this.header.innerHTML=`<a href="${t.href}">${this.header.innerHTML}</a>`),this.footer.firstChild.click(),e.stopPropagation(),e.preventDefault())}))))}initKeyboard(){document.addEventListener("keydown",(t=>"Escape"===t.key&&this.deactivate()))}initFooterScroll(){this.footer.addEventListener("mousemove",(t=>{const e=this.footer.getBoundingClientRect();this.footer.scroll({left:(this.footer.scrollWidth-e.width)*((t.clientX-e.x)/e.width*1.2-.1),behavior:"undefined"!=typeof InstallTrigger?"smooth":"auto"})}))}loadThumbs(t){for(;this.footer.lastChild;)this.footer.removeChild(this.footer.lastChild);for(let e=0;e<t.length;++e){const i=this.footer.appendChild(document.createElement("div"));i.setAttribute("data-index",e+1);const n=i.appendChild(document.createElement("img"));n.src=`https://cdn.cloudflare.steamstatic.com/steam/apps/${t[e]}/movie.184x123.jpg`,i.addEventListener("click",(s=>{this.play(t[e]),i.parentNode.querySelectorAll("img").forEach((t=>t.classList.remove("active"))),n.classList.add("active"),this.header.setAttribute("data-video-id",e+1),this.header.setAttribute("data-videos",t.length)}))}}loadVolumeState(){return localStorage.hasOwnProperty("video.volume")?JSON.parse(localStorage.getItem("video.volume")):{volume:.5,muted:!1}}saveVolumeState(){localStorage.setItem("video.volume",JSON.stringify({volume:this.video.volume,muted:this.video.muted}))}activate(){this.container.classList.add("active"),this.page.classList.add("video")}deactivate(){this.video.pause(),this.container.classList.remove("active"),this.page.classList.remove("video")}play(t){for(this.video.width=this.video.clientWidth,this.video.height=this.video.clientHeight;this.video.lastChild;)this.video.removeChild(this.video.lastChild);const e=this.video.appendChild(document.createElement("source"));e.src=`https://steamcdn-a.akamaihd.net/steam/apps/${t}/movie480.webm`,e.type="video/webm";const i=this.video.appendChild(document.createElement("source"));i.src=`https://steamcdn-a.akamaihd.net/steam/apps/${t}/movie480.mp4`,i.type="video/mp4",this.activate(),this.video.load()}}})();