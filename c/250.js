/*! For license information please see 250.js.LICENSE.txt */
(()=>{var e={319:()=>{new class{constructor(){!1!==this.initDom()&&(this.initVideo(),this.initVideoLinks(),this.initKeyboard(),this.initFooterScroll())}initDom(){if(!document.body)return console.debug("Video player aborted: body not ready."),!1;this.container=document.body.appendChild(document.createElement("div")),this.frame=this.container.appendChild(document.createElement("div")),this.header=this.frame.appendChild(document.createElement("header")),this.video=this.frame.appendChild(document.createElement("video")),this.footer=this.frame.appendChild(document.createElement("footer")),this.page=document.querySelector("#page"),this.container.id="video-container",this.container.addEventListener("click",(e=>e.target===this.container&&this.deactivate()))}initVideo(){this.video.controls=this.video.autoplay=!0;const e=this.loadVolumeState();this.video.volume=e.volume,this.video.muted=e.muted,this.video.addEventListener("volumechange",(e=>this.saveVolumeState())),this.video.addEventListener("loadedmetadata",(e=>{this.video.removeAttribute("width"),this.video.removeAttribute("height"),this.frame.style.maxWidth=this.video.videoWidth+"px"}))}initVideoLinks(){document.querySelectorAll("[data-video]").forEach((e=>e.addEventListener("click",(t=>{"A"===t.target.tagName&&t.target!==e||(this.loadThumbs(e.getAttribute("data-video").split(",")),this.header.innerHTML=e.getAttribute("data-title"),"href"in e&&(this.header.innerHTML=`<a href="${e.href}">${this.header.innerHTML}</a>`),this.footer.firstChild.click(),t.stopPropagation(),t.preventDefault())}))))}initKeyboard(){document.addEventListener("keydown",(e=>"Escape"===e.key&&this.deactivate()))}initFooterScroll(){this.footer.addEventListener("mousemove",(e=>{const t=this.footer.getBoundingClientRect();this.footer.scroll({left:(this.footer.scrollWidth-t.width)*((e.clientX-t.x)/t.width*1.2-.1),behavior:"undefined"!=typeof InstallTrigger?"smooth":"auto"})}))}loadThumbs(e){for(;this.footer.lastChild;)this.footer.removeChild(this.footer.lastChild);for(let t=0;t<e.length;++t){const i=this.footer.appendChild(document.createElement("div"));i.setAttribute("data-index",t+1);let n=e[t],r="";n.length>40&&(r=n.substring(0,40),n=n.substring(40));const s=i.appendChild(document.createElement("img"));s.src=`https://shared.cloudflare.steamstatic.com/store_item_assets/steam/apps/${n}/${r}/`+(r?"movie_232x130.jpg":"movie.184x123.jpg"),i.addEventListener("click",(r=>{this.play(n),i.parentNode.querySelectorAll("img").forEach((e=>e.classList.remove("active"))),s.classList.add("active"),this.header.setAttribute("data-video-id",t+1),this.header.setAttribute("data-videos",e.length)}))}}loadVolumeState(){return localStorage.hasOwnProperty("video.volume")?JSON.parse(localStorage.getItem("video.volume")):{volume:.5,muted:!1}}saveVolumeState(){localStorage.setItem("video.volume",JSON.stringify({volume:this.video.volume,muted:this.video.muted}))}activate(){this.container.classList.add("active"),this.page.classList.add("video")}deactivate(){this.video.pause(),this.container.classList.remove("active"),this.page.classList.remove("video")}play(e){for(this.video.width=this.video.clientWidth,this.video.height=this.video.clientHeight;this.video.lastChild;)this.video.removeChild(this.video.lastChild);const t=this.video.appendChild(document.createElement("source"));t.src=`https://steamcdn-a.akamaihd.net/steam/apps/${e}/movie480.webm`,t.type="video/webm";const i=this.video.appendChild(document.createElement("source"));i.src=`https://steamcdn-a.akamaihd.net/steam/apps/${e}/movie480.mp4`,i.type="video/mp4",this.activate(),this.video.load()}}},385:()=>{},652:()=>{},713:(e,t,i)=>{"use strict";i.r(t),i.d(t,{COPY_AUTOCAPTURE_EVENT:()=>m,Compression:()=>n,PostHog:()=>ro,SurveyQuestionBranchingType:()=>$r,SurveyQuestionType:()=>Ar,SurveyType:()=>Lr,default:()=>oo,knownUnsafeEditableEvent:()=>b,posthog:()=>oo,severityLevels:()=>y});var n,r="undefined"!=typeof window?window:void 0,s="undefined"!=typeof globalThis?globalThis:r,o=Array.prototype,a=o.forEach,l=o.indexOf,c=null==s?void 0:s.navigator,u=null==s?void 0:s.document,d=null==s?void 0:s.location,h=null==s?void 0:s.fetch,f=null!=s&&s.XMLHttpRequest&&"withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:void 0,p=null==s?void 0:s.AbortController,g=null==c?void 0:c.userAgent,v=null!=r?r:{},_={DEBUG:!1,LIB_VERSION:"1.212.1"},m="$copy_autocapture",b=["$snapshot","$pageview","$pageleave","$set","survey dismissed","survey sent","survey shown","$identify","$groupidentify","$create_alias","$$client_ingestion_warning","$web_experiment_applied","$feature_enrollment_update","$feature_flag_called"];!function(e){e.GZipJS="gzip-js",e.Base64="base64"}(n||(n={}));var y=["fatal","error","warning","log","info","debug"];function w(e,t){return-1!==e.indexOf(t)}var k=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},E=function(e){return e.replace(/^\$/,"")},S=Array.isArray,x=Object.prototype,C=x.hasOwnProperty,I=x.toString,P=S||function(e){return"[object Array]"===I.call(e)},T=e=>"function"==typeof e,R=e=>e===Object(e)&&!P(e),F=e=>{if(R(e)){for(var t in e)if(C.call(e,t))return!1;return!0}return!1},M=e=>void 0===e,L=e=>"[object String]"==I.call(e),A=e=>L(e)&&0===e.trim().length,$=e=>null===e,O=e=>M(e)||$(e),N=e=>"[object Number]"==I.call(e),D=e=>"[object Boolean]"===I.call(e),q=e=>w(b,e),B=e=>{var t={_log:function(t){if(r&&(_.DEBUG||v.POSTHOG_DEBUG)&&!M(r.console)&&r.console){for(var i=("__rrweb_original__"in r.console[t]?r.console[t].__rrweb_original__:r.console[t]),n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];i(e,...s)}},info:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t._log("log",...i)},warn:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t._log("warn",...i)},error:function(){for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t._log("error",...i)},critical:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];console.error(e,...i)},uninitializedWarning:e=>{t.error("You must initialize PostHog before calling ".concat(e))},createLogger:t=>B("".concat(e," ").concat(t))};return t},H=B("[PostHog.js]"),U=H.createLogger,j=U("[ExternalScriptsLoader]"),z=(e,t,i)=>{if(e.config.disable_external_dependency_loading)return j.warn("".concat(t," was requested but loading of external scripts is disabled.")),i("Loading of external scripts is disabled");var n=()=>{if(!u)return i("document not found");var n=u.createElement("script");if(n.type="text/javascript",n.crossOrigin="anonymous",n.src=t,n.onload=e=>i(void 0,e),n.onerror=e=>i(e),e.config.prepare_external_dependency_script&&(n=e.config.prepare_external_dependency_script(n)),!n)return i("prepare_external_dependency_script returned null");var r,s=u.querySelectorAll("body > script");s.length>0?null===(r=s[0].parentNode)||void 0===r||r.insertBefore(n,s[0]):u.body.appendChild(n)};null!=u&&u.body?n():null==u||u.addEventListener("DOMContentLoaded",n)};function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function V(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach((function(t){W(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function W(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Y(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}v.__PosthogExtensions__=v.__PosthogExtensions__||{},v.__PosthogExtensions__.loadExternalDependency=(e,t,i)=>{var n="/static/".concat(t,".js")+"?v=".concat(e.version);if("remote-config"===t&&(n="/array/".concat(e.config.token,"/config.js")),"toolbar"===t){var r=3e5,s=Math.floor(Date.now()/r)*r;n="".concat(n,"&t=").concat(s)}var o=e.requestRouter.endpointFor("assets",n);z(e,o,i)},v.__PosthogExtensions__.loadSiteApp=(e,t,i)=>{var n=e.requestRouter.endpointFor("api",t);z(e,n,i)};var J={};function X(e,t,i){if(P(e))if(a&&e.forEach===a)e.forEach(t,i);else if("length"in e&&e.length===+e.length)for(var n=0,r=e.length;n<r;n++)if(n in e&&t.call(i,e[n],n)===J)return}function K(e,t,i){if(!O(e)){if(P(e))return X(e,t,i);if((e=>e instanceof FormData)(e)){for(var n of e.entries())if(t.call(i,n[1],n[0])===J)return}else for(var r in e)if(C.call(e,r)&&t.call(i,e[r],r)===J)return}}var Q=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return X(i,(function(t){for(var i in t)void 0!==t[i]&&(e[i]=t[i])})),e},Z=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return X(i,(function(t){X(t,(function(t){e.push(t)}))})),e};function ee(e){for(var t=Object.keys(e),i=t.length,n=new Array(i);i--;)n[i]=[t[i],e[t[i]]];return n}var te=function(e){try{return e()}catch(e){return}},ie=function(e){return function(){try{for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i)}catch(e){H.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),H.critical(e)}}},ne=function(e){var t={};return K(e,(function(e,i){L(e)&&e.length>0&&(t[i]=e)})),t};var re=["herokuapp.com","vercel.app","netlify.app"];function se(e){var t=null==e?void 0:e.hostname;if(!L(t))return!1;var i=t.split(".").slice(-2).join(".");for(var n of re)if(i===n)return!1;return!0}function oe(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return e[i]}function ae(e,t,i,n){var{capture:r=!1,passive:s=!0}=null!=n?n:{};null==e||e.addEventListener(t,i,{capture:r,passive:s})}var le="$people_distinct_id",ce="__alias",ue="__timers",de="$autocapture_disabled_server_side",he="$heatmaps_enabled_server_side",fe="$exception_capture_enabled_server_side",pe="$web_vitals_enabled_server_side",ge="$dead_clicks_enabled_server_side",ve="$web_vitals_allowed_metrics",_e="$session_recording_enabled_server_side",me="$console_log_recording_enabled_server_side",be="$session_recording_network_payload_capture",ye="$session_recording_canvas_recording",we="$replay_sample_rate",ke="$replay_minimum_duration",Ee="$replay_script_config",Se="$sesid",xe="$session_is_sampled",Ce="$session_recording_url_trigger_activated_session",Ie="$session_recording_event_trigger_activated_session",Pe="$enabled_feature_flags",Te="$early_access_features",Re="$stored_person_properties",Fe="$stored_group_properties",Me="$surveys",Le="$surveys_activated",Ae="$flag_call_reported",$e="$user_state",Oe="$client_session_props",Ne="$capture_rate_limit",De="$initial_campaign_params",qe="$initial_referrer_info",Be="$initial_person_info",He="$epp",Ue="__POSTHOG_TOOLBAR__",je="$posthog_cookieless",ze=[le,ce,"__cmpns",ue,_e,he,Se,Pe,$e,Te,Fe,Re,Me,Ae,Oe,Ne,De,qe,He],Ge=U("[FeatureFlags]"),Ve="$active_feature_flags",We="$override_feature_flags",Ye="$feature_flag_payloads",Je=e=>{var t={};for(var[i,n]of ee(e||{}))n&&(t[i]=n);return t};class Xe{constructor(e){W(this,"_override_warning",!1),W(this,"_hasLoadedFlags",!1),W(this,"_requestInFlight",!1),W(this,"_reloadingDisabled",!1),W(this,"_additionalReloadRequested",!1),W(this,"_decideCalled",!1),W(this,"_flagsLoadedFromRemote",!1),this.instance=e,this.featureFlagEventHandlers=[]}decide(){if(this.instance.config.__preview_remote_config)this._decideCalled=!0;else{var e=!this._reloadDebouncer&&(this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load);this._callDecideEndpoint({disableFlags:e})}}get hasLoadedFlags(){return this._hasLoadedFlags}getFlags(){return Object.keys(this.getFlagVariants())}getFlagVariants(){var e=this.instance.get_property(Pe),t=this.instance.get_property(We);if(!t)return e||{};for(var i=Q({},e),n=Object.keys(t),r=0;r<n.length;r++)i[n[r]]=t[n[r]];return this._override_warning||(Ge.warn(" Overriding feature flags!",{enabledFlags:e,overriddenFlags:t,finalFlags:i}),this._override_warning=!0),i}getFlagPayloads(){return this.instance.get_property(Ye)||{}}reloadFeatureFlags(){this._reloadingDisabled||this.instance.config.advanced_disable_feature_flags||this._reloadDebouncer||(this._reloadDebouncer=setTimeout((()=>{this._callDecideEndpoint()}),5))}clearDebouncer(){clearTimeout(this._reloadDebouncer),this._reloadDebouncer=void 0}ensureFlagsLoaded(){this._hasLoadedFlags||this._requestInFlight||this._reloadDebouncer||this.reloadFeatureFlags()}setAnonymousDistinctId(e){this.$anon_distinct_id=e}setReloadingPaused(e){this._reloadingDisabled=e}_callDecideEndpoint(e){if(this.clearDebouncer(),!this.instance.config.advanced_disable_decide)if(this._requestInFlight)this._additionalReloadRequested=!0;else{var t={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:this.instance.get_property(Re),group_properties:this.instance.get_property(Fe)};(null!=e&&e.disableFlags||this.instance.config.advanced_disable_feature_flags)&&(t.disable_flags=!0),this._requestInFlight=!0,this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:t,compression:this.instance.config.disable_compression?void 0:n.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:e=>{var i,n,r=!0;200===e.statusCode&&(this.$anon_distinct_id=void 0,r=!1),this._requestInFlight=!1,this._decideCalled||(this._decideCalled=!0,this.instance._onRemoteConfig(null!==(n=e.json)&&void 0!==n?n:{})),t.disable_flags||(this._flagsLoadedFromRemote=!r,this.receivedFeatureFlags(null!==(i=e.json)&&void 0!==i?i:{},r),this._additionalReloadRequested&&(this._additionalReloadRequested=!1,this._callDecideEndpoint()))}})}}getFeatureFlag(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0){var i,n,r,s,o,a=this.getFlagVariants()[e],l="".concat(a),c=this.instance.get_property(Ae)||{};return!t.send_event&&"send_event"in t||e in c&&c[e].includes(l)||(P(c[e])?c[e].push(l):c[e]=[l],null===(i=this.instance.persistence)||void 0===i||i.register({[Ae]:c}),this.instance.capture("$feature_flag_called",{$feature_flag:e,$feature_flag_response:a,$feature_flag_payload:this.getFeatureFlagPayload(e)||null,$feature_flag_bootstrapped_response:(null===(n=this.instance.config.bootstrap)||void 0===n||null===(r=n.featureFlags)||void 0===r?void 0:r[e])||null,$feature_flag_bootstrapped_payload:(null===(s=this.instance.config.bootstrap)||void 0===s||null===(o=s.featureFlagPayloads)||void 0===o?void 0:o[e])||null,$used_bootstrap_value:!this._flagsLoadedFromRemote})),a}Ge.warn('getFeatureFlag for key "'+e+"\" failed. Feature flags didn't load in time.")}getFeatureFlagPayload(e){return this.getFlagPayloads()[e]}isFeatureEnabled(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._hasLoadedFlags||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(e,t);Ge.warn('isFeatureEnabled for key "'+e+"\" failed. Feature flags didn't load in time.")}addFeatureFlagsHandler(e){this.featureFlagEventHandlers.push(e)}removeFeatureFlagsHandler(e){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((t=>t!==e))}receivedFeatureFlags(e,t){if(this.instance.persistence){this._hasLoadedFlags=!0;var i=this.getFlagVariants(),n=this.getFlagPayloads();!function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=e.featureFlags,s=e.featureFlagPayloads;if(r)if(P(r)){var o={};if(r)for(var a=0;a<r.length;a++)o[r[a]]=!0;t&&t.register({[Ve]:r,[Pe]:o})}else{var l=r,c=s;e.errorsWhileComputingFlags&&(l=V(V({},i),l),c=V(V({},n),c)),t&&t.register({[Ve]:Object.keys(Je(l)),[Pe]:l||{},[Ye]:c||{}})}}(e,this.instance.persistence,i,n),this._fireFeatureFlagsCallbacks(t)}}override(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return Ge.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=t,!1===e)this.instance.persistence.unregister(We);else if(P(e)){for(var i={},n=0;n<e.length;n++)i[e[n]]=!0;this.instance.persistence.register({[We]:i})}else this.instance.persistence.register({[We]:e})}onFeatureFlags(e){if(this.addFeatureFlagsHandler(e),this._hasLoadedFlags){var{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();e(t,i)}return()=>this.removeFeatureFlagsHandler(e)}updateEarlyAccessFeatureEnrollment(e,t){var i,n=(this.instance.get_property(Te)||[]).find((t=>t.flagKey===e)),r={["$feature_enrollment/".concat(e)]:t},s={$feature_flag:e,$feature_enrollment:t,$set:r};n&&(s.$early_access_feature_name=n.name),this.instance.capture("$feature_enrollment_update",s),this.setPersonPropertiesForFlags(r,!1);var o=V(V({},this.getFlagVariants()),{},{[e]:t});null===(i=this.instance.persistence)||void 0===i||i.register({[Ve]:Object.keys(Je(o)),[Pe]:o}),this._fireFeatureFlagsCallbacks()}getEarlyAccessFeatures(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.get_property(Te);if(i&&!t)return e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{var i;if(t.json){var n=t.json.earlyAccessFeatures;return null===(i=this.instance.persistence)||void 0===i||i.register({[Te]:n}),e(n)}}})}_prepareFeatureFlagsForCallbacks(){var e=this.getFlags(),t=this.getFlagVariants();return{flags:e.filter((e=>t[e])),flagVariants:Object.keys(t).filter((e=>t[e])).reduce(((e,i)=>(e[i]=t[i],e)),{})}}_fireFeatureFlagsCallbacks(e){var{flags:t,flagVariants:i}=this._prepareFeatureFlagsForCallbacks();this.featureFlagEventHandlers.forEach((n=>n(t,i,{errorsLoading:e})))}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.instance.get_property(Re)||{};this.instance.register({[Re]:V(V({},i),e)}),t&&this.instance.reloadFeatureFlags()}resetPersonPropertiesForFlags(){this.instance.unregister(Re)}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.instance.get_property(Fe)||{};0!==Object.keys(i).length&&Object.keys(i).forEach((t=>{i[t]=V(V({},i[t]),e[t]),delete e[t]})),this.instance.register({[Fe]:V(V({},i),e)}),t&&this.instance.reloadFeatureFlags()}resetGroupPropertiesForFlags(e){if(e){var t=this.instance.get_property(Fe)||{};this.instance.register({[Fe]:V(V({},t),{},{[e]:{}})})}else this.instance.unregister(Fe)}}Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return N(e)&&isFinite(e)&&Math.floor(e)===e});var Ke="0123456789abcdef";class Qe{constructor(e){if(this.bytes=e,16!==e.length)throw new TypeError("not 128-bit length")}static fromFieldsV7(e,t,i,n){if(!Number.isInteger(e)||!Number.isInteger(t)||!Number.isInteger(i)||!Number.isInteger(n)||e<0||t<0||i<0||n<0||e>0xffffffffffff||t>4095||i>1073741823||n>4294967295)throw new RangeError("invalid field value");var r=new Uint8Array(16);return r[0]=e/Math.pow(2,40),r[1]=e/Math.pow(2,32),r[2]=e/Math.pow(2,24),r[3]=e/Math.pow(2,16),r[4]=e/Math.pow(2,8),r[5]=e,r[6]=112|t>>>8,r[7]=t,r[8]=128|i>>>24,r[9]=i>>>16,r[10]=i>>>8,r[11]=i,r[12]=n>>>24,r[13]=n>>>16,r[14]=n>>>8,r[15]=n,new Qe(r)}toString(){for(var e="",t=0;t<this.bytes.length;t++)e=e+Ke.charAt(this.bytes[t]>>>4)+Ke.charAt(15&this.bytes[t]),3!==t&&5!==t&&7!==t&&9!==t||(e+="-");if(36!==e.length)throw new Error("Invalid UUIDv7 was generated");return e}clone(){return new Qe(this.bytes.slice(0))}equals(e){return 0===this.compareTo(e)}compareTo(e){for(var t=0;t<16;t++){var i=this.bytes[t]-e.bytes[t];if(0!==i)return Math.sign(i)}return 0}}class Ze{constructor(){W(this,"timestamp",0),W(this,"counter",0),W(this,"random",new it)}generate(){var e=this.generateOrAbort();if(M(e)){this.timestamp=0;var t=this.generateOrAbort();if(M(t))throw new Error("Could not generate UUID after timestamp reset");return t}return e}generateOrAbort(){var e=Date.now();if(e>this.timestamp)this.timestamp=e,this.resetCounter();else{if(!(e+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return Qe.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}resetCounter(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}var et,tt=e=>{if("undefined"!=typeof UUIDV7_DENY_WEAK_RNG&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};r&&!M(r.crypto)&&crypto.getRandomValues&&(tt=e=>crypto.getRandomValues(e));class it{constructor(){W(this,"buffer",new Uint32Array(8)),W(this,"cursor",1/0)}nextUint32(){return this.cursor>=this.buffer.length&&(tt(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}var nt=()=>rt().toString(),rt=()=>(et||(et=new Ze)).generate(),st="",ot=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;var at={is_supported:()=>!!u,error:function(e){H.error("cookieStore error: "+e)},get:function(e){if(u){try{for(var t=e+"=",i=u.cookie.split(";").filter((e=>e.length)),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}}catch(e){}return null}},parse:function(e){var t;try{t=JSON.parse(at.get(e))||{}}catch(e){}return t},set:function(e,t,i,n,r){if(u)try{var s="",o="",a=function(e,t){if(t){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;if(st)return st;if(!t)return"";if(["localhost","127.0.0.1"].includes(e))return"";for(var i=e.split("."),n=Math.min(i.length,8),r="dmn_chk_"+nt(),s=new RegExp("(^|;)\\s*"+r+"=1");!st&&n--;){var o=i.slice(n).join("."),a=r+"=1;domain=."+o;t.cookie=a,s.test(t.cookie)&&(t.cookie=a+";expires=Thu, 01 Jan 1970 00:00:00 GMT",st=o)}return st}(e);if(!i){var n=(e=>{var t=e.match(ot);return t?t[0]:""})(e);n!==i&&H.info("Warning: cookie subdomain discovery mismatch",n,i),i=n}return i?"; domain=."+i:""}return""}(u.location.hostname,n);if(i){var l=new Date;l.setTime(l.getTime()+24*i*60*60*1e3),s="; expires="+l.toUTCString()}r&&(o="; secure");var c=e+"="+encodeURIComponent(JSON.stringify(t))+s+"; SameSite=Lax; path=/"+a+o;return c.length>3686.4&&H.warn("cookieStore warning: large cookie, len="+c.length),u.cookie=c,c}catch(e){return}},remove:function(e,t){try{at.set(e,"",-1,t)}catch(e){return}}},lt=null,ct={is_supported:function(){if(!$(lt))return lt;var e=!0;if(M(r))e=!1;else try{var t="__mplssupport__";ct.set(t,"xyz"),'"xyz"'!==ct.get(t)&&(e=!1),ct.remove(t)}catch(t){e=!1}return e||H.error("localStorage unsupported; falling back to cookie store"),lt=e,e},error:function(e){H.error("localStorage error: "+e)},get:function(e){try{return null==r?void 0:r.localStorage.getItem(e)}catch(e){ct.error(e)}return null},parse:function(e){try{return JSON.parse(ct.get(e))||{}}catch(e){}return null},set:function(e,t){try{null==r||r.localStorage.setItem(e,JSON.stringify(t))}catch(e){ct.error(e)}},remove:function(e){try{null==r||r.localStorage.removeItem(e)}catch(e){ct.error(e)}}},ut=["distinct_id",Se,xe,He,Be],dt=V(V({},ct),{},{parse:function(e){try{var t={};try{t=at.parse(e)||{}}catch(e){}var i=Q(t,JSON.parse(ct.get(e)||"{}"));return ct.set(e,i),i}catch(e){}return null},set:function(e,t,i,n,r,s){try{ct.set(e,t,void 0,void 0,s);var o={};ut.forEach((e=>{t[e]&&(o[e]=t[e])})),Object.keys(o).length&&at.set(e,o,i,n,r,s)}catch(e){ct.error(e)}},remove:function(e,t){try{null==r||r.localStorage.removeItem(e),at.remove(e,t)}catch(e){ct.error(e)}}}),ht={},ft={is_supported:function(){return!0},error:function(e){H.error("memoryStorage error: "+e)},get:function(e){return ht[e]||null},parse:function(e){return ht[e]||null},set:function(e,t){ht[e]=t},remove:function(e){delete ht[e]}},pt=null,gt={is_supported:function(){if(!$(pt))return pt;if(pt=!0,M(r))pt=!1;else try{var e="__support__";gt.set(e,"xyz"),'"xyz"'!==gt.get(e)&&(pt=!1),gt.remove(e)}catch(e){pt=!1}return pt},error:function(e){H.error("sessionStorage error: ",e)},get:function(e){try{return null==r?void 0:r.sessionStorage.getItem(e)}catch(e){gt.error(e)}return null},parse:function(e){try{return JSON.parse(gt.get(e))||null}catch(e){}return null},set:function(e,t){try{null==r||r.sessionStorage.setItem(e,JSON.stringify(t))}catch(e){gt.error(e)}},remove:function(e){try{null==r||r.sessionStorage.removeItem(e)}catch(e){gt.error(e)}}},vt=["localhost","127.0.0.1"],_t=e=>{var t=null==u?void 0:u.createElement("a");return M(t)?null:(t.href=e,t)},mt=function(e,t){return!!function(e){try{new RegExp(e)}catch(e){return!1}return!0}(t)&&new RegExp(t).test(e)},bt=function(e,t){for(var i,n=((e.split("#")[0]||"").split("?")[1]||"").split("&"),r=0;r<n.length;r++){var s=n[r].split("=");if(s[0]===t){i=s;break}}if(!P(i)||i.length<2)return"";var o=i[1];try{o=decodeURIComponent(o)}catch(e){H.error("Skipping decoding for malformed query param: "+o)}return o.replace(/\+/g," ")},yt=function(e,t,i){if(!e||!t||!t.length)return e;for(var n=e.split("#"),r=n[0]||"",s=n[1],o=r.split("?"),a=o[1],l=o[0],c=(a||"").split("&"),u=[],d=0;d<c.length;d++){var h=c[d].split("=");P(h)&&(t.includes(h[0])?u.push(h[0]+"="+i):u.push(c[d]))}var f=l;return null!=a&&(f+="?"+u.join("&")),null!=s&&(f+="#"+s),f},wt=function(e,t){var i=e.match(new RegExp(t+"=([^&]*)"));return i?i[1]:null},kt="Mobile",Et="iOS",St="Android",xt="Tablet",Ct=St+" "+xt,It="iPad",Pt="Apple",Tt=Pt+" Watch",Rt="Safari",Ft="BlackBerry",Mt="Samsung",Lt=Mt+"Browser",At=Mt+" Internet",$t="Chrome",Ot=$t+" OS",Nt=$t+" "+Et,Dt="Internet Explorer",qt=Dt+" "+kt,Bt="Opera",Ht=Bt+" Mini",Ut="Edge",jt="Microsoft "+Ut,zt="Firefox",Gt=zt+" "+Et,Vt="Nintendo",Wt="PlayStation",Yt="Xbox",Jt=St+" "+kt,Xt=kt+" "+Rt,Kt="Windows",Qt=Kt+" Phone",Zt="Nokia",ei="Ouya",ti="Generic",ii=ti+" "+kt.toLowerCase(),ni=ti+" "+xt.toLowerCase(),ri="Konqueror",si="(\\d+(\\.\\d+)?)",oi=new RegExp("Version/"+si),ai=new RegExp(Yt,"i"),li=new RegExp(Wt+" \\w+","i"),ci=new RegExp(Vt+" \\w+","i"),ui=new RegExp(Ft+"|PlayBook|BB10","i"),di={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},hi=function(e,t){return t=t||"",w(e," OPR/")&&w(e,"Mini")?Ht:w(e," OPR/")?Bt:ui.test(e)?Ft:w(e,"IE"+kt)||w(e,"WPDesktop")?qt:w(e,Lt)?At:w(e,Ut)||w(e,"Edg/")?jt:w(e,"FBIOS")?"Facebook "+kt:w(e,"UCWEB")||w(e,"UCBrowser")?"UC Browser":w(e,"CriOS")?Nt:w(e,"CrMo")||w(e,$t)?$t:w(e,St)&&w(e,Rt)?Jt:w(e,"FxiOS")?Gt:w(e.toLowerCase(),ri.toLowerCase())?ri:((e,t)=>t&&w(t,Pt)||function(e){return w(e,Rt)&&!w(e,$t)&&!w(e,St)}(e))(e,t)?w(e,kt)?Xt:Rt:w(e,zt)?zt:w(e,"MSIE")||w(e,"Trident/")?Dt:w(e,"Gecko")?zt:""},fi={[qt]:[new RegExp("rv:"+si)],[jt]:[new RegExp(Ut+"?\\/"+si)],[$t]:[new RegExp("("+$t+"|CrMo)\\/"+si)],[Nt]:[new RegExp("CriOS\\/"+si)],"UC Browser":[new RegExp("(UCBrowser|UCWEB)\\/"+si)],[Rt]:[oi],[Xt]:[oi],[Bt]:[new RegExp("(Opera|OPR)\\/"+si)],[zt]:[new RegExp(zt+"\\/"+si)],[Gt]:[new RegExp("FxiOS\\/"+si)],[ri]:[new RegExp("Konqueror[:/]?"+si,"i")],[Ft]:[new RegExp(Ft+" "+si),oi],[Jt]:[new RegExp("android\\s"+si,"i")],[At]:[new RegExp(Lt+"\\/"+si)],[Dt]:[new RegExp("(rv:|MSIE )"+si)],Mozilla:[new RegExp("rv:"+si)]},pi=[[new RegExp(Yt+"; "+Yt+" (.*?)[);]","i"),e=>[Yt,e&&e[1]||""]],[new RegExp(Vt,"i"),[Vt,""]],[new RegExp(Wt,"i"),[Wt,""]],[ui,[Ft,""]],[new RegExp(Kt,"i"),(e,t)=>{if(/Phone/.test(t)||/WPDesktop/.test(t))return[Qt,""];if(new RegExp(kt).test(t)&&!/IEMobile\b/.test(t))return[Kt+" "+kt,""];var i=/Windows NT ([0-9.]+)/i.exec(t);if(i&&i[1]){var n=i[1],r=di[n]||"";return/arm/i.test(t)&&(r="RT"),[Kt,r]}return[Kt,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,e=>{if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[Et,t.join(".")]}return[Et,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,e=>{var t="";return e&&e.length>=3&&(t=M(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+St+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+St+")","i"),e=>{if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[St,t.join(".")]}return[St,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,e=>{var t=["Mac OS X",""];if(e&&e[1]){var i=[e[1],e[2],e[3]||"0"];t[1]=i.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[Ot,""]],[/Linux|debian/i,["Linux",""]]],gi=function(e){return ci.test(e)?Vt:li.test(e)?Wt:ai.test(e)?Yt:new RegExp(ei,"i").test(e)?ei:new RegExp("("+Qt+"|WPDesktop)","i").test(e)?Qt:/iPad/.test(e)?It:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?Tt:ui.test(e)?Ft:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp(Zt,"i").test(e)?Zt:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(kt).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?St:Ct:St:new RegExp("(pda|"+kt+")","i").test(e)?ii:new RegExp(xt,"i").test(e)&&!new RegExp(xt+" pc","i").test(e)?ni:""},vi="https?://(.*)",_i=["gclid","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","igshid","ttclid","rdt_cid","irclid","_kx"],mi=Z(["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gad_source","mc_cid"],_i),bi="<masked>",yi={campaignParams:function(){var{customTrackedParams:e,maskPersonalDataProperties:t,customPersonalDataProperties:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!u)return{};var n=t?Z([],_i,i||[]):[];return this._campaignParamsFromUrl(yt(u.URL,n,bi),e)},_campaignParamsFromUrl:function(e,t){var i=mi.concat(t||[]),n={};return K(i,(function(t){var i=bt(e,t);n[t]=i||null})),n},_searchEngine:function(e){return e?0===e.search(vi+"google.([^/?]*)")?"google":0===e.search(vi+"bing.com")?"bing":0===e.search(vi+"yahoo.com")?"yahoo":0===e.search(vi+"duckduckgo.com")?"duckduckgo":null:null},_searchInfoFromReferrer:function(e){var t=yi._searchEngine(e),i="yahoo"!=t?"q":"p",n={};if(!$(t)){n.$search_engine=t;var r=u?bt(u.referrer,i):"";r.length&&(n.ph_keyword=r)}return n},searchInfo:function(){var e=null==u?void 0:u.referrer;return e?this._searchInfoFromReferrer(e):{}},browser:hi,browserVersion:function(e,t){var i=hi(e,t),n=fi[i];if(M(n))return null;for(var r=0;r<n.length;r++){var s=n[r],o=e.match(s);if(o)return parseFloat(o[o.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},browserLanguagePrefix:function(){var e=this.browserLanguage();return"string"==typeof e?e.split("-")[0]:void 0},os:function(e){for(var t=0;t<pi.length;t++){var[i,n]=pi[t],r=i.exec(e),s=r&&(T(n)?n(r,e):n);if(s)return s}return["",""]},device:gi,deviceType:function(e){var t=gi(e);return t===It||t===Ct||"Kobo"===t||"Kindle Fire"===t||t===ni?xt:t===Vt||t===Yt||t===Wt||t===ei?"Console":t===Tt?"Wearable":t?kt:"Desktop"},referrer:function(){return(null==u?void 0:u.referrer)||"$direct"},referringDomain:function(){var e;return null!=u&&u.referrer&&(null===(e=_t(u.referrer))||void 0===e?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer().substring(0,1e3),u:null==d?void 0:d.href.substring(0,1e3)}},initialPersonPropsFromInfo:function(e){var t,{r:i,u:n}=e,r={$initial_referrer:i,$initial_referring_domain:null==i?void 0:"$direct"==i?"$direct":null===(t=_t(i))||void 0===t?void 0:t.host};if(n){r.$initial_current_url=n;var s=_t(n);r.$initial_host=null==s?void 0:s.host,r.$initial_pathname=null==s?void 0:s.pathname,K(this._campaignParamsFromUrl(n),(function(e,t){r["$initial_"+E(t)]=e}))}return i&&K(this._searchInfoFromReferrer(i),(function(e,t){r["$initial_"+E(t)]=e})),r},timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return}},timezoneOffset:function(){try{return(new Date).getTimezoneOffset()}catch(e){return}},properties:function(){var{maskPersonalDataProperties:e,customPersonalDataProperties:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!g)return{};var i=e?Z([],_i,t||[]):[],[n,s]=yi.os(g);return Q(ne({$os:n,$os_version:s,$browser:yi.browser(g,navigator.vendor),$device:yi.device(g),$device_type:yi.deviceType(g),$timezone:yi.timezone(),$timezone_offset:yi.timezoneOffset()}),{$current_url:yt(null==d?void 0:d.href,i,bi),$host:null==d?void 0:d.host,$pathname:null==d?void 0:d.pathname,$raw_user_agent:g.length>1e3?g.substring(0,997)+"...":g,$browser_version:yi.browserVersion(g,navigator.vendor),$browser_language:yi.browserLanguage(),$browser_language_prefix:yi.browserLanguagePrefix(),$screen_height:null==r?void 0:r.screen.height,$screen_width:null==r?void 0:r.screen.width,$viewport_height:null==r?void 0:r.innerHeight,$viewport_width:null==r?void 0:r.innerWidth,$lib:"web",$lib_version:_.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:Date.now()/1e3})},people_properties:function(){if(!g)return{};var[e,t]=yi.os(g);return Q(ne({$os:e,$os_version:t,$browser:yi.browser(g,navigator.vendor)}),{$browser_version:yi.browserVersion(g,navigator.vendor)})}},wi=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"];class ki{constructor(e){this.config=e,this.props={},this.campaign_params_saved=!1,this.name=(e=>{var t="";return e.token&&(t=e.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),e.persistence_name?"ph_"+e.persistence_name:"ph_"+t+"_posthog"})(e),this.storage=this.buildStorage(e),this.load(),e.debug&&H.info("Persistence loaded",e.persistence,V({},this.props)),this.update_config(e,e),this.save()}buildStorage(e){-1===wi.indexOf(e.persistence.toLowerCase())&&(H.critical("Unknown persistence type "+e.persistence+"; falling back to localStorage+cookie"),e.persistence="localStorage+cookie");var t=e.persistence.toLowerCase();return"localstorage"===t&&ct.is_supported()?ct:"localstorage+cookie"===t&&dt.is_supported()?dt:"sessionstorage"===t&&gt.is_supported()?gt:"memory"===t?ft:"cookie"===t?at:dt.is_supported()?dt:at}properties(){var e={};return K(this.props,(function(t,i){if(i===Pe&&R(t))for(var n=Object.keys(t),r=0;r<n.length;r++)e["$feature/".concat(n[r])]=t[n[r]];else o=i,a=!1,($(s=ze)?a:l&&s.indexOf===l?-1!=s.indexOf(o):(K(s,(function(e){if(a||(a=e===o))return J})),a))||(e[i]=t);var s,o,a})),e}load(){if(!this.disabled){var e=this.storage.parse(this.name);e&&(this.props=Q({},e))}}save(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}remove(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}clear(){this.remove(),this.props={}}register_once(e,t,i){if(R(e)){M(t)&&(t="None"),this.expire_days=M(i)?this.default_expiry:i;var n=!1;if(K(e,((e,i)=>{this.props.hasOwnProperty(i)&&this.props[i]!==t||(this.props[i]=e,n=!0)})),n)return this.save(),!0}return!1}register(e,t){if(R(e)){this.expire_days=M(t)?this.default_expiry:t;var i=!1;if(K(e,((t,n)=>{e.hasOwnProperty(n)&&this.props[n]!==t&&(this.props[n]=t,i=!0)})),i)return this.save(),!0}return!1}unregister(e){e in this.props&&(delete this.props[e],this.save())}update_campaign_params(){if(!this.campaign_params_saved){var e=yi.campaignParams({customTrackedParams:this.config.custom_campaign_params,maskPersonalDataProperties:this.config.mask_personal_data_properties,customPersonalDataProperties:this.config.custom_personal_data_properties});F(ne(e))||this.register(e),this.campaign_params_saved=!0}}update_search_keyword(){this.register(yi.searchInfo())}update_referrer_info(){this.register_once(yi.referrerInfo(),void 0)}set_initial_person_info(){this.props[De]||this.props[qe]||this.register_once({[Be]:yi.initialPersonInfo()},void 0)}get_referrer_info(){return ne({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}get_initial_props(){var e={};K([qe,De],(t=>{var i=this.props[t];i&&K(i,(function(t,i){e["$initial_"+E(i)]=t}))}));var t=this.props[Be];if(t){var i=yi.initialPersonPropsFromInfo(t);Q(e,i)}return e}safe_merge(e){return K(this.props,(function(t,i){i in e||(e[i]=t)})),e}update_config(e,t){if(this.default_expiry=this.expire_days=e.cookie_expiration,this.set_disabled(e.disable_persistence),this.set_cross_subdomain(e.cross_subdomain_cookie),this.set_secure(e.secure_cookie),e.persistence!==t.persistence){var i=this.buildStorage(e),n=this.props;this.clear(),this.storage=i,this.props=n,this.save()}}set_disabled(e){this.disabled=e,this.disabled?this.remove():this.save()}set_cross_subdomain(e){e!==this.cross_subdomain&&(this.cross_subdomain=e,this.remove(),this.save())}get_cross_subdomain(){return!!this.cross_subdomain}set_secure(e){e!==this.secure&&(this.secure=e,this.remove(),this.save())}set_event_timer(e,t){var i=this.props[ue]||{};i[e]=t,this.props[ue]=i,this.save()}remove_event_timer(e){var t=(this.props[ue]||{})[e];return M(t)||(delete this.props[ue][e],this.save()),t}get_property(e){return this.props[e]}set_property(e,t){this.props[e]=t,this.save()}}function Ei(e){var t,i;return(null===(t=JSON.stringify(e,(i=[],function(e,t){if(R(t)){for(;i.length>0&&i[i.length-1]!==this;)i.pop();return i.includes(t)?"[Circular]":(i.push(t),t)}return t})))||void 0===t?void 0:t.length)||0}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6606028.8;if(e.size>=t&&e.data.length>1){var i=Math.floor(e.data.length/2),n=e.data.slice(0,i),r=e.data.slice(i);return[Si({size:Ei(n),data:n,sessionId:e.sessionId,windowId:e.windowId}),Si({size:Ei(r),data:r,sessionId:e.sessionId,windowId:e.windowId})].flatMap((e=>e))}return[e]}var xi=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(xi||{}),Ci=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ci||{});function Ii(e){var t;return e instanceof Element&&(e.id===Ue||!(null===(t=e.closest)||void 0===t||!t.call(e,".toolbar-global-fade-container")))}function Pi(e){return!!e&&1===e.nodeType}function Ti(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function Ri(e){return!!e&&3===e.nodeType}function Fi(e){return!!e&&11===e.nodeType}function Mi(e){return e?k(e).split(/\s+/):[]}function Li(e){var t=null==r?void 0:r.location.href;return!!(t&&e&&e.some((e=>t.match(e))))}function Ai(e){var t="";switch(typeof e.className){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return Mi(t)}function $i(e){return O(e)?null:k(e).split(/(\s+)/).filter((e=>Yi(e))).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function Oi(e){var t="";return Bi(e)&&!Hi(e)&&e.childNodes&&e.childNodes.length&&K(e.childNodes,(function(e){var i;Ri(e)&&e.textContent&&(t+=null!==(i=$i(e.textContent))&&void 0!==i?i:"")})),k(t)}function Ni(e){return M(e.target)?e.srcElement||null:null!==(t=e.target)&&void 0!==t&&t.shadowRoot?e.composedPath()[0]||null:e.target||null;var t}var Di=["a","button","form","input","select","textarea","label"];function qi(e){var t=e.parentNode;return!(!t||!Pi(t))&&t}function Bi(e){for(var t=e;t.parentNode&&!Ti(t,"body");t=t.parentNode){var i=Ai(t);if(w(i,"ph-sensitive")||w(i,"ph-no-capture"))return!1}if(w(Ai(e),"ph-include"))return!0;var n=e.type||"";if(L(n))switch(n.toLowerCase()){case"hidden":case"password":return!1}var r=e.name||e.id||"";return!L(r)||!/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(r.replace(/[^a-zA-Z0-9]/g,""))}function Hi(e){return!!(Ti(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Ti(e,"select")||Ti(e,"textarea")||"true"===e.getAttribute("contenteditable"))}var Ui="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",ji=new RegExp("^(?:".concat(Ui,")$")),zi=new RegExp(Ui),Gi="\\d{3}-?\\d{2}-?\\d{4}",Vi=new RegExp("^(".concat(Gi,")$")),Wi=new RegExp("(".concat(Gi,")"));function Yi(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(O(e))return!1;if(L(e)){if(e=k(e),(t?ji:zi).test((e||"").replace(/[- ]/g,"")))return!1;if((t?Vi:Wi).test(e))return!1}return!0}function Ji(e){var t=Oi(e);return Yi(t="".concat(t," ").concat(Xi(e)).trim())?t:""}function Xi(e){var t="";return e&&e.childNodes&&e.childNodes.length&&K(e.childNodes,(function(e){var i;if(e&&"span"===(null===(i=e.tagName)||void 0===i?void 0:i.toLowerCase()))try{var n=Oi(e);t="".concat(t," ").concat(n).trim(),e.childNodes&&e.childNodes.length&&(t="".concat(t," ").concat(Xi(e)).trim())}catch(e){H.error("[AutoCapture]",e)}})),t}function Ki(e){return function(e){var t=e.map((e=>{var t,i,n="";if(e.tag_name&&(n+=e.tag_name),e.attr_class)for(var r of(e.attr_class.sort(),e.attr_class))n+=".".concat(r.replace(/"/g,""));var s=V(V(V(V({},e.text?{text:e.text}:{}),{},{"nth-child":null!==(t=e.nth_child)&&void 0!==t?t:0,"nth-of-type":null!==(i=e.nth_of_type)&&void 0!==i?i:0},e.href?{href:e.href}:{}),e.attr_id?{attr_id:e.attr_id}:{}),e.attributes),o={};return ee(s).sort(((e,t)=>{var[i]=e,[n]=t;return i.localeCompare(n)})).forEach((e=>{var[t,i]=e;return o[Qi(t.toString())]=Qi(i.toString())})),(n+=":")+ee(s).map((e=>{var[t,i]=e;return"".concat(t,'="').concat(i,'"')})).join("")}));return t.join(";")}(function(e){return e.map((e=>{var t,i,n={text:null===(t=e.$el_text)||void 0===t?void 0:t.slice(0,400),tag_name:e.tag_name,href:null===(i=e.attr__href)||void 0===i?void 0:i.slice(0,2048),attr_class:Zi(e),attr_id:e.attr__id,nth_child:e.nth_child,nth_of_type:e.nth_of_type,attributes:{}};return ee(e).filter((e=>{var[t]=e;return 0===t.indexOf("attr__")})).forEach((e=>{var[t,i]=e;return n.attributes[t]=i})),n}))}(e))}function Qi(e){return e.replace(/"|\\"/g,'\\"')}function Zi(e){var t=e.attr__class;return t?P(t)?t:Mi(t):void 0}var en="[SessionRecording]",tn="redacted",nn={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:e=>e,recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io",".clarity.ms","analytics.google.com"]},rn=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],sn=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],on=["/s/","/e/","/i/"];function an(e,t,i,n){if(O(e))return e;var r=(null==t?void 0:t["content-length"])||function(e){return new Blob([e]).size}(e);return L(r)&&(r=parseInt(r)),r>i?en+" ".concat(n," body too large to record (").concat(r," bytes)"):e}function ln(e,t){if(O(e))return e;var i=e;return Yi(i,!1)||(i=en+" "+t+" body "+tn),K(sn,(e=>{var n,r;null!==(n=i)&&void 0!==n&&n.length&&-1!==(null===(r=i)||void 0===r?void 0:r.indexOf(e))&&(i=en+" "+t+" body "+tn+" as might contain: "+e)})),i}function cn(e,t,i,n,r){return t>i&&(H.warn("min cannot be greater than max."),t=i),N(e)?e>i?(n&&H.warn(n+" cannot be  greater than max: "+i+". Using max value instead."),i):e<t?(n&&H.warn(n+" cannot be less than min: "+t+". Using min value instead."),t):e:(n&&H.warn(n+" must be a number. using max or fallback. max: "+i+", fallback: "+r),cn(r||i,t,i,n))}class un{constructor(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};W(this,"bucketSize",100),W(this,"refillRate",10),W(this,"mutationBuckets",{}),W(this,"loggedTracker",{}),W(this,"refillBuckets",(()=>{Object.keys(this.mutationBuckets).forEach((e=>{this.mutationBuckets[e]=this.mutationBuckets[e]+this.refillRate,this.mutationBuckets[e]>=this.bucketSize&&delete this.mutationBuckets[e]}))})),W(this,"getNodeOrRelevantParent",(e=>{var t=this.rrweb.mirror.getNode(e);if("svg"!==(null==t?void 0:t.nodeName)&&t instanceof Element){var i=t.closest("svg");if(i)return[this.rrweb.mirror.getId(i),i]}return[e,t]})),W(this,"numberOfChanges",(e=>{var t,i,n,r,s,o,a,l;return(null!==(t=null===(i=e.removes)||void 0===i?void 0:i.length)&&void 0!==t?t:0)+(null!==(n=null===(r=e.attributes)||void 0===r?void 0:r.length)&&void 0!==n?n:0)+(null!==(s=null===(o=e.texts)||void 0===o?void 0:o.length)&&void 0!==s?s:0)+(null!==(a=null===(l=e.adds)||void 0===l?void 0:l.length)&&void 0!==a?a:0)})),W(this,"throttleMutations",(e=>{if(3!==e.type||0!==e.data.source)return e;var t=e.data,i=this.numberOfChanges(t);t.attributes&&(t.attributes=t.attributes.filter((e=>{var t,i,n,[r,s]=this.getNodeOrRelevantParent(e.id);return 0!==this.mutationBuckets[r]&&(this.mutationBuckets[r]=null!==(t=this.mutationBuckets[r])&&void 0!==t?t:this.bucketSize,this.mutationBuckets[r]=Math.max(this.mutationBuckets[r]-1,0),0===this.mutationBuckets[r]&&(this.loggedTracker[r]||(this.loggedTracker[r]=!0,null===(i=(n=this.options).onBlockedNode)||void 0===i||i.call(n,r,s))),e)})));var n=this.numberOfChanges(t);return 0!==n||i===n?e:void 0})),this.rrweb=e,this.options=n,this.refillRate=cn(null!==(t=this.options.refillRate)&&void 0!==t?t:this.refillRate,0,100,"mutation throttling refill rate"),this.bucketSize=cn(null!==(i=this.options.bucketSize)&&void 0!==i?i:this.bucketSize,0,100,"mutation throttling bucket size"),setInterval((()=>{this.refillBuckets()}),1e3)}}var dn=Uint8Array,hn=Uint16Array,fn=Uint32Array,pn=new dn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gn=new dn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vn=new dn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_n=function(e,t){for(var i=new hn(31),n=0;n<31;++n)i[n]=t+=1<<e[n-1];var r=new fn(i[30]);for(n=1;n<30;++n)for(var s=i[n];s<i[n+1];++s)r[s]=s-i[n]<<5|n;return[i,r]},mn=_n(pn,2),bn=mn[0],yn=mn[1];bn[28]=258,yn[258]=28;for(var wn=_n(gn,0)[1],kn=new hn(32768),En=0;En<32768;++En){var Sn=(43690&En)>>>1|(21845&En)<<1;Sn=(61680&(Sn=(52428&Sn)>>>2|(13107&Sn)<<2))>>>4|(3855&Sn)<<4,kn[En]=((65280&Sn)>>>8|(255&Sn)<<8)>>>1}var xn=function(e,t,i){for(var n=e.length,r=0,s=new hn(t);r<n;++r)++s[e[r]-1];var o,a=new hn(t);for(r=0;r<t;++r)a[r]=a[r-1]+s[r-1]<<1;if(i){o=new hn(1<<t);var l=15-t;for(r=0;r<n;++r)if(e[r])for(var c=r<<4|e[r],u=t-e[r],d=a[e[r]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)o[kn[d]>>>l]=c}else for(o=new hn(n),r=0;r<n;++r)o[r]=kn[a[e[r]-1]++]>>>15-e[r];return o},Cn=new dn(288);for(En=0;En<144;++En)Cn[En]=8;for(En=144;En<256;++En)Cn[En]=9;for(En=256;En<280;++En)Cn[En]=7;for(En=280;En<288;++En)Cn[En]=8;var In=new dn(32);for(En=0;En<32;++En)In[En]=5;var Pn=xn(Cn,9,0),Tn=xn(In,5,0),Rn=function(e){return(e/8|0)+(7&e&&1)},Fn=function(e,t,i){(null==i||i>e.length)&&(i=e.length);var n=new(e instanceof hn?hn:e instanceof fn?fn:dn)(i-t);return n.set(e.subarray(t,i)),n},Mn=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>>8},Ln=function(e,t,i){i<<=7&t;var n=t/8|0;e[n]|=i,e[n+1]|=i>>>8,e[n+2]|=i>>>16},An=function(e,t){for(var i=[],n=0;n<e.length;++n)e[n]&&i.push({s:n,f:e[n]});var r=i.length,s=i.slice();if(!r)return[new dn(0),0];if(1==r){var o=new dn(i[0].s+1);return o[i[0].s]=1,[o,1]}i.sort((function(e,t){return e.f-t.f})),i.push({s:-1,f:25001});var a=i[0],l=i[1],c=0,u=1,d=2;for(i[0]={s:-1,f:a.f+l.f,l:a,r:l};u!=r-1;)a=i[i[c].f<i[d].f?c++:d++],l=i[c!=u&&i[c].f<i[d].f?c++:d++],i[u++]={s:-1,f:a.f+l.f,l:a,r:l};var h=s[0].s;for(n=1;n<r;++n)s[n].s>h&&(h=s[n].s);var f=new hn(h+1),p=$n(i[u-1],f,0);if(p>t){n=0;var g=0,v=p-t,_=1<<v;for(s.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));n<r;++n){var m=s[n].s;if(!(f[m]>t))break;g+=_-(1<<p-f[m]),f[m]=t}for(g>>>=v;g>0;){var b=s[n].s;f[b]<t?g-=1<<t-f[b]++-1:++n}for(;n>=0&&g;--n){var y=s[n].s;f[y]==t&&(--f[y],++g)}p=t}return[new dn(f),p]},$n=function(e,t,i){return-1==e.s?Math.max($n(e.l,t,i+1),$n(e.r,t,i+1)):t[e.s]=i},On=function(e){for(var t=e.length;t&&!e[--t];);for(var i=new hn(++t),n=0,r=e[0],s=1,o=function(e){i[n++]=e},a=1;a<=t;++a)if(e[a]==r&&a!=t)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(r);s=1,r=e[a]}return[i.subarray(0,n),t]},Nn=function(e,t){for(var i=0,n=0;n<t.length;++n)i+=e[n]*t[n];return i},Dn=function(e,t,i){var n=i.length,r=Rn(t+2);e[r]=255&n,e[r+1]=n>>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var s=0;s<n;++s)e[r+s+4]=i[s];return 8*(r+4+n)},qn=function(e,t,i,n,r,s,o,a,l,c,u){Mn(t,u++,i),++r[256];for(var d=An(r,15),h=d[0],f=d[1],p=An(s,15),g=p[0],v=p[1],_=On(h),m=_[0],b=_[1],y=On(g),w=y[0],k=y[1],E=new hn(19),S=0;S<m.length;++S)E[31&m[S]]++;for(S=0;S<w.length;++S)E[31&w[S]]++;for(var x=An(E,7),C=x[0],I=x[1],P=19;P>4&&!C[vn[P-1]];--P);var T,R,F,M,L=c+5<<3,A=Nn(r,Cn)+Nn(s,In)+o,$=Nn(r,h)+Nn(s,g)+o+14+3*P+Nn(E,C)+(2*E[16]+3*E[17]+7*E[18]);if(L<=A&&L<=$)return Dn(t,u,e.subarray(l,l+c));if(Mn(t,u,1+($<A)),u+=2,$<A){T=xn(h,f,0),R=h,F=xn(g,v,0),M=g;var O=xn(C,I,0);for(Mn(t,u,b-257),Mn(t,u+5,k-1),Mn(t,u+10,P-4),u+=14,S=0;S<P;++S)Mn(t,u+3*S,C[vn[S]]);u+=3*P;for(var N=[m,w],D=0;D<2;++D){var q=N[D];for(S=0;S<q.length;++S){var B=31&q[S];Mn(t,u,O[B]),u+=C[B],B>15&&(Mn(t,u,q[S]>>>5&127),u+=q[S]>>>12)}}}else T=Pn,R=Cn,F=Tn,M=In;for(S=0;S<a;++S)if(n[S]>255){B=n[S]>>>18&31,Ln(t,u,T[B+257]),u+=R[B+257],B>7&&(Mn(t,u,n[S]>>>23&31),u+=pn[B]);var H=31&n[S];Ln(t,u,F[H]),u+=M[H],H>3&&(Ln(t,u,n[S]>>>5&8191),u+=gn[H])}else Ln(t,u,T[n[S]]),u+=R[n[S]];return Ln(t,u,T[256]),u+R[256]},Bn=new fn([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Hn=function(){for(var e=new fn(256),t=0;t<256;++t){for(var i=t,n=9;--n;)i=(1&i&&3988292384)^i>>>1;e[t]=i}return e}(),Un=function(e,t,i){for(;i;++t)e[t]=i,i>>>=8};function jn(e,t){void 0===t&&(t={});var i=function(){var e=4294967295;return{p:function(t){for(var i=e,n=0;n<t.length;++n)i=Hn[255&i^t[n]]^i>>>8;e=i},d:function(){return 4294967295^e}}}(),n=e.length;i.p(e);var r=function(e,t,i,n,r){return function(e,t,i,n,r,s){var o=e.length,a=new dn(n+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(n,a.length-r),c=0;if(!t||o<8)for(var u=0;u<=o;u+=65535){var d=u+65535;d<o?c=Dn(l,c,e.subarray(u,d)):(l[u]=s,c=Dn(l,c,e.subarray(u,o)))}else{for(var h=Bn[t-1],f=h>>>13,p=8191&h,g=(1<<i)-1,v=new hn(32768),_=new hn(g+1),m=Math.ceil(i/3),b=2*m,y=function(t){return(e[t]^e[t+1]<<m^e[t+2]<<b)&g},w=new fn(25e3),k=new hn(288),E=new hn(32),S=0,x=0,C=(u=0,0),I=0,P=0;u<o;++u){var T=y(u),R=32767&u,F=_[T];if(v[R]=F,_[T]=R,I<=u){var M=o-u;if((S>7e3||C>24576)&&M>423){c=qn(e,l,0,w,k,E,x,C,P,u-P,c),C=S=x=0,P=u;for(var L=0;L<286;++L)k[L]=0;for(L=0;L<30;++L)E[L]=0}var A=2,$=0,O=p,N=R-F&32767;if(M>2&&T==y(u-N))for(var D=Math.min(f,M)-1,q=Math.min(32767,u),B=Math.min(258,M);N<=q&&--O&&R!=F;){if(e[u+A]==e[u+A-N]){for(var H=0;H<B&&e[u+H]==e[u+H-N];++H);if(H>A){if(A=H,$=N,H>D)break;var U=Math.min(N,H-2),j=0;for(L=0;L<U;++L){var z=u-N+L+32768&32767,G=z-v[z]+32768&32767;G>j&&(j=G,F=z)}}}N+=(R=F)-(F=v[R])+32768&32767}if($){w[C++]=268435456|yn[A]<<18|wn[$];var V=31&yn[A],W=31&wn[$];x+=pn[V]+gn[W],++k[257+V],++E[W],I=u+A,++S}else w[C++]=e[u],++k[e[u]]}}c=qn(e,l,s,w,k,E,x,C,P,u-P,c)}return Fn(a,0,n+Rn(c)+r)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,i,n,!r)}(e,t,function(e){return 10+(e.filename&&e.filename.length+1||0)}(t),8),s=r.length;return function(e,t){var i=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:9==t.level?2:0,e[9]=3,0!=t.mtime&&Un(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),i){e[3]=8;for(var n=0;n<=i.length;++n)e[n+10]=i.charCodeAt(n)}}(r,t),Un(r,s-8,i.d()),Un(r,s-4,n),r}function zn(e,t){var i=e.length;if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var n=new dn(e.length+(e.length>>>1)),r=0,s=function(e){n[r++]=e},o=0;o<i;++o){if(r+5>n.length){var a=new dn(r+8+(i-o<<1));a.set(n),n=a}var l=e.charCodeAt(o);l<128||t?s(l):l<2048?(s(192|l>>>6),s(128|63&l)):l>55295&&l<57344?(s(240|(l=65536+(1047552&l)|1023&e.charCodeAt(++o))>>>18),s(128|l>>>12&63),s(128|l>>>6&63),s(128|63&l)):(s(224|l>>>12),s(128|l>>>6&63),s(128|63&l))}return Fn(n,0,r)}var Gn="[SessionRecording]",Vn=U(Gn),Wn=[Ci.MouseMove,Ci.MouseInteraction,Ci.Scroll,Ci.ViewportResize,Ci.Input,Ci.TouchMove,Ci.MediaInteraction,Ci.Drag],Yn=e=>({rrwebMethod:e,enqueuedAt:Date.now(),attempt:1});function Jn(e){return function(e){for(var t="",i=0;i<e.length;){var n=e[i++];t+=String.fromCharCode(n)}return t}(jn(zn(JSON.stringify(e))))}function Xn(e){return e.type===xi.Custom&&"sessionIdle"===e.data.tag}function Kn(e,t){return t.some((t=>"regex"===t.matching&&new RegExp(t.url).test(e)))}class Qn{get sessionIdleThresholdMilliseconds(){return this.instance.config.session_recording.session_idle_threshold_ms||3e5}get rrwebRecord(){var e,t;return null==v||null===(e=v.__PosthogExtensions__)||void 0===e||null===(t=e.rrweb)||void 0===t?void 0:t.record}get started(){return this._captureStarted}get sessionManager(){if(!this.instance.sessionManager)throw new Error(Gn+" must be started with a valid sessionManager.");return this.instance.sessionManager}get fullSnapshotIntervalMillis(){var e,t;return"trigger_pending"===this.triggerStatus?6e4:null!==(e=null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.full_snapshot_interval_millis)&&void 0!==e?e:3e5}get isSampled(){var e=this.instance.get_property(xe);return D(e)?e:null}get sessionDuration(){var e,t,i=null===(e=this.buffer)||void 0===e?void 0:e.data[(null===(t=this.buffer)||void 0===t?void 0:t.data.length)-1],{sessionStartTimestamp:n}=this.sessionManager.checkAndGetSessionAndWindowId(!0);return i?i.timestamp-n:null}get isRecordingEnabled(){var e=!!this.instance.get_property(_e),t=!this.instance.config.disable_session_recording;return r&&e&&t}get isConsoleLogCaptureEnabled(){var e=!!this.instance.get_property(me),t=this.instance.config.enable_recording_console_log;return null!=t?t:e}get canvasRecording(){var e,t,i,n,r,s,o=this.instance.config.session_recording.captureCanvas,a=this.instance.get_property(ye),l=null!==(e=null!==(t=null==o?void 0:o.recordCanvas)&&void 0!==t?t:null==a?void 0:a.enabled)&&void 0!==e&&e,c=null!==(i=null!==(n=null==o?void 0:o.canvasFps)&&void 0!==n?n:null==a?void 0:a.fps)&&void 0!==i?i:0,u=null!==(r=null!==(s=null==o?void 0:o.canvasQuality)&&void 0!==s?s:null==a?void 0:a.quality)&&void 0!==r?r:0;return{enabled:l,fps:cn(c,0,12,"canvas recording fps"),quality:cn(u,0,1,"canvas recording quality")}}get networkPayloadCapture(){var e,t,i=this.instance.get_property(be),n={recordHeaders:null===(e=this.instance.config.session_recording)||void 0===e?void 0:e.recordHeaders,recordBody:null===(t=this.instance.config.session_recording)||void 0===t?void 0:t.recordBody},r=(null==n?void 0:n.recordHeaders)||(null==i?void 0:i.recordHeaders),s=(null==n?void 0:n.recordBody)||(null==i?void 0:i.recordBody),o=R(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,a=!!(D(o)?o:null==i?void 0:i.capturePerformance);return r||s||a?{recordHeaders:r,recordBody:s,recordPerformance:a}:void 0}get sampleRate(){var e=this.instance.get_property(we);return N(e)?e:null}get minimumDuration(){var e=this.instance.get_property(ke);return N(e)?e:null}get status(){return this.receivedDecide?this.isRecordingEnabled?this._urlBlocked?"paused":O(this._linkedFlag)||this._linkedFlagSeen?"trigger_pending"===this.triggerStatus?"buffering":D(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}get urlTriggerStatus(){var e;return 0===this._urlTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(Ce))===this.sessionId?"trigger_activated":"trigger_pending"}get eventTriggerStatus(){var e;return 0===this._eventTriggers.length?"trigger_disabled":(null===(e=this.instance)||void 0===e?void 0:e.get_property(Ie))===this.sessionId?"trigger_activated":"trigger_pending"}get triggerStatus(){var e="trigger_activated"===this.eventTriggerStatus||"trigger_activated"===this.urlTriggerStatus,t="trigger_pending"===this.eventTriggerStatus||"trigger_pending"===this.urlTriggerStatus;return e?"trigger_activated":t?"trigger_pending":"trigger_disabled"}constructor(e){if(W(this,"queuedRRWebEvents",[]),W(this,"isIdle",!1),W(this,"_linkedFlagSeen",!1),W(this,"_lastActivityTimestamp",Date.now()),W(this,"_linkedFlag",null),W(this,"_removePageViewCaptureHook",void 0),W(this,"_onSessionIdListener",void 0),W(this,"_persistDecideOnSessionListener",void 0),W(this,"_samplingSessionListener",void 0),W(this,"_urlTriggers",[]),W(this,"_urlBlocklist",[]),W(this,"_urlBlocked",!1),W(this,"_eventTriggers",[]),W(this,"_removeEventTriggerCaptureHook",void 0),W(this,"_forceAllowLocalhostNetworkCapture",!1),W(this,"_onBeforeUnload",(()=>{this._flushBuffer()})),W(this,"_onOffline",(()=>{this._tryAddCustomEvent("browser offline",{})})),W(this,"_onOnline",(()=>{this._tryAddCustomEvent("browser online",{})})),W(this,"_onVisibilityChange",(()=>{if(null!=u&&u.visibilityState){var e="window "+u.visibilityState;this._tryAddCustomEvent(e,{})}})),this.instance=e,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw Vn.error("started without valid sessionManager"),new Error(Gn+" started without valid sessionManager. This is a bug.");if(this.instance.config.__preview_experimental_cookieless_mode)throw new Error(Gn+" cannot be used with __preview_experimental_cookieless_mode.");var{sessionId:t,windowId:i}=this.sessionManager.checkAndGetSessionAndWindowId();this.sessionId=t,this.windowId=i,this.buffer=this.clearBuffer(),this.sessionIdleThresholdMilliseconds>=this.sessionManager.sessionTimeoutMs&&Vn.warn("session_idle_threshold_ms (".concat(this.sessionIdleThresholdMilliseconds,") is greater than the session timeout (").concat(this.sessionManager.sessionTimeoutMs,"). Session will never be detected as idle"))}startIfEnabledOrStop(e){this.isRecordingEnabled?(this._startCapture(e),ae(r,"beforeunload",this._onBeforeUnload),ae(r,"offline",this._onOffline),ae(r,"online",this._onOnline),ae(r,"visibilitychange",this._onVisibilityChange),this._setupSampling(),this._addEventTriggerListener(),O(this._removePageViewCaptureHook)&&(this._removePageViewCaptureHook=this.instance.on("eventCaptured",(e=>{try{if("$pageview"===e.event){var t=null!=e&&e.properties.$current_url?this._maskUrl(null==e?void 0:e.properties.$current_url):"";if(!t)return;this._tryAddCustomEvent("$pageview",{href:t})}}catch(e){Vn.error("Could not add $pageview to rrweb session",e)}}))),this._onSessionIdListener||(this._onSessionIdListener=this.sessionManager.onSessionId(((e,t,i)=>{var n,r,s,o;i&&(this._tryAddCustomEvent("$session_id_change",{sessionId:e,windowId:t,changeReason:i}),null===(n=this.instance)||void 0===n||null===(r=n.persistence)||void 0===r||r.unregister(Ie),null===(s=this.instance)||void 0===s||null===(o=s.persistence)||void 0===o||o.unregister(Ce))})))):this.stopRecording()}stopRecording(){var e,t,i,n;this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,null==r||r.removeEventListener("beforeunload",this._onBeforeUnload),null==r||r.removeEventListener("offline",this._onOffline),null==r||r.removeEventListener("online",this._onOnline),null==r||r.removeEventListener("visibilitychange",this._onVisibilityChange),this.clearBuffer(),clearInterval(this._fullSnapshotTimer),null===(e=this._removePageViewCaptureHook)||void 0===e||e.call(this),this._removePageViewCaptureHook=void 0,null===(t=this._removeEventTriggerCaptureHook)||void 0===t||t.call(this),this._removeEventTriggerCaptureHook=void 0,null===(i=this._onSessionIdListener)||void 0===i||i.call(this),this._onSessionIdListener=void 0,null===(n=this._samplingSessionListener)||void 0===n||n.call(this),this._samplingSessionListener=void 0,Vn.info("stopped"))}makeSamplingDecision(e){var t,i=this.sessionId!==e,n=this.sampleRate;if(N(n)){var r=this.isSampled,s=i||!D(r),o=s?function(e,t){return function(e){for(var t=0,i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return Math.abs(t)}(e)%100<cn(100*t,0,100)}(e,n):r;s&&(o?this._reportStarted("sampled"):Vn.warn("Sample rate (".concat(n,") has determined that this sessionId (").concat(e,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:n,isSampled:o})),null===(t=this.instance.persistence)||void 0===t||t.register({[xe]:o})}else{var a;null===(a=this.instance.persistence)||void 0===a||a.register({[xe]:null})}}onRemoteConfig(e){var t,i,n,r,s,o;if(this._tryAddCustomEvent("$remote_config_received",e),this._persistRemoteConfig(e),this._linkedFlag=(null===(t=e.sessionRecording)||void 0===t?void 0:t.linkedFlag)||null,null!==(i=e.sessionRecording)&&void 0!==i&&i.endpoint&&(this._endpoint=null===(o=e.sessionRecording)||void 0===o?void 0:o.endpoint),this._setupSampling(),!O(this._linkedFlag)&&!this._linkedFlagSeen){var a=L(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,l=L(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags(((e,t)=>{var i=R(t)&&a in t,n=l?t[a]===l:i;n&&this._reportStarted("linked_flag_matched",{linkedFlag:a,linkedVariant:l}),this._linkedFlagSeen=n}))}null!==(n=e.sessionRecording)&&void 0!==n&&n.urlTriggers&&(this._urlTriggers=e.sessionRecording.urlTriggers),null!==(r=e.sessionRecording)&&void 0!==r&&r.urlBlocklist&&(this._urlBlocklist=e.sessionRecording.urlBlocklist),null!==(s=e.sessionRecording)&&void 0!==s&&s.eventTriggers&&(this._eventTriggers=e.sessionRecording.eventTriggers),this.receivedDecide=!0,this.startIfEnabledOrStop()}_setupSampling(){N(this.sampleRate)&&O(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((e=>{this.makeSamplingDecision(e)})))}_persistRemoteConfig(e){if(this.instance.persistence){var t,i=this.instance.persistence,n=()=>{var t,n,r,s,o,a,l,c,u=null===(t=e.sessionRecording)||void 0===t?void 0:t.sampleRate,d=O(u)?null:parseFloat(u),h=null===(n=e.sessionRecording)||void 0===n?void 0:n.minimumDurationMilliseconds;i.register({[_e]:!!e.sessionRecording,[me]:null===(r=e.sessionRecording)||void 0===r?void 0:r.consoleLogRecordingEnabled,[be]:V({capturePerformance:e.capturePerformance},null===(s=e.sessionRecording)||void 0===s?void 0:s.networkPayloadCapture),[ye]:{enabled:null===(o=e.sessionRecording)||void 0===o?void 0:o.recordCanvas,fps:null===(a=e.sessionRecording)||void 0===a?void 0:a.canvasFps,quality:null===(l=e.sessionRecording)||void 0===l?void 0:l.canvasQuality},[we]:d,[ke]:M(h)?null:h,[Ee]:null===(c=e.sessionRecording)||void 0===c?void 0:c.scriptConfig})};n(),null===(t=this._persistDecideOnSessionListener)||void 0===t||t.call(this),this._persistDecideOnSessionListener=this.sessionManager.onSessionId(n)}}log(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log";null===(t=this.instance.sessionRecording)||void 0===t||t.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:i,trace:[],payload:[JSON.stringify(e)]}},timestamp:Date.now()})}_startCapture(e){var t,i;M(Object.assign)||M(Array.from)||(this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut())||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():null===(t=v.__PosthogExtensions__)||void 0===t||null===(i=t.loadExternalDependency)||void 0===i||i.call(t,this.instance,this.scriptName,(e=>{if(e)return Vn.error("could not load recorder",e);this._onScriptLoaded()})),Vn.info("starting"),"active"===this.status&&this._reportStarted(e||"recording_initialized"))}get scriptName(){var e,t,i;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t||null===(i=t.get_property(Ee))||void 0===i?void 0:i.script)||"recorder"}isInteractiveEvent(e){var t;return 3===e.type&&-1!==Wn.indexOf(null===(t=e.data)||void 0===t?void 0:t.source)}_updateWindowAndSessionIds(e){var t=this.isInteractiveEvent(e);t||this.isIdle||e.timestamp-this._lastActivityTimestamp>this.sessionIdleThresholdMilliseconds&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._tryAddCustomEvent("sessionIdle",{eventTimestamp:e.timestamp,lastActivityTimestamp:this._lastActivityTimestamp,threshold:this.sessionIdleThresholdMilliseconds,bufferLength:this.buffer.data.length,bufferSize:this.buffer.size}),this._flushBuffer());var i=!1;if(t&&(this._lastActivityTimestamp=e.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:e.type}),i=!0)),!this.isIdle){var{windowId:n,sessionId:r}=this.sessionManager.checkAndGetSessionAndWindowId(!t,e.timestamp),s=this.sessionId!==r,o=this.windowId!==n;this.windowId=n,this.sessionId=r,s||o?(this.stopRecording(),this.startIfEnabledOrStop("session_id_changed")):i&&this._scheduleFullSnapshot()}}_tryRRWebMethod(e){try{return e.rrwebMethod(),!0}catch(t){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:e.enqueuedAt||Date.now(),attempt:e.attempt++,rrwebMethod:e.rrwebMethod}):Vn.warn("could not emit queued rrweb event.",t,e),!1}}_tryAddCustomEvent(e,t){return this._tryRRWebMethod(Yn((()=>this.rrwebRecord.addCustomEvent(e,t))))}_tryTakeFullSnapshot(){return this._tryRRWebMethod(Yn((()=>this.rrwebRecord.takeFullSnapshot())))}_onScriptLoaded(){var e,t={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording;for(var[n,r]of Object.entries(i||{}))n in t&&("maskInputOptions"===n?t.maskInputOptions=V({password:!0},r):t[n]=r);if(this.canvasRecording&&this.canvasRecording.enabled&&(t.recordCanvas=!0,t.sampling={canvas:this.canvasRecording.fps},t.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=null!==(e=this.mutationRateLimiter)&&void 0!==e?e:new un(this.rrwebRecord,{refillRate:this.instance.config.session_recording.__mutationRateLimiterRefillRate,bucketSize:this.instance.config.session_recording.__mutationRateLimiterBucketSize,onBlockedNode:(e,t)=>{var i="Too many mutations on node '".concat(e,"'. Rate limiting. This could be due to SVG animations or something similar");Vn.info(i,{node:t}),this.log(Gn+" "+i,"warn")}});var s=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(V({emit:e=>{this.onRRwebEmit(e)},plugins:s},t)),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:t,activePlugins:s.map((e=>null==e?void 0:e.name))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else Vn.error("onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}_scheduleFullSnapshot(){if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var e=this.fullSnapshotIntervalMillis;e&&(this._fullSnapshotTimer=setInterval((()=>{this._tryTakeFullSnapshot()}),e))}}_gatherRRWebPlugins(){var e,t,i,n,r=[],s=null===(e=v.__PosthogExtensions__)||void 0===e||null===(t=e.rrwebPlugins)||void 0===t?void 0:t.getRecordConsolePlugin;s&&this.isConsoleLogCaptureEnabled&&r.push(s());var o=null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.rrwebPlugins)||void 0===n?void 0:n.getRecordNetworkPlugin;return this.networkPayloadCapture&&T(o)&&(!vt.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?r.push(o(((e,t)=>{var i,n,r,s={payloadSizeLimitBytes:nn.payloadSizeLimitBytes,performanceEntryTypeToObserve:[...nn.performanceEntryTypeToObserve],payloadHostDenyList:[...t.payloadHostDenyList||[],...nn.payloadHostDenyList]},o=!1!==e.session_recording.recordHeaders&&t.recordHeaders,a=!1!==e.session_recording.recordBody&&t.recordBody,l=!1!==e.capture_performance&&t.recordPerformance,c=(i=s,r=Math.min(1e6,null!==(n=i.payloadSizeLimitBytes)&&void 0!==n?n:1e6),e=>(null!=e&&e.requestBody&&(e.requestBody=an(e.requestBody,e.requestHeaders,r,"Request")),null!=e&&e.responseBody&&(e.responseBody=an(e.responseBody,e.responseHeaders,r,"Response")),e)),u=t=>{return c(((e,t)=>{var i,n=_t(e.name),r=0===t.indexOf("http")?null===(i=_t(t))||void 0===i?void 0:i.pathname:t;"/"===r&&(r="");var s=null==n?void 0:n.pathname.replace(r||"","");if(!(n&&s&&on.some((e=>0===s.indexOf(e)))))return e})((n=(i=t).requestHeaders,O(n)||K(Object.keys(null!=n?n:{}),(e=>{rn.includes(e.toLowerCase())&&(n[e]=tn)})),i),e.api_host));var i,n},d=T(e.session_recording.maskNetworkRequestFn);return d&&T(e.session_recording.maskCapturedNetworkRequestFn)&&H.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=t=>{var i=e.session_recording.maskNetworkRequestFn({url:t.name});return V(V({},t),{},{name:null==i?void 0:i.url})}),s.maskRequestFn=T(e.session_recording.maskCapturedNetworkRequestFn)?t=>{var i,n,r,s=u(t);return s&&null!==(i=null===(n=(r=e.session_recording).maskCapturedNetworkRequestFn)||void 0===n?void 0:n.call(r,s))&&void 0!==i?i:void 0}:e=>function(e){if(!M(e))return e.requestBody=ln(e.requestBody,"Request"),e.responseBody=ln(e.responseBody,"Response"),e}(u(e)),V(V(V({},nn),s),{},{recordHeaders:o,recordBody:a,recordPerformance:l,recordInitialRequests:l})})(this.instance.config,this.networkPayloadCapture))):Vn.info("NetworkCapture not started because we are on localhost.")),r}onRRwebEmit(e){var t;if(this._processQueuedEvents(),e&&R(e)){if(e.type===xi.Meta){var i=this._maskUrl(e.data.href);if(this._lastHref=i,!i)return;e.data.href=i}else this._pageViewFallBack();if(this._checkUrlTriggerConditions(),"paused"!==this.status||function(e){return e.type===xi.Custom&&"recording paused"===e.data.tag}(e)){e.type===xi.FullSnapshot&&this._scheduleFullSnapshot(),e.type===xi.FullSnapshot&&"trigger_pending"===this.triggerStatus&&this.clearBuffer();var n=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(e):e;if(n){var r=function(e){var t=e;if(t&&R(t)&&6===t.type&&R(t.data)&&"rrweb/console@1"===t.data.plugin){t.data.payload.payload.length>10&&(t.data.payload.payload=t.data.payload.payload.slice(0,10),t.data.payload.payload.push("...[truncated]"));for(var i=[],n=0;n<t.data.payload.payload.length;n++)t.data.payload.payload[n]&&t.data.payload.payload[n].length>2e3?i.push(t.data.payload.payload[n].slice(0,2e3)+"...[truncated]"):i.push(t.data.payload.payload[n]);return t.data.payload.payload=i,e}return e}(n);if(this._updateWindowAndSessionIds(r),!this.isIdle||Xn(r)){if(Xn(r)){var s=r.data.payload;if(s){var o=s.lastActivityTimestamp,a=s.threshold;r.timestamp=o+a}}var l=null===(t=this.instance.config.session_recording.compress_events)||void 0===t||t?function(e){if(Ei(e)<1024)return e;try{if(e.type===xi.FullSnapshot)return V(V({},e),{},{data:Jn(e.data),cv:"2024-10"});if(e.type===xi.IncrementalSnapshot&&e.data.source===Ci.Mutation)return V(V({},e),{},{cv:"2024-10",data:V(V({},e.data),{},{texts:Jn(e.data.texts),attributes:Jn(e.data.attributes),removes:Jn(e.data.removes),adds:Jn(e.data.adds)})});if(e.type===xi.IncrementalSnapshot&&e.data.source===Ci.StyleSheetRule)return V(V({},e),{},{cv:"2024-10",data:V(V({},e.data),{},{adds:Jn(e.data.adds),removes:Jn(e.data.removes)})})}catch(e){Vn.error("could not compress event - will use uncompressed event",e)}return e}(r):r,c={$snapshot_bytes:Ei(l),$snapshot_data:l,$session_id:this.sessionId,$window_id:this.windowId};"disabled"!==this.status?this._captureSnapshotBuffered(c):this.clearBuffer()}}}}}_pageViewFallBack(){if(!this.instance.config.capture_pageview&&r){var e=this._maskUrl(r.location.href);this._lastHref!==e&&(this._tryAddCustomEvent("$url_changed",{href:e}),this._lastHref=e)}}_processQueuedEvents(){if(this.queuedRRWebEvents.length){var e=[...this.queuedRRWebEvents];this.queuedRRWebEvents=[],e.forEach((e=>{Date.now()-e.enqueuedAt<=2e3&&this._tryRRWebMethod(e)}))}}_maskUrl(e){var t=this.instance.config.session_recording;if(t.maskNetworkRequestFn){var i,n={url:e};return null===(i=n=t.maskNetworkRequestFn(n))||void 0===i?void 0:i.url}return e}clearBuffer(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}_flushBuffer(){this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var e=this.minimumDuration,t=this.sessionDuration,i=N(t)&&t>=0,n=N(e)&&i&&t<e;return"buffering"===this.status||"paused"===this.status||n?(this.flushBufferTimer=setTimeout((()=>{this._flushBuffer()}),2e3),this.buffer):(this.buffer.data.length>0&&Si(this.buffer).forEach((e=>{this._captureSnapshot({$snapshot_bytes:e.size,$snapshot_data:e.data,$session_id:e.sessionId,$window_id:e.windowId,$lib:"web",$lib_version:_.LIB_VERSION})})),this.clearBuffer())}_captureSnapshotBuffered(e){var t,i=2+((null===(t=this.buffer)||void 0===t?void 0:t.data.length)||0);!this.isIdle&&(this.buffer.size+e.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=e.$snapshot_bytes,this.buffer.data.push(e.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout((()=>{this._flushBuffer()}),2e3))}_captureSnapshot(e){this.instance.capture("$snapshot",e,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}_checkUrlTriggerConditions(){if(void 0!==r&&r.location.href){var e=r.location.href,t="paused"===this.status,i=Kn(e,this._urlBlocklist);i&&!t?this._pauseRecording():!i&&t&&this._resumeRecording(),Kn(e,this._urlTriggers)&&this._activateTrigger("url")}}_activateTrigger(e){var t,i;"trigger_pending"===this.triggerStatus&&(null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i||i.register({["url"===e?Ce:Ie]:this.sessionId}),this._flushBuffer(),this._reportStarted(e+"_trigger_matched"))}_pauseRecording(){"paused"!==this.status&&(this._urlBlocked=!0,clearInterval(this._fullSnapshotTimer),Vn.info("recording paused due to URL blocker"),this._tryAddCustomEvent("recording paused",{reason:"url blocker"}))}_resumeRecording(){"paused"===this.status&&(this._urlBlocked=!1,this._tryTakeFullSnapshot(),this._scheduleFullSnapshot(),this._tryAddCustomEvent("recording resumed",{reason:"left blocked url"}),Vn.info("recording resumed"))}_addEventTriggerListener(){0!==this._eventTriggers.length&&O(this._removeEventTriggerCaptureHook)&&(this._removeEventTriggerCaptureHook=this.instance.on("eventCaptured",(e=>{try{this._eventTriggers.includes(e.event)&&this._activateTrigger("event")}catch(e){Vn.error("Could not activate event trigger",e)}})))}overrideLinkedFlag(){this._linkedFlagSeen=!0,this._tryTakeFullSnapshot(),this._reportStarted("linked_flag_overridden")}overrideSampling(){var e;null===(e=this.instance.persistence)||void 0===e||e.register({[xe]:!0}),this._tryTakeFullSnapshot(),this._reportStarted("sampling_overridden")}overrideTrigger(e){this._activateTrigger(e)}_reportStarted(e,t){this.instance.register_for_session({$session_recording_start_reason:e}),Vn.info(e.replace("_"," "),t),w(["recording_initialized","session_id_changed"],e)||this._tryAddCustomEvent(e,t)}}var Zn=U("[RemoteConfig]");class er{constructor(e){this.instance=e}get remoteConfig(){var e,t;return null===(e=v._POSTHOG_REMOTE_CONFIG)||void 0===e||null===(t=e[this.instance.config.token])||void 0===t?void 0:t.config}_loadRemoteConfigJs(e){var t,i,n;null!==(t=v.__PosthogExtensions__)&&void 0!==t&&t.loadExternalDependency?null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.loadExternalDependency)||void 0===n||n.call(i,this.instance,"remote-config",(()=>e(this.remoteConfig))):(Zn.error("PostHog Extensions not found. Cannot load remote config."),e())}_loadRemoteConfigJSON(e){this.instance._send_request({method:"GET",url:this.instance.requestRouter.endpointFor("assets","/array/".concat(this.instance.config.token,"/config")),callback:t=>{e(t.json)}})}load(){try{if(this.remoteConfig)return Zn.info("Using preloaded remote config",this.remoteConfig),void this.onRemoteConfig(this.remoteConfig);if(this.instance.config.advanced_disable_decide)return void Zn.warn("Remote config is disabled. Falling back to local config.");this._loadRemoteConfigJs((e=>{if(!e)return Zn.info("No config found after loading remote JS config. Falling back to JSON."),void this._loadRemoteConfigJSON((e=>{this.onRemoteConfig(e)}));this.onRemoteConfig(e)}))}catch(e){Zn.error("Error loading remote config",e)}}onRemoteConfig(e){e?this.instance.config.__preview_remote_config?(this.instance._onRemoteConfig(e),!1!==e.hasFeatureFlags&&this.instance.featureFlags.ensureFlagsLoaded()):Zn.info("__preview_remote_config is disabled. Logging config instead",e):Zn.error("Failed to fetch remote config from PostHog.")}}var tr,ir=null!=r&&r.location?wt(r.location.hash,"__posthog")||wt(location.hash,"state"):null,nr="_postHogToolbarParams",rr=U("[Toolbar]");!function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(tr||(tr={}));class sr{constructor(e){this.instance=e}setToolbarState(e){v.ph_toolbar_state=e}getToolbarState(){var e;return null!==(e=v.ph_toolbar_state)&&void 0!==e?e:tr.UNINITIALIZED}maybeLoadToolbar(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!r||!u)return!1;i=null!==(e=i)&&void 0!==e?e:r.location,s=null!==(t=s)&&void 0!==t?t:r.history;try{if(!n){try{r.localStorage.setItem("test","test"),r.localStorage.removeItem("test")}catch(e){return!1}n=null==r?void 0:r.localStorage}var o,a=ir||wt(i.hash,"__posthog")||wt(i.hash,"state"),l=a?te((()=>JSON.parse(atob(decodeURIComponent(a)))))||te((()=>JSON.parse(decodeURIComponent(a)))):null;return l&&"ph_authorize"===l.action?((o=l).source="url",o&&Object.keys(o).length>0&&(l.desiredHash?i.hash=l.desiredHash:s?s.replaceState(s.state,"",i.pathname+i.search):i.hash="")):((o=JSON.parse(n.getItem(nr)||"{}")).source="localstorage",delete o.userIntent),!(!o.token||this.instance.config.token!==o.token||(this.loadToolbar(o),0))}catch(e){return!1}}_callLoadToolbar(e){var t=v.ph_load_toolbar||v.ph_load_editor;!O(t)&&T(t)?t(e,this.instance):rr.warn("No toolbar load function found")}loadToolbar(e){var t=!(null==u||!u.getElementById(Ue));if(!r||t)return!1;var i="custom"===this.instance.requestRouter.region&&this.instance.config.advanced_disable_toolbar_metrics,n=V(V({token:this.instance.config.token},e),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(r.localStorage.setItem(nr,JSON.stringify(V(V({},n),{},{source:void 0}))),this.getToolbarState()===tr.LOADED)this._callLoadToolbar(n);else if(this.getToolbarState()===tr.UNINITIALIZED){var s,o;this.setToolbarState(tr.LOADING),null===(s=v.__PosthogExtensions__)||void 0===s||null===(o=s.loadExternalDependency)||void 0===o||o.call(s,this.instance,"toolbar",(e=>{if(e)return rr.error("[Toolbar] Failed to load",e),void this.setToolbarState(tr.UNINITIALIZED);this.setToolbarState(tr.LOADED),this._callLoadToolbar(n)})),ae(r,"turbolinks:load",(()=>{this.setToolbarState(tr.UNINITIALIZED),this.loadToolbar(n)}))}return!0}_loadEditor(e){return this.loadToolbar(e)}maybeLoadEditor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return this.maybeLoadToolbar(e,t,i)}}class or{constructor(e){W(this,"isPaused",!0),W(this,"queue",[]),W(this,"flushTimeoutMs",3e3),this.sendRequest=e}enqueue(e){this.queue.push(e),this.flushTimeout||this.setFlushTimeout()}unload(){this.clearFlushTimeout();var e=this.queue.length>0?this.formatQueue():{},t=Object.values(e),i=[...t.filter((e=>0===e.url.indexOf("/e"))),...t.filter((e=>0!==e.url.indexOf("/e")))];i.map((e=>{this.sendRequest(V(V({},e),{},{transport:"sendBeacon"}))}))}enable(){this.isPaused=!1,this.setFlushTimeout()}setFlushTimeout(){var e=this;this.isPaused||(this.flushTimeout=setTimeout((()=>{if(this.clearFlushTimeout(),this.queue.length>0){var t=this.formatQueue(),i=function(i){var n=t[i],r=(new Date).getTime();n.data&&P(n.data)&&K(n.data,(e=>{e.offset=Math.abs(e.timestamp-r),delete e.timestamp})),e.sendRequest(n)};for(var n in t)i(n)}}),this.flushTimeoutMs))}clearFlushTimeout(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}formatQueue(){var e={};return K(this.queue,(t=>{var i,n=t,r=(n?n.batchKey:null)||n.url;M(e[r])&&(e[r]=V(V({},n),{},{data:[]})),null===(i=e[r].data)||void 0===i||i.push(n.data)})),this.queue=[],e}}var ar=!!f||!!h,lr="text/plain",cr=(e,t)=>{var[i,n]=e.split("?"),r=V({},t);null==n||n.split("&").forEach((e=>{var[t]=e.split("=");delete r[t]}));var s=function(e){var t,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"&",r=[];return K(e,(function(e,n){M(e)||M(n)||"undefined"===n||(t=encodeURIComponent((e=>e instanceof File)(e)?e.name:e.toString()),i=encodeURIComponent(n),r[r.length]=i+"="+t)})),r.join(n)}(r);return s=s?(n?n+"&":"")+s:n,"".concat(i,"?").concat(s)},ur=(e,t)=>JSON.stringify(e,((e,t)=>"bigint"==typeof t?t.toString():t),t),dr=e=>{var{data:t,compression:i}=e;if(t){if(i===n.GZipJS){var r=jn(zn(ur(t)),{mtime:0}),s=new Blob([r],{type:lr});return{contentType:lr,body:s,estimatedSize:s.size}}if(i===n.Base64){var o=function(e){var t,i,n,r,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,c="",u=[];if(!e)return e;e=function(e){var t,i,n,r,s="";for(t=i=0,n=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,r=0;r<n;r++){var o=e.charCodeAt(r),a=null;o<128?i++:a=o>127&&o<2048?String.fromCharCode(o>>6|192,63&o|128):String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),$(a)||(i>t&&(s+=e.substring(t,i)),s+=a,t=i=r+1)}return i>t&&(s+=e.substring(t,e.length)),s}(e);do{t=(s=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,i=s>>12&63,n=s>>6&63,r=63&s,u[l++]=o.charAt(t)+o.charAt(i)+o.charAt(n)+o.charAt(r)}while(a<e.length);switch(c=u.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c}(ur(t)),a=(e=>"data="+encodeURIComponent("string"==typeof e?e:ur(e)))(o);return{contentType:"application/x-www-form-urlencoded",body:a,estimatedSize:new Blob([a]).size}}var l=ur(t);return{contentType:"application/json",body:l,estimatedSize:new Blob([l]).size}}},hr=[];h&&hr.push({transport:"fetch",method:e=>{var t,i,{contentType:n,body:r,estimatedSize:s}=null!==(t=dr(e))&&void 0!==t?t:{},o=new Headers;K(e.headers,(function(e,t){o.append(t,e)})),n&&o.append("Content-Type",n);var a=e.url,l=null;if(p){var c=new p;l={signal:c.signal,timeout:setTimeout((()=>c.abort()),e.timeout)}}h(a,V({method:(null==e?void 0:e.method)||"GET",headers:o,keepalive:"POST"===e.method&&(s||0)<52428.8,body:r,signal:null===(i=l)||void 0===i?void 0:i.signal},e.fetchOptions)).then((t=>t.text().then((i=>{var n,r={statusCode:t.status,text:i};if(200===t.status)try{r.json=JSON.parse(i)}catch(e){H.error(e)}null===(n=e.callback)||void 0===n||n.call(e,r)})))).catch((t=>{var i;H.error(t),null===(i=e.callback)||void 0===i||i.call(e,{statusCode:0,text:t})})).finally((()=>l?clearTimeout(l.timeout):null))}}),f&&hr.push({transport:"XHR",method:e=>{var t,i=new f;i.open(e.method||"GET",e.url,!0);var{contentType:n,body:r}=null!==(t=dr(e))&&void 0!==t?t:{};K(e.headers,(function(e,t){i.setRequestHeader(t,e)})),n&&i.setRequestHeader("Content-Type",n),e.timeout&&(i.timeout=e.timeout),i.withCredentials=!0,i.onreadystatechange=()=>{if(4===i.readyState){var t,n={statusCode:i.status,text:i.responseText};if(200===i.status)try{n.json=JSON.parse(i.responseText)}catch(e){}null===(t=e.callback)||void 0===t||t.call(e,n)}},i.send(r)}}),null!=c&&c.sendBeacon&&hr.push({transport:"sendBeacon",method:e=>{var t=cr(e.url,{beacon:"1"});try{var i,{contentType:n,body:r}=null!==(i=dr(e))&&void 0!==i?i:{},s="string"==typeof r?new Blob([r],{type:n}):r;c.sendBeacon(t,s)}catch(e){}}});var fr=["retriesPerformedSoFar"];class pr{constructor(e){W(this,"isPolling",!1),W(this,"pollIntervalMs",3e3),W(this,"queue",[]),this.instance=e,this.queue=[],this.areWeOnline=!0,!M(r)&&"onLine"in r.navigator&&(this.areWeOnline=r.navigator.onLine,ae(r,"online",(()=>{this.areWeOnline=!0,this.flush()})),ae(r,"offline",(()=>{this.areWeOnline=!1})))}retriableRequest(e){var{retriesPerformedSoFar:t}=e,i=Y(e,fr);N(t)&&t>0&&(i.url=cr(i.url,{retry_count:t})),this.instance._send_request(V(V({},i),{},{callback:e=>{var n;200!==e.statusCode&&(e.statusCode<400||e.statusCode>=500)&&(null!=t?t:0)<10?this.enqueue(V({retriesPerformedSoFar:t},i)):null===(n=i.callback)||void 0===n||n.call(i,e)}}))}enqueue(e){var t=e.retriesPerformedSoFar||0;e.retriesPerformedSoFar=t+1;var i=function(e){var t=3e3*Math.pow(2,e),i=t/2,n=Math.min(18e5,t),r=(Math.random()-.5)*(n-i);return Math.ceil(n+r)}(t),n=Date.now()+i;this.queue.push({retryAt:n,requestOptions:e});var r="Enqueued failed request for retry in ".concat(i);navigator.onLine||(r+=" (Browser is offline)"),H.warn(r),this.isPolling||(this.isPolling=!0,this.poll())}poll(){this.poller&&clearTimeout(this.poller),this.poller=setTimeout((()=>{this.areWeOnline&&this.queue.length>0&&this.flush(),this.poll()}),this.pollIntervalMs)}flush(){var e=Date.now(),t=[],i=this.queue.filter((i=>i.retryAt<e||(t.push(i),!1)));if(this.queue=t,i.length>0)for(var{requestOptions:n}of i)this.retriableRequest(n)}unload(){for(var{requestOptions:e}of(this.poller&&(clearTimeout(this.poller),this.poller=void 0),this.queue))try{this.instance._send_request(V(V({},e),{},{transport:"sendBeacon"}))}catch(e){H.error(e)}this.queue=[]}}var gr,vr=U("[SessionId]");class _r{constructor(e,t,i){var n;if(W(this,"_sessionIdChangedHandlers",[]),!e.persistence)throw new Error("SessionIdManager requires a PostHogPersistence instance");if(e.config.__preview_experimental_cookieless_mode)throw new Error("SessionIdManager cannot be used with __preview_experimental_cookieless_mode");this.config=e.config,this.persistence=e.persistence,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=t||nt,this._windowIdGenerator=i||nt;var r=this.config.persistence_name||this.config.token,s=this.config.session_idle_timeout_seconds||1800;if(this._sessionTimeoutMs=1e3*cn(s,60,36e3,"session_idle_timeout_seconds",1800),e.register({$configured_session_timeout_ms:this._sessionTimeoutMs}),this.resetIdleTimer(),this._window_id_storage_key="ph_"+r+"_window_id",this._primary_window_exists_storage_key="ph_"+r+"_primary_window_exists",this._canUseSessionStorage()){var o=gt.parse(this._window_id_storage_key),a=gt.parse(this._primary_window_exists_storage_key);o&&!a?this._windowId=o:gt.remove(this._window_id_storage_key),gt.set(this._primary_window_exists_storage_key,!0)}if(null!==(n=this.config.bootstrap)&&void 0!==n&&n.sessionID)try{var l=(()=>{var e=this.config.bootstrap.sessionID.replace(/-/g,"");if(32!==e.length)throw new Error("Not a valid UUID");if("7"!==e[12])throw new Error("Not a UUIDv7");return parseInt(e.substring(0,12),16)})();this._setSessionId(this.config.bootstrap.sessionID,(new Date).getTime(),l)}catch(e){vr.error("Invalid sessionID in bootstrap",e)}this._listenToReloadWindow()}get sessionTimeoutMs(){return this._sessionTimeoutMs}onSessionId(e){return M(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(e),this._sessionId&&e(this._sessionId,this._windowId),()=>{this._sessionIdChangedHandlers=this._sessionIdChangedHandlers.filter((t=>t!==e))}}_canUseSessionStorage(){return"memory"!==this.config.persistence&&!this.persistence.disabled&&gt.is_supported()}_setWindowId(e){e!==this._windowId&&(this._windowId=e,this._canUseSessionStorage()&&gt.set(this._window_id_storage_key,e))}_getWindowId(){return this._windowId?this._windowId:this._canUseSessionStorage()?gt.parse(this._window_id_storage_key):null}_setSessionId(e,t,i){e===this._sessionId&&t===this._sessionActivityTimestamp&&i===this._sessionStartTimestamp||(this._sessionStartTimestamp=i,this._sessionActivityTimestamp=t,this._sessionId=e,this.persistence.register({[Se]:[t,e,i]}))}_getSessionId(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var e=this.persistence.props[Se];return P(e)&&2===e.length&&e.push(e[0]),e||[0,null,0]}resetSessionId(){this._setSessionId(null,null,null)}_listenToReloadWindow(){ae(r,"beforeunload",(()=>{this._canUseSessionStorage()&&gt.remove(this._primary_window_exists_storage_key)}),{capture:!1})}checkAndGetSessionAndWindowId(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.config.__preview_experimental_cookieless_mode)throw new Error("checkAndGetSessionAndWindowId should not be called in __preview_experimental_cookieless_mode");var i=t||(new Date).getTime(),[n,r,s]=this._getSessionId(),o=this._getWindowId(),a=N(s)&&s>0&&Math.abs(i-s)>864e5,l=!1,c=!r,u=!e&&Math.abs(i-n)>this.sessionTimeoutMs;c||u||a?(r=this._sessionIdGenerator(),o=this._windowIdGenerator(),vr.info("new session ID generated",{sessionId:r,windowId:o,changeReason:{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}}),s=i,l=!0):o||(o=this._windowIdGenerator(),l=!0);var d=0===n||!e||a?i:n,h=0===s?(new Date).getTime():s;return this._setWindowId(o),this._setSessionId(r,d,h),e||this.resetIdleTimer(),l&&this._sessionIdChangedHandlers.forEach((e=>e(r,o,l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0))),{sessionId:r,windowId:o,sessionStartTimestamp:h,changeReason:l?{noSessionId:c,activityTimeout:u,sessionPastMaximumLength:a}:void 0,lastActivityTimestamp:n}}resetIdleTimer(){clearTimeout(this._enforceIdleTimeout),this._enforceIdleTimeout=setTimeout((()=>{this.resetSessionId()}),1.1*this.sessionTimeoutMs)}}!function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"}(gr||(gr={}));var mr="i.posthog.com";class br{constructor(e){W(this,"_regionCache",{}),this.instance=e}get apiHost(){var e=this.instance.config.api_host.trim().replace(/\/$/,"");return"https://app.posthog.com"===e?"https://us.i.posthog.com":e}get uiHost(){var e,t=null===(e=this.instance.config.ui_host)||void 0===e?void 0:e.replace(/\/$/,"");return t||(t=this.apiHost.replace(".".concat(mr),".posthog.com")),"https://app.posthog.com"===t?"https://us.posthog.com":t}get region(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gr.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=gr.EU:this._regionCache[this.apiHost]=gr.CUSTOM),this._regionCache[this.apiHost]}endpointFor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(t&&(t="/"===t[0]?t:"/".concat(t)),"ui"===e)return this.uiHost+t;if(this.region===gr.CUSTOM)return this.apiHost+t;var i=mr+t;switch(e){case"assets":return"https://".concat(this.region,"-assets.").concat(i);case"api":return"https://".concat(this.region,".").concat(i)}}}var yr="posthog-js";function wr(e){var{organization:t,projectId:i,prefix:n,severityAllowList:r=["error"]}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s=>{var o,a,l,c,u;if("*"!==r&&!r.includes(s.level)||!e.__loaded)return s;s.tags||(s.tags={});var d=e.requestRouter.endpointFor("ui","/project/".concat(e.config.token,"/person/").concat(e.get_distinct_id()));s.tags["PostHog Person URL"]=d,e.sessionRecordingStarted()&&(s.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var h=(null===(o=s.exception)||void 0===o?void 0:o.values)||[];h.forEach((e=>{e.stacktrace&&(e.stacktrace.type="raw",e.stacktrace.frames.forEach((e=>{e.platform="web:javascript"})))}));var f={$exception_message:(null===(a=h[0])||void 0===a?void 0:a.value)||s.message,$exception_type:null===(l=h[0])||void 0===l?void 0:l.type,$exception_personURL:d,$exception_level:s.level,$exception_list:h,$sentry_event_id:s.event_id,$sentry_exception:s.exception,$sentry_exception_message:(null===(c=h[0])||void 0===c?void 0:c.value)||s.message,$sentry_exception_type:null===(u=h[0])||void 0===u?void 0:u.type,$sentry_tags:s.tags};return t&&i&&(f.$sentry_url=(n||"https://sentry.io/organizations/")+t+"/issues/?project="+i+"&query="+s.event_id),e.exceptions.sendExceptionEvent(f),s}}class kr{constructor(e,t,i,n,r){this.name=yr,this.setupOnce=function(s){s(wr(e,{organization:t,projectId:i,prefix:n,severityAllowList:r}))}}}var Er=U("[SegmentIntegration]");class Sr{constructor(e){this._instance=e}doPageView(e,t){var i,n=this._previousPageViewProperties(e,t);return this._currentPageview={pathname:null!==(i=null==r?void 0:r.location.pathname)&&void 0!==i?i:"",pageViewId:t,timestamp:e},this._instance.scrollManager.resetContext(),n}doPageLeave(e){var t;return this._previousPageViewProperties(e,null===(t=this._currentPageview)||void 0===t?void 0:t.pageViewId)}doEvent(){var e;return{$pageview_id:null===(e=this._currentPageview)||void 0===e?void 0:e.pageViewId}}_previousPageViewProperties(e,t){var i=this._currentPageview;if(!i)return{$pageview_id:t};var n={$pageview_id:t,$prev_pageview_id:i.pageViewId},r=this._instance.scrollManager.getContext();if(r&&!this._instance.config.disable_scroll_properties){var{maxScrollHeight:s,lastScrollY:o,maxScrollY:a,maxContentHeight:l,lastContentY:c,maxContentY:u}=r;if(!(M(s)||M(o)||M(a)||M(l)||M(c)||M(u))){s=Math.ceil(s),o=Math.ceil(o),a=Math.ceil(a),l=Math.ceil(l),c=Math.ceil(c),u=Math.ceil(u);var d=s<=1?1:cn(o/s,0,1),h=s<=1?1:cn(a/s,0,1),f=l<=1?1:cn(c/l,0,1),p=l<=1?1:cn(u/l,0,1);n=Q(n,{$prev_pageview_last_scroll:o,$prev_pageview_last_scroll_percentage:d,$prev_pageview_max_scroll:a,$prev_pageview_max_scroll_percentage:h,$prev_pageview_last_content:c,$prev_pageview_last_content_percentage:f,$prev_pageview_max_content:u,$prev_pageview_max_content_percentage:p})}}return i.pathname&&(n.$prev_pageview_pathname=i.pathname),i.timestamp&&(n.$prev_pageview_duration=(e.getTime()-i.timestamp.getTime())/1e3),n}}var xr,Cr,Ir,Pr,Tr,Rr,Fr,Mr,Lr,Ar,$r,Or={},Nr=[],Dr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,qr=Array.isArray;function Br(e,t){for(var i in t)e[i]=t[i];return e}function Hr(e){var t=e.parentNode;t&&t.removeChild(e)}function Ur(e,t,i,n,r){var s={type:e,props:t,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==r?++Ir:r,__i:-1,__u:0};return null==r&&null!=Cr.vnode&&Cr.vnode(s),s}function jr(e){return e.children}function zr(e,t){this.props=e,this.context=t}function Gr(e,t){if(null==t)return e.__?Gr(e.__,e.__i+1):null;for(var i;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e)return i.__e;return"function"==typeof e.type?Gr(e):null}function Vr(e){var t,i;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(i=e.__k[t])&&null!=i.__e){e.__e=e.__c.base=i.__e;break}return Vr(e)}}function Wr(e){(!e.__d&&(e.__d=!0)&&Pr.push(e)&&!Yr.__r++||Tr!==Cr.debounceRendering)&&((Tr=Cr.debounceRendering)||Rr)(Yr)}function Yr(){var e,t,i,n,r,s,o,a,l;for(Pr.sort(Fr);e=Pr.shift();)e.__d&&(t=Pr.length,n=void 0,s=(r=(i=e).__v).__e,a=[],l=[],(o=i.__P)&&((n=Br({},r)).__v=r.__v+1,Cr.vnode&&Cr.vnode(n),is(o,n,r,i.__n,void 0!==o.ownerSVGElement,32&r.__u?[s]:null,a,null==s?Gr(r):s,!!(32&r.__u),l),n.__.__k[n.__i]=n,ns(a,n,l),n.__e!=s&&Vr(n)),Pr.length>t&&Pr.sort(Fr));Yr.__r=0}function Jr(e,t,i,n,r,s,o,a,l,c,u){var d,h,f,p,g,v=n&&n.__k||Nr,_=t.length;for(i.__d=l,function(e,t,i){var n,r,s,o,a,l=t.length,c=i.length,u=c,d=0;for(e.__k=[],n=0;n<l;n++)null!=(r=e.__k[n]=null==(r=t[n])||"boolean"==typeof r||"function"==typeof r?null:"string"==typeof r||"number"==typeof r||"bigint"==typeof r||r.constructor==String?Ur(null,r,null,null,r):qr(r)?Ur(jr,{children:r},null,null,null):void 0===r.constructor&&r.__b>0?Ur(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r)?(r.__=e,r.__b=e.__b+1,a=Kr(r,i,o=n+d,u),r.__i=a,s=null,-1!==a&&(u--,(s=i[a])&&(s.__u|=131072)),null==s||null===s.__v?(-1==a&&d--,"function"!=typeof r.type&&(r.__u|=65536)):a!==o&&(a===o+1?d++:a>o?u>l-o?d+=a-o:d--:d=a<o&&a==o-1?a-o:0,a!==n+d&&(r.__u|=65536))):(s=i[n])&&null==s.key&&s.__e&&(s.__e==e.__d&&(e.__d=Gr(s)),ss(s,s,!1),i[n]=null,u--);if(u)for(n=0;n<c;n++)null!=(s=i[n])&&!(131072&s.__u)&&(s.__e==e.__d&&(e.__d=Gr(s)),ss(s,s))}(i,t,v),l=i.__d,d=0;d<_;d++)null!=(f=i.__k[d])&&"boolean"!=typeof f&&"function"!=typeof f&&(h=-1===f.__i?Or:v[f.__i]||Or,f.__i=d,is(e,f,h,r,s,o,a,l,c,u),p=f.__e,f.ref&&h.ref!=f.ref&&(h.ref&&rs(h.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),65536&f.__u||h.__k===f.__k?l=Xr(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);i.__d=l,i.__e=g}function Xr(e,t,i){var n,r;if("function"==typeof e.type){for(n=e.__k,r=0;n&&r<n.length;r++)n[r]&&(n[r].__=e,t=Xr(n[r],t,i));return t}return e.__e!=t&&(i.insertBefore(e.__e,t||null),t=e.__e),t&&t.nextSibling}function Kr(e,t,i,n){var r=e.key,s=e.type,o=i-1,a=i+1,l=t[i];if(null===l||l&&r==l.key&&s===l.type)return i;if(n>(null==l||131072&l.__u?0:1))for(;o>=0||a<t.length;){if(o>=0){if((l=t[o])&&!(131072&l.__u)&&r==l.key&&s===l.type)return o;o--}if(a<t.length){if((l=t[a])&&!(131072&l.__u)&&r==l.key&&s===l.type)return a;a++}}return-1}function Qr(e,t,i){"-"===t[0]?e.setProperty(t,null==i?"":i):e[t]=null==i?"":"number"!=typeof i||Dr.test(t)?i:i+"px"}function Zr(e,t,i,n,r){var s;e:if("style"===t)if("string"==typeof i)e.style.cssText=i;else{if("string"==typeof n&&(e.style.cssText=n=""),n)for(t in n)i&&t in i||Qr(e.style,t,"");if(i)for(t in i)n&&i[t]===n[t]||Qr(e.style,t,i[t])}else if("o"===t[0]&&"n"===t[1])s=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=i,i?n?i.u=n.u:(i.u=Date.now(),e.addEventListener(t,s?ts:es,s)):e.removeEventListener(t,s?ts:es,s);else{if(r)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&"rowSpan"!==t&&"colSpan"!==t&&"role"!==t&&t in e)try{e[t]=null==i?"":i;break e}catch(e){}"function"==typeof i||(null==i||!1===i&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,i))}}function es(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(Cr.event?Cr.event(e):e)}function ts(e){return this.l[e.type+!0](Cr.event?Cr.event(e):e)}function is(e,t,i,n,r,s,o,a,l,c){var u,d,h,f,p,g,v,_,m,b,y,w,k,E,S,x=t.type;if(void 0!==t.constructor)return null;128&i.__u&&(l=!!(32&i.__u),s=[a=t.__e=i.__e]),(u=Cr.__b)&&u(t);e:if("function"==typeof x)try{if(_=t.props,m=(u=x.contextType)&&n[u.__c],b=u?m?m.props.value:u.__:n,i.__c?v=(d=t.__c=i.__c).__=d.__E:("prototype"in x&&x.prototype.render?t.__c=d=new x(_,b):(t.__c=d=new zr(_,b),d.constructor=x,d.render=os),m&&m.sub(d),d.props=_,d.state||(d.state={}),d.context=b,d.__n=n,h=d.__d=!0,d.__h=[],d._sb=[]),null==d.__s&&(d.__s=d.state),null!=x.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=Br({},d.__s)),Br(d.__s,x.getDerivedStateFromProps(_,d.__s))),f=d.props,p=d.state,d.__v=t,h)null==x.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==x.getDerivedStateFromProps&&_!==f&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(_,b),!d.__e&&(null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(_,d.__s,b)||t.__v===i.__v)){for(t.__v!==i.__v&&(d.props=_,d.state=d.__s,d.__d=!1),t.__e=i.__e,t.__k=i.__k,t.__k.forEach((function(e){e&&(e.__=t)})),y=0;y<d._sb.length;y++)d.__h.push(d._sb[y]);d._sb=[],d.__h.length&&o.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(_,d.__s,b),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(f,p,g)}))}if(d.context=b,d.props=_,d.__P=e,d.__e=!1,w=Cr.__r,k=0,"prototype"in x&&x.prototype.render){for(d.state=d.__s,d.__d=!1,w&&w(t),u=d.render(d.props,d.state,d.context),E=0;E<d._sb.length;E++)d.__h.push(d._sb[E]);d._sb=[]}else do{d.__d=!1,w&&w(t),u=d.render(d.props,d.state,d.context),d.state=d.__s}while(d.__d&&++k<25);d.state=d.__s,null!=d.getChildContext&&(n=Br(Br({},n),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(g=d.getSnapshotBeforeUpdate(f,p)),Jr(e,qr(S=null!=u&&u.type===jr&&null==u.key?u.props.children:u)?S:[S],t,i,n,r,s,o,a,l,c),d.base=t.__e,t.__u&=-161,d.__h.length&&o.push(d),v&&(d.__E=d.__=null)}catch(e){t.__v=null,l||null!=s?(t.__e=a,t.__u|=l?160:32,s[s.indexOf(a)]=null):(t.__e=i.__e,t.__k=i.__k),Cr.__e(e,t,i)}else null==s&&t.__v===i.__v?(t.__k=i.__k,t.__e=i.__e):t.__e=function(e,t,i,n,r,s,o,a,l){var c,u,d,h,f,p,g,v=i.props,_=t.props,m=t.type;if("svg"===m&&(r=!0),null!=s)for(c=0;c<s.length;c++)if((f=s[c])&&"setAttribute"in f==!!m&&(m?f.localName===m:3===f.nodeType)){e=f,s[c]=null;break}if(null==e){if(null===m)return document.createTextNode(_);e=r?document.createElementNS("http://www.w3.org/2000/svg",m):document.createElement(m,_.is&&_),s=null,a=!1}if(null===m)v===_||a&&e.data===_||(e.data=_);else{if(s=s&&xr.call(e.childNodes),v=i.props||Or,!a&&null!=s)for(v={},c=0;c<e.attributes.length;c++)v[(f=e.attributes[c]).name]=f.value;for(c in v)f=v[c],"children"==c||("dangerouslySetInnerHTML"==c?d=f:"key"===c||c in _||Zr(e,c,null,f,r));for(c in _)f=_[c],"children"==c?h=f:"dangerouslySetInnerHTML"==c?u=f:"value"==c?p=f:"checked"==c?g=f:"key"===c||a&&"function"!=typeof f||v[c]===f||Zr(e,c,f,v[c],r);if(u)a||d&&(u.__html===d.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(d&&(e.innerHTML=""),Jr(e,qr(h)?h:[h],t,i,n,r&&"foreignObject"!==m,s,o,s?s[0]:i.__k&&Gr(i,0),a,l),null!=s)for(c=s.length;c--;)null!=s[c]&&Hr(s[c]);a||(c="value",void 0!==p&&(p!==e[c]||"progress"===m&&!p||"option"===m&&p!==v[c])&&Zr(e,c,p,v[c],!1),c="checked",void 0!==g&&g!==e[c]&&Zr(e,c,g,v[c],!1))}return e}(i.__e,t,i,n,r,s,o,l,c);(u=Cr.diffed)&&u(t)}function ns(e,t,i){t.__d=void 0;for(var n=0;n<i.length;n++)rs(i[n],i[++n],i[++n]);Cr.__c&&Cr.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){Cr.__e(e,t.__v)}}))}function rs(e,t,i){try{"function"==typeof e?e(t):e.current=t}catch(e){Cr.__e(e,i)}}function ss(e,t,i){var n,r;if(Cr.unmount&&Cr.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||rs(n,null,t)),null!=(n=e.__c)){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(e){Cr.__e(e,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(r=0;r<n.length;r++)n[r]&&ss(n[r],t,i||"function"!=typeof e.type);i||null==e.__e||Hr(e.__e),e.__=e.__e=e.__d=void 0}function os(e,t,i){return this.constructor(e,i)}xr=Nr.slice,Cr={__e:function(e,t,i,n){for(var r,s,o;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&null!=s.getDerivedStateFromError&&(r.setState(s.getDerivedStateFromError(e)),o=r.__d),null!=r.componentDidCatch&&(r.componentDidCatch(e,n||{}),o=r.__d),o)return r.__E=r}catch(t){e=t}throw e}},Ir=0,zr.prototype.setState=function(e,t){var i;i=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Br({},this.state),"function"==typeof e&&(e=e(Br({},i),this.props)),e&&Br(i,e),null!=e&&this.__v&&(t&&this._sb.push(t),Wr(this))},zr.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Wr(this))},zr.prototype.render=jr,Pr=[],Rr="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Fr=function(e,t){return e.__v.__b-t.__v.__b},Yr.__r=0,Mr=0,function(e,t){var i={__c:t="__cC"+Mr++,__:{isPreviewMode:!1,previewPageIndex:0,handleCloseSurveyPopup:()=>{},isPopup:!0,onPreviewSubmit:()=>{}},Consumer:function(e,t){return e.children(t)},Provider:function(e){var i,n;return this.getChildContext||(i=[],(n={})[t]=this,this.getChildContext=function(){return n},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&i.some((function(e){e.__e=!0,Wr(e)}))},this.sub=function(e){i.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){i.splice(i.indexOf(e),1),t&&t.call(e)}}),e.children}};i.Provider.__=i.Consumer.contextType=i}(),function(e){e.Popover="popover",e.API="api",e.Widget="widget"}(Lr||(Lr={})),function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"}(Ar||(Ar={})),function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"}($r||($r={}));class as{constructor(){W(this,"events",{}),this.events={}}on(e,t){return this.events[e]||(this.events[e]=[]),this.events[e].push(t),()=>{this.events[e]=this.events[e].filter((e=>e!==t))}}emit(e,t){for(var i of this.events[e]||[])i(t);for(var n of this.events["*"]||[])n(e,t)}}class ls{constructor(e){W(this,"_debugEventEmitter",new as),W(this,"checkStep",((e,t)=>this.checkStepEvent(e,t)&&this.checkStepUrl(e,t)&&this.checkStepElement(e,t))),W(this,"checkStepEvent",((e,t)=>null==t||!t.event||(null==e?void 0:e.event)===(null==t?void 0:t.event))),this.instance=e,this.actionEvents=new Set,this.actionRegistry=new Set}init(){var e,t;M(null===(e=this.instance)||void 0===e?void 0:e._addCaptureHook)||(null===(t=this.instance)||void 0===t||t._addCaptureHook(((e,t)=>{this.on(e,t)})))}register(e){var t,i;if(!M(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)&&(e.forEach((e=>{var t,i;null===(t=this.actionRegistry)||void 0===t||t.add(e),null===(i=e.steps)||void 0===i||i.forEach((e=>{var t;null===(t=this.actionEvents)||void 0===t||t.add((null==e?void 0:e.event)||"")}))})),null!==(i=this.instance)&&void 0!==i&&i.autocapture)){var n,r=new Set;e.forEach((e=>{var t;null===(t=e.steps)||void 0===t||t.forEach((e=>{null!=e&&e.selector&&r.add(null==e?void 0:e.selector)}))})),null===(n=this.instance)||void 0===n||n.autocapture.setElementSelectors(r)}}on(e,t){var i;null!=t&&0!=e.length&&(this.actionEvents.has(e)||this.actionEvents.has(null==t?void 0:t.event))&&this.actionRegistry&&(null===(i=this.actionRegistry)||void 0===i?void 0:i.size)>0&&this.actionRegistry.forEach((e=>{this.checkAction(t,e)&&this._debugEventEmitter.emit("actionCaptured",e.name)}))}_addActionHook(e){this.onAction("actionCaptured",(t=>e(t)))}checkAction(e,t){if(null==(null==t?void 0:t.steps))return!1;for(var i of t.steps)if(this.checkStep(e,i))return!0;return!1}onAction(e,t){return this._debugEventEmitter.on(e,t)}checkStepUrl(e,t){if(null!=t&&t.url){var i,n=null==e||null===(i=e.properties)||void 0===i?void 0:i.$current_url;if(!n||"string"!=typeof n)return!1;if(!ls.matchString(n,null==t?void 0:t.url,(null==t?void 0:t.url_matching)||"contains"))return!1}return!0}static matchString(e,t,i){switch(i){case"regex":return!!r&&mt(e,t);case"exact":return t===e;case"contains":var n=ls.escapeStringRegexp(t).replace(/_/g,".").replace(/%/g,".*");return mt(e,n);default:return!1}}static escapeStringRegexp(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}checkStepElement(e,t){if((null!=t&&t.href||null!=t&&t.tag_name||null!=t&&t.text)&&!this.getElementsList(e).some((e=>!(null!=t&&t.href&&!ls.matchString(e.href||"",null==t?void 0:t.href,(null==t?void 0:t.href_matching)||"exact")||null!=t&&t.tag_name&&e.tag_name!==(null==t?void 0:t.tag_name)||null!=t&&t.text&&!ls.matchString(e.text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")&&!ls.matchString(e.$el_text||"",null==t?void 0:t.text,(null==t?void 0:t.text_matching)||"exact")))))return!1;if(null!=t&&t.selector){var i,n=null==e||null===(i=e.properties)||void 0===i?void 0:i.$element_selectors;if(!n)return!1;if(!n.includes(null==t?void 0:t.selector))return!1}return!0}getElementsList(e){return null==(null==e?void 0:e.properties.$elements)?[]:null==e?void 0:e.properties.$elements}}class cs{constructor(e){this.instance=e,this.eventToSurveys=new Map,this.actionToSurveys=new Map}register(e){var t;M(null===(t=this.instance)||void 0===t?void 0:t._addCaptureHook)||(this.setupEventBasedSurveys(e),this.setupActionBasedSurveys(e))}setupActionBasedSurveys(e){var t=e.filter((e=>{var t,i,n,r;return(null===(t=e.conditions)||void 0===t?void 0:t.actions)&&(null===(i=e.conditions)||void 0===i||null===(n=i.actions)||void 0===n||null===(r=n.values)||void 0===r?void 0:r.length)>0}));0!==t.length&&(null==this.actionMatcher&&(this.actionMatcher=new ls(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook((e=>{this.onAction(e)}))),t.forEach((e=>{var t,i,n,r,s,o,a,l,c,u;e.conditions&&null!==(t=e.conditions)&&void 0!==t&&t.actions&&null!==(i=e.conditions)&&void 0!==i&&null!==(n=i.actions)&&void 0!==n&&n.values&&(null===(r=e.conditions)||void 0===r||null===(s=r.actions)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)>0&&(null===(a=this.actionMatcher)||void 0===a||a.register(e.conditions.actions.values),null===(l=e.conditions)||void 0===l||null===(c=l.actions)||void 0===c||null===(u=c.values)||void 0===u||u.forEach((t=>{if(t&&t.name){var i=this.actionToSurveys.get(t.name);i&&i.push(e.id),this.actionToSurveys.set(t.name,i||[e.id])}})))})))}setupEventBasedSurveys(e){var t;0!==e.filter((e=>{var t,i,n,r;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(i=e.conditions)||void 0===i||null===(n=i.events)||void 0===n||null===(r=n.values)||void 0===r?void 0:r.length)>0})).length&&(null===(t=this.instance)||void 0===t||t._addCaptureHook(((e,t)=>{this.onEvent(e,t)})),e.forEach((e=>{var t,i,n;null===(t=e.conditions)||void 0===t||null===(i=t.events)||void 0===i||null===(n=i.values)||void 0===n||n.forEach((t=>{if(t&&t.name){var i=this.eventToSurveys.get(t.name);i&&i.push(e.id),this.eventToSurveys.set(t.name,i||[e.id])}}))})))}onEvent(e,t){var i,n,r=(null===(i=this.instance)||void 0===i||null===(n=i.persistence)||void 0===n?void 0:n.props[Le])||[];if(cs.SURVEY_SHOWN_EVENT_NAME==e&&t&&r.length>0){var s,o=null==t||null===(s=t.properties)||void 0===s?void 0:s.$survey_id;if(o){var a=r.indexOf(o);a>=0&&(r.splice(a,1),this._updateActivatedSurveys(r))}}else this.eventToSurveys.has(e)&&this._updateActivatedSurveys(r.concat(this.eventToSurveys.get(e)||[]))}onAction(e){var t,i,n=(null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i?void 0:i.props[Le])||[];this.actionToSurveys.has(e)&&this._updateActivatedSurveys(n.concat(this.actionToSurveys.get(e)||[]))}_updateActivatedSurveys(e){var t,i;null===(t=this.instance)||void 0===t||null===(i=t.persistence)||void 0===i||i.register({[Le]:[...new Set(e)]})}getSurveys(){var e,t;return(null===(e=this.instance)||void 0===e||null===(t=e.persistence)||void 0===t?void 0:t.props[Le])||[]}getEventToSurveys(){return this.eventToSurveys}_getActionMatcher(){return this.actionMatcher}}W(cs,"SURVEY_SHOWN_EVENT_NAME","survey shown");var us=U("[Surveys]"),ds={icontains:e=>!!r&&r.location.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:e=>!!r&&-1===r.location.href.toLowerCase().indexOf(e.toLowerCase()),regex:e=>!!r&&mt(r.location.href,e),not_regex:e=>!!r&&!mt(r.location.href,e),exact:e=>(null==r?void 0:r.location.href)===e,is_not:e=>(null==r?void 0:r.location.href)!==e};function hs(e,t,i){var n,r=e.questions[t],s=t+1;if(null===(n=r.branching)||void 0===n||!n.type)return t===e.questions.length-1?$r.End:s;if(r.branching.type===$r.End)return $r.End;if(r.branching.type===$r.SpecificQuestion){if(Number.isInteger(r.branching.index))return r.branching.index}else if(r.branching.type===$r.ResponseBased){if(r.type===Ar.SingleChoice){var o,a,l=r.choices.indexOf("".concat(i));if(null!==(o=r.branching)&&void 0!==o&&null!==(a=o.responseValues)&&void 0!==a&&a.hasOwnProperty(l)){var c=r.branching.responseValues[l];return Number.isInteger(c)?c:c===$r.End?$r.End:s}}else if(r.type===Ar.Rating){var u,d;if("number"!=typeof i||!Number.isInteger(i))throw new Error("The response type must be an integer");var h=function(e,t){if(3===t){if(e<1||e>3)throw new Error("The response must be in range 1-3");return 1===e?"negative":2===e?"neutral":"positive"}if(5===t){if(e<1||e>5)throw new Error("The response must be in range 1-5");return e<=2?"negative":3===e?"neutral":"positive"}if(7===t){if(e<1||e>7)throw new Error("The response must be in range 1-7");return e<=3?"negative":4===e?"neutral":"positive"}if(10===t){if(e<0||e>10)throw new Error("The response must be in range 0-10");return e<=6?"detractors":e<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 7, 10")}(i,r.scale);if(null!==(u=r.branching)&&void 0!==u&&null!==(d=u.responseValues)&&void 0!==d&&d.hasOwnProperty(h)){var f=r.branching.responseValues[h];return Number.isInteger(f)?f:f===$r.End?$r.End:s}}return s}return us.warn("Falling back to next question index due to unexpected branching type"),s}class fs{constructor(e){W(this,"getNextSurveyStep",hs),this.instance=e,this._surveyEventReceiver=null}onRemoteConfig(e){this._decideServerResponse=!!e.surveys,us.info("decideServerResponse set to ".concat(this._decideServerResponse)),this.loadIfEnabled()}reset(){localStorage.removeItem("lastSeenSurveyDate");var e=(()=>{for(var e=[],t=0;t<localStorage.length;t++){var i=localStorage.key(t);null!=i&&i.startsWith("seenSurvey_")&&e.push(i)}return e})();e.forEach((e=>localStorage.removeItem(e)))}loadIfEnabled(){if(!this._surveyManager)if(this.instance.config.disable_surveys)us.info("Disabled. Not loading surveys.");else{var e=null==v?void 0:v.__PosthogExtensions__;if(e){var t=e.generateSurveys;if(this._decideServerResponse)if(null==this._surveyEventReceiver&&(this._surveyEventReceiver=new cs(this.instance)),t)this._surveyManager=t(this.instance);else{var i=e.loadExternalDependency;i?i(this.instance,"surveys",(t=>{var i;t?us.error("Could not load surveys script",t):this._surveyManager=null===(i=e.generateSurveys)||void 0===i?void 0:i.call(e,this.instance)})):us.error("PostHog loadExternalDependency extension not found. Cannot load remote config.")}else us.warn("Decide not loaded yet. Not loading surveys.")}else us.error("PostHog Extensions not found.")}}getSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.instance.config.disable_surveys)return us.info("Disabled. Not loading surveys."),e([]);null==this._surveyEventReceiver&&(this._surveyEventReceiver=new cs(this.instance));var i=this.instance.get_property(Me);if(i&&!t)return us.info("Surveys already loaded, using existing data."),e(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{var i,n=t.statusCode;if(200!==n||!t.json)return us.error("Surveys API could not be loaded, status: ".concat(n)),e([]);var r,s=t.json.surveys||[],o=s.filter((e=>{var t,i,n,r,s,o,a,l,c,u,d,h;return(null===(t=e.conditions)||void 0===t?void 0:t.events)&&(null===(i=e.conditions)||void 0===i||null===(n=i.events)||void 0===n?void 0:n.values)&&(null===(r=e.conditions)||void 0===r||null===(s=r.events)||void 0===s||null===(o=s.values)||void 0===o?void 0:o.length)>0||(null===(a=e.conditions)||void 0===a?void 0:a.actions)&&(null===(l=e.conditions)||void 0===l||null===(c=l.actions)||void 0===c?void 0:c.values)&&(null===(u=e.conditions)||void 0===u||null===(d=u.actions)||void 0===d||null===(h=d.values)||void 0===h?void 0:h.length)>0}));return o.length>0&&(null===(r=this._surveyEventReceiver)||void 0===r||r.register(o)),null===(i=this.instance.persistence)||void 0===i||i.register({[Me]:s}),e(s)}})}getActiveMatchingSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.getSurveys((t=>{var i,n=t.filter((e=>!(!e.start_date||e.end_date))).filter((e=>{var t;if(!e.conditions)return!0;var i=function(e){var t,i,n;return null===(t=e.conditions)||void 0===t||!t.url||ds[null!==(i=null===(n=e.conditions)||void 0===n?void 0:n.urlMatchType)&&void 0!==i?i:"icontains"](e.conditions.url)}(e),n=null===(t=e.conditions)||void 0===t||!t.selector||(null==u?void 0:u.querySelector(e.conditions.selector));return i&&n})),r=null===(i=this._surveyEventReceiver)||void 0===i?void 0:i.getSurveys(),s=n.filter((e=>{var t,i,n,s,o,a,l,c,u,d,h;if(!(e.linked_flag_key||e.targeting_flag_key||e.internal_targeting_flag_key||null!==(t=e.feature_flag_keys)&&void 0!==t&&t.length))return!0;var f=!e.linked_flag_key||this.instance.featureFlags.isFeatureEnabled(e.linked_flag_key),p=!e.targeting_flag_key||this.instance.featureFlags.isFeatureEnabled(e.targeting_flag_key),g=(null===(i=e.conditions)||void 0===i?void 0:i.events)&&(null===(n=e.conditions)||void 0===n||null===(s=n.events)||void 0===s?void 0:s.values)&&(null===(o=e.conditions)||void 0===o||null===(a=o.events)||void 0===a?void 0:a.values.length)>0,v=(null===(l=e.conditions)||void 0===l?void 0:l.actions)&&(null===(c=e.conditions)||void 0===c||null===(u=c.actions)||void 0===u?void 0:u.values)&&(null===(d=e.conditions)||void 0===d||null===(h=d.actions)||void 0===h?void 0:h.values.length)>0,_=!g&&!v||(null==r?void 0:r.includes(e.id)),m=this._canActivateRepeatedly(e),b=!(e.internal_targeting_flag_key&&!m)||this.instance.featureFlags.isFeatureEnabled(e.internal_targeting_flag_key),y=this.checkFlags(e);return f&&p&&b&&_&&y}));return e(s)}),t)}checkFlags(e){var t;return null===(t=e.feature_flag_keys)||void 0===t||!t.length||e.feature_flag_keys.every((e=>{var{key:t,value:i}=e;return!t||!i||this.instance.featureFlags.isFeatureEnabled(i)}))}_canActivateRepeatedly(e){var t;return O(null===(t=v.__PosthogExtensions__)||void 0===t?void 0:t.canActivateRepeatedly)?(us.warn("init was not called"),!1):v.__PosthogExtensions__.canActivateRepeatedly(e)}canRenderSurvey(e){O(this._surveyManager)?us.warn("init was not called"):this.getSurveys((t=>{var i=t.filter((t=>t.id===e))[0];this._surveyManager.canRenderSurvey(i)}))}renderSurvey(e,t){O(this._surveyManager)?us.warn("init was not called"):this.getSurveys((i=>{var n=i.filter((t=>t.id===e))[0];this._surveyManager.renderSurvey(n,null==u?void 0:u.querySelector(t))}))}}var ps=U("[RateLimiter]");class gs{constructor(e){var t,i;W(this,"serverLimits",{}),W(this,"lastEventRateLimited",!1),W(this,"checkForLimiting",(e=>{var t=e.text;if(t&&t.length)try{(JSON.parse(t).quota_limited||[]).forEach((e=>{ps.info("".concat(e||"events"," is quota limited.")),this.serverLimits[e]=(new Date).getTime()+6e4}))}catch(e){return void ps.warn('could not rate limit - continuing. Error: "'.concat(null==e?void 0:e.message,'"'),{text:t})}})),this.instance=e,this.captureEventsPerSecond=(null===(t=e.config.rate_limiting)||void 0===t?void 0:t.events_per_second)||10,this.captureEventsBurstLimit=Math.max((null===(i=e.config.rate_limiting)||void 0===i?void 0:i.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}clientRateLimitContext(){var e,t,i,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(new Date).getTime(),s=null!==(e=null===(t=this.instance.persistence)||void 0===t?void 0:t.get_property(Ne))&&void 0!==e?e:{tokens:this.captureEventsBurstLimit,last:r};s.tokens+=(r-s.last)/1e3*this.captureEventsPerSecond,s.last=r,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var o=s.tokens<1;return o||n||(s.tokens=Math.max(0,s.tokens-1)),!o||this.lastEventRateLimited||n||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=o,null===(i=this.instance.persistence)||void 0===i||i.set_property(Ne,s),{isRateLimited:o,remainingTokens:s.tokens}}isServerRateLimited(e){var t=this.serverLimits[e||"events"]||!1;return!1!==t&&(new Date).getTime()<t}}var vs=e=>{var t=null==e?void 0:e.config;return V({initialPathName:(null==d?void 0:d.pathname)||"",referringDomain:yi.referringDomain()},yi.campaignParams({customTrackedParams:null==t?void 0:t.custom_campaign_params,maskPersonalDataProperties:null==t?void 0:t.mask_personal_data_properties,customPersonalDataProperties:null==t?void 0:t.custom_personal_data_properties}))};class _s{constructor(e,t,i,n){W(this,"_onSessionIdCallback",(e=>{var t=this._getStoredProps();if(!t||t.sessionId!==e){var i={sessionId:e,props:this._sessionSourceParamGenerator(this.instance)};this._persistence.register({[Oe]:i})}})),this.instance=e,this._sessionIdManager=t,this._persistence=i,this._sessionSourceParamGenerator=n||vs,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}_getStoredProps(){return this._persistence.props[Oe]}getSessionProps(){var e,t=null===(e=this._getStoredProps())||void 0===e?void 0:e.props;return t?{$client_session_initial_referring_host:t.referringDomain,$client_session_initial_pathname:t.initialPathName,$client_session_initial_utm_source:t.utm_source,$client_session_initial_utm_campaign:t.utm_campaign,$client_session_initial_utm_medium:t.utm_medium,$client_session_initial_utm_content:t.utm_content,$client_session_initial_utm_term:t.utm_term}:{}}}var ms=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","better uptime bot","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","gptbot","oai-searchbot","chatgpt-user","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],bs=function(e,t){if(!e)return!1;var i=e.toLowerCase();return ms.concat(t||[]).some((e=>{var t=e.toLowerCase();return-1!==i.indexOf(t)}))},ys=function(e,t){if(!e)return!1;var i=e.userAgent;if(i&&bs(i,t))return!0;try{var n=null==e?void 0:e.userAgentData;if(null!=n&&n.brands&&n.brands.some((e=>bs(null==e?void 0:e.brand,t))))return!0}catch(e){}return!!e.webdriver};class ws{constructor(){this.clicks=[]}isRageClick(e,t,i){var n=this.clicks[this.clicks.length-1];if(n&&Math.abs(e-n.x)+Math.abs(t-n.y)<30&&i-n.timestamp<1e3){if(this.clicks.push({x:e,y:t,timestamp:i}),3===this.clicks.length)return!0}else this.clicks=[{x:e,y:t,timestamp:i}];return!1}}var ks=U("[Dead Clicks]"),Es=()=>!0,Ss=e=>{var t,i=!(null===(t=e.instance.persistence)||void 0===t||!t.get_property(ge)),n=e.instance.config.capture_dead_clicks;return D(n)?n:i};class xs{get lazyLoadedDeadClicksAutocapture(){return this._lazyLoadedDeadClicksAutocapture}constructor(e,t,i){this.instance=e,this.isEnabled=t,this.onCapture=i,this.startIfEnabled()}onRemoteConfig(e){this.instance.persistence&&this.instance.persistence.register({[ge]:null==e?void 0:e.captureDeadClicks}),this.startIfEnabled()}startIfEnabled(){this.isEnabled(this)&&this.loadScript((()=>{this.start()}))}loadScript(e){var t,i,n;null!==(t=v.__PosthogExtensions__)&&void 0!==t&&t.initDeadClicksAutocapture&&e(),null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.loadExternalDependency)||void 0===n||n.call(i,this.instance,"dead-clicks-autocapture",(t=>{t?ks.error("failed to load script",t):e()}))}start(){var e;if(u){if(!this._lazyLoadedDeadClicksAutocapture&&null!==(e=v.__PosthogExtensions__)&&void 0!==e&&e.initDeadClicksAutocapture){var t=R(this.instance.config.capture_dead_clicks)?this.instance.config.capture_dead_clicks:{};t.__onCapture=this.onCapture,this._lazyLoadedDeadClicksAutocapture=v.__PosthogExtensions__.initDeadClicksAutocapture(this.instance,t),this._lazyLoadedDeadClicksAutocapture.start(u),ks.info("starting...")}}else ks.error("`document` not found. Cannot start.")}stop(){this._lazyLoadedDeadClicksAutocapture&&(this._lazyLoadedDeadClicksAutocapture.stop(),this._lazyLoadedDeadClicksAutocapture=void 0,ks.info("stopping..."))}}var Cs=U("[Heatmaps]");function Is(e){return R(e)&&"clientX"in e&&"clientY"in e&&N(e.clientX)&&N(e.clientY)}class Ps{constructor(e){var t;W(this,"rageclicks",new ws),W(this,"_enabledServerSide",!1),W(this,"_initialized",!1),W(this,"_flushInterval",null),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[he]),ae(r,"beforeunload",this.flush)}get flushIntervalMilliseconds(){var e=5e3;return R(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(e=this.instance.config.capture_heatmaps.flush_interval_milliseconds),e}get isEnabled(){return M(this.instance.config.capture_heatmaps)?M(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:!1!==this.instance.config.capture_heatmaps}startIfEnabled(){if(this.isEnabled){if(this._initialized)return;Cs.info("starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var e,t;clearInterval(null!==(e=this._flushInterval)&&void 0!==e?e:void 0),null===(t=this.deadClicksCapture)||void 0===t||t.stop(),this.getAndClearBuffer()}}onRemoteConfig(e){var t=!!e.heatmaps;this.instance.persistence&&this.instance.persistence.register({[he]:t}),this._enabledServerSide=t,this.startIfEnabled()}getAndClearBuffer(){var e=this.buffer;return this.buffer=void 0,e}_onDeadClick(e){this._onClick(e.originalEvent,"deadclick")}_setupListeners(){r&&u&&(ae(u,"click",(e=>this._onClick(e||(null==r?void 0:r.event))),{capture:!0}),ae(u,"mousemove",(e=>this._onMouseMove(e||(null==r?void 0:r.event))),{capture:!0}),this.deadClicksCapture=new xs(this.instance,Es,this._onDeadClick.bind(this)),this.deadClicksCapture.startIfEnabled(),this._initialized=!0)}_getProperties(e,t){var i=this.instance.scrollManager.scrollY(),n=this.instance.scrollManager.scrollX(),s=this.instance.scrollManager.scrollElement(),o=function(e,t,i){for(var n=e;n&&Pi(n)&&!Ti(n,"body");){if(n===i)return!1;if(w(t,null==r?void 0:r.getComputedStyle(n).position))return!0;n=qi(n)}return!1}(Ni(e),["fixed","sticky"],s);return{x:e.clientX+(o?0:n),y:e.clientY+(o?0:i),target_fixed:o,type:t}}_onClick(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"click";if(!Ii(e.target)&&Is(e)){var n=this._getProperties(e,i);null!==(t=this.rageclicks)&&void 0!==t&&t.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._capture(V(V({},n),{},{type:"rageclick"})),this._capture(n)}}_onMouseMove(e){!Ii(e.target)&&Is(e)&&(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((()=>{this._capture(this._getProperties(e,"mousemove"))}),500))}_capture(e){if(r){var t=r.location.href;this.buffer=this.buffer||{},this.buffer[t]||(this.buffer[t]=[]),this.buffer[t].push(e)}}flush(){this.buffer&&!F(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}class Ts{constructor(e){W(this,"_updateScrollData",(()=>{var e,t,i,n;this.context||(this.context={});var r=this.scrollElement(),s=this.scrollY(),o=r?Math.max(0,r.scrollHeight-r.clientHeight):0,a=s+((null==r?void 0:r.clientHeight)||0),l=(null==r?void 0:r.scrollHeight)||0;this.context.lastScrollY=Math.ceil(s),this.context.maxScrollY=Math.max(s,null!==(e=this.context.maxScrollY)&&void 0!==e?e:0),this.context.maxScrollHeight=Math.max(o,null!==(t=this.context.maxScrollHeight)&&void 0!==t?t:0),this.context.lastContentY=a,this.context.maxContentY=Math.max(a,null!==(i=this.context.maxContentY)&&void 0!==i?i:0),this.context.maxContentHeight=Math.max(l,null!==(n=this.context.maxContentHeight)&&void 0!==n?n:0)})),this.instance=e}getContext(){return this.context}resetContext(){var e=this.context;return setTimeout(this._updateScrollData,0),e}startMeasuringScrollPosition(){ae(r,"scroll",this._updateScrollData,{capture:!0}),ae(r,"scrollend",this._updateScrollData,{capture:!0}),ae(r,"resize",this._updateScrollData)}scrollElement(){if(!this.instance.config.scroll_root_selector)return null==r?void 0:r.document.documentElement;var e=P(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector];for(var t of e){var i=null==r?void 0:r.document.querySelector(t);if(i)return i}}scrollY(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollTop||0}return r&&(r.scrollY||r.pageYOffset||r.document.documentElement.scrollTop)||0}scrollX(){if(this.instance.config.scroll_root_selector){var e=this.scrollElement();return e&&e.scrollLeft||0}return r&&(r.scrollX||r.pageXOffset||r.document.documentElement.scrollLeft)||0}}var Rs=U("[AutoCapture]");function Fs(e,t){return t.length>e?t.slice(0,e)+"...":t}function Ms(e){if(e.previousElementSibling)return e.previousElementSibling;var t=e;do{t=t.previousSibling}while(t&&!Pi(t));return t}function Ls(e,t){for(var i,n,{e:s,maskAllElementAttributes:o,maskAllText:a,elementAttributeIgnoreList:l,elementsChainAsString:c}=t,u=[e],d=e;d.parentNode&&!Ti(d,"body");)Fi(d.parentNode)?(u.push(d.parentNode.host),d=d.parentNode.host):(u.push(d.parentNode),d=d.parentNode);var h,f=[],p={},g=!1,v=!1;if(K(u,(e=>{var t=Bi(e);"a"===e.tagName.toLowerCase()&&(g=e.getAttribute("href"),g=t&&g&&Yi(g)&&g),w(Ai(e),"ph-no-capture")&&(v=!0),f.push(function(e,t,i,n){var r=e.tagName.toLowerCase(),s={tag_name:r};Di.indexOf(r)>-1&&!i&&("a"===r.toLowerCase()||"button"===r.toLowerCase()?s.$el_text=Fs(1024,Ji(e)):s.$el_text=Fs(1024,Oi(e)));var o=Ai(e);o.length>0&&(s.classes=o.filter((function(e){return""!==e}))),K(e.attributes,(function(i){var r;if((!Hi(e)||-1!==["name","id","class","aria-label"].indexOf(i.name))&&(null==n||!n.includes(i.name))&&!t&&Yi(i.value)&&(r=i.name,!L(r)||"_ngcontent"!==r.substring(0,10)&&"_nghost"!==r.substring(0,7))){var o=i.value;"class"===i.name&&(o=Mi(o).join(" ")),s["attr__"+i.name]=Fs(1024,o)}}));for(var a=1,l=1,c=e;c=Ms(c);)a++,c.tagName===e.tagName&&l++;return s.nth_child=a,s.nth_of_type=l,s}(e,o,a,l));var i=function(e){if(!Bi(e))return{};var t={};return K(e.attributes,(function(e){if(e.name&&0===e.name.indexOf("data-ph-capture-attribute")){var i=e.name.replace("data-ph-capture-attribute-",""),n=e.value;i&&n&&Yi(n)&&(t[i]=n)}})),t}(e);Q(p,i)})),v)return{props:{},explicitNoCapture:v};if(a||("a"===e.tagName.toLowerCase()||"button"===e.tagName.toLowerCase()?f[0].$el_text=Ji(e):f[0].$el_text=Oi(e)),g){var _,m;f[0].attr__href=g;var b=null===(_=_t(g))||void 0===_?void 0:_.host,y=null==r||null===(m=r.location)||void 0===m?void 0:m.host;b&&y&&b!==y&&(h=g)}return{props:Q({$event_type:s.type,$ce_version:1},c?{}:{$elements:f},{$elements_chain:Ki(f)},null!==(i=f[0])&&void 0!==i&&i.$el_text?{$el_text:null===(n=f[0])||void 0===n?void 0:n.$el_text}:{},h&&"click"===s.type?{$external_click_url:h}:{},p)}}class As{constructor(e){W(this,"_initialized",!1),W(this,"_isDisabledServerSide",null),W(this,"rageclicks",new ws),W(this,"_elementsChainAsString",!1),this.instance=e,this._elementSelectors=null}get config(){var e,t,i=R(this.instance.config.autocapture)?this.instance.config.autocapture:{};return i.url_allowlist=null===(e=i.url_allowlist)||void 0===e?void 0:e.map((e=>new RegExp(e))),i.url_ignorelist=null===(t=i.url_ignorelist)||void 0===t?void 0:t.map((e=>new RegExp(e))),i}_addDomEventHandlers(){if(this.isBrowserSupported()){if(r&&u){var e=e=>{e=e||(null==r?void 0:r.event);try{this._captureEvent(e)}catch(e){Rs.error("Failed to capture event",e)}};if(ae(u,"submit",e,{capture:!0}),ae(u,"change",e,{capture:!0}),ae(u,"click",e,{capture:!0}),this.config.capture_copied_text){var t=e=>{e=e||(null==r?void 0:r.event),this._captureEvent(e,m)};ae(u,"copy",t,{capture:!0}),ae(u,"cut",t,{capture:!0})}}}else Rs.info("Disabling Automatic Event Collection because this browser is not supported")}startIfEnabled(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}onRemoteConfig(e){e.elementsChainAsString&&(this._elementsChainAsString=e.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register({[de]:!!e.autocapture_opt_out}),this._isDisabledServerSide=!!e.autocapture_opt_out,this.startIfEnabled()}setElementSelectors(e){this._elementSelectors=e}getElementSelectors(e){var t,i=[];return null===(t=this._elementSelectors)||void 0===t||t.forEach((t=>{var n=null==u?void 0:u.querySelectorAll(t);null==n||n.forEach((n=>{e===n&&i.push(t)}))})),i}get isEnabled(){var e,t,i=null===(e=this.instance.persistence)||void 0===e?void 0:e.props[de],n=this._isDisabledServerSide;if($(n)&&!D(i)&&!this.instance.config.advanced_disable_decide)return!1;var r=null!==(t=this._isDisabledServerSide)&&void 0!==t?t:!!i;return!!this.instance.config.autocapture&&!r}_captureEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$autocapture";if(this.isEnabled){var i,n=Ni(e);Ri(n)&&(n=n.parentNode||null),"$autocapture"===t&&"click"===e.type&&e instanceof MouseEvent&&this.instance.config.rageclick&&null!==(i=this.rageclicks)&&void 0!==i&&i.isRageClick(e.clientX,e.clientY,(new Date).getTime())&&this._captureEvent(e,"$rageclick");var s=t===m;if(n&&function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;if(!r||!e||Ti(e,"html")||!Pi(e))return!1;if(null!=i&&i.url_allowlist&&!Li(i.url_allowlist))return!1;if(null!=i&&i.url_ignorelist&&Li(i.url_ignorelist))return!1;if(null!=i&&i.dom_event_allowlist){var o=i.dom_event_allowlist;if(o&&!o.some((e=>t.type===e)))return!1}for(var a=!1,l=[e],c=!0,u=e;u.parentNode&&!Ti(u,"body");)if(Fi(u.parentNode))l.push(u.parentNode.host),u=u.parentNode.host;else{if(!(c=qi(u)))break;if(n||Di.indexOf(c.tagName.toLowerCase())>-1)a=!0;else{var d=r.getComputedStyle(c);d&&"pointer"===d.getPropertyValue("cursor")&&(a=!0)}l.push(c),u=c}if(!function(e,t){var i=null==t?void 0:t.element_allowlist;if(M(i))return!0;var n=function(e){if(i.some((t=>e.tagName.toLowerCase()===t)))return{v:!0}};for(var r of e){var s=n(r);if("object"==typeof s)return s.v}return!1}(l,i))return!1;if(!function(e,t){var i=null==t?void 0:t.css_selector_allowlist;if(M(i))return!0;var n=function(e){if(i.some((t=>e.matches(t))))return{v:!0}};for(var r of e){var s=n(r);if("object"==typeof s)return s.v}return!1}(l,i))return!1;var h=r.getComputedStyle(e);if(h&&"pointer"===h.getPropertyValue("cursor")&&"click"===t.type)return!0;var f=e.tagName.toLowerCase();switch(f){case"html":return!1;case"form":return(s||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(s||["change","click"]).indexOf(t.type)>=0;default:return a?(s||["click"]).indexOf(t.type)>=0:(s||["click"]).indexOf(t.type)>=0&&(Di.indexOf(f)>-1||"true"===e.getAttribute("contenteditable"))}}(n,e,this.config,s,s?["copy","cut"]:void 0)){var{props:o,explicitNoCapture:a}=Ls(n,{e,maskAllElementAttributes:this.instance.config.mask_all_element_attributes,maskAllText:this.instance.config.mask_all_text,elementAttributeIgnoreList:this.config.element_attribute_ignorelist,elementsChainAsString:this._elementsChainAsString});if(a)return!1;var l=this.getElementSelectors(n);if(l&&l.length>0&&(o.$element_selectors=l),t===m){var c,u=$i(null==r||null===(c=r.getSelection())||void 0===c?void 0:c.toString()),d=e.type||"clipboard";if(!u)return!1;o.$selected_content=u,o.$copy_type=d}return this.instance.capture(t,o),!0}}}isBrowserSupported(){return T(null==u?void 0:u.querySelectorAll)}}var $s,Os=U("[TracingHeaders]");class Ns{constructor(e){W(this,"_restoreXHRPatch",void 0),W(this,"_restoreFetchPatch",void 0),W(this,"_startCapturing",(()=>{var e,t,i,n;M(this._restoreXHRPatch)&&(null===(e=v.__PosthogExtensions__)||void 0===e||null===(t=e.tracingHeadersPatchFns)||void 0===t||t._patchXHR(this.instance.sessionManager)),M(this._restoreFetchPatch)&&(null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.tracingHeadersPatchFns)||void 0===n||n._patchFetch(this.instance.sessionManager))})),this.instance=e}_loadScript(e){var t,i,n;null!==(t=v.__PosthogExtensions__)&&void 0!==t&&t.tracingHeadersPatchFns&&e(),null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.loadExternalDependency)||void 0===n||n.call(i,this.instance,"tracing-headers",(t=>{if(t)return Os.error("failed to load script",t);e()}))}startIfEnabledOrStop(){var e,t;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):(null===(e=this._restoreXHRPatch)||void 0===e||e.call(this),null===(t=this._restoreFetchPatch)||void 0===t||t.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}!function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"}($s||($s={}));class Ds{constructor(e){this.instance=e}get config(){return this.instance.config}get consent(){return this.getDnt()?$s.DENIED:this.storedConsent}isOptedOut(){return this.consent===$s.DENIED||this.consent===$s.PENDING&&this.config.opt_out_capturing_by_default}isOptedIn(){return!this.isOptedOut()}optInOut(e){this.storage.set(this.storageKey,e?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}reset(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}get storageKey(){var{token:e,opt_out_capturing_cookie_prefix:t}=this.instance.config;return(t||"__ph_opt_in_out_")+e}get storedConsent(){var e=this.storage.get(this.storageKey);return"1"===e?$s.GRANTED:"0"===e?$s.DENIED:$s.PENDING}get storage(){if(!this._storage){var e=this.config.opt_out_capturing_persistence_type;this._storage="localStorage"===e?ct:at;var t="localStorage"===e?at:ct;t.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut("1"===t.get(this.storageKey)),t.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}getDnt(){return!!this.config.respect_dnt&&!!oe([null==c?void 0:c.doNotTrack,null==c?void 0:c.msDoNotTrack,v.doNotTrack],(e=>w([!0,1,"1","yes"],e)))}}var qs=U("[ExceptionAutocapture]");class Bs{constructor(e){var t;W(this,"originalOnUnhandledRejectionHandler",void 0),W(this,"startCapturing",(()=>{var e,t,i,n;if(r&&this.isEnabled&&!this.hasHandlers&&!this.isCapturing){var s=null===(e=v.__PosthogExtensions__)||void 0===e||null===(t=e.errorWrappingFunctions)||void 0===t?void 0:t.wrapOnError,o=null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.errorWrappingFunctions)||void 0===n?void 0:n.wrapUnhandledRejection;if(s&&o)try{this.unwrapOnError=s(this.captureException.bind(this)),this.unwrapUnhandledRejection=o(this.captureException.bind(this))}catch(e){qs.error("failed to start",e),this.stopCapturing()}else qs.error("failed to load error wrapping functions - cannot start")}})),this.instance=e,this.remoteEnabled=!(null===(t=this.instance.persistence)||void 0===t||!t.props[fe]),this.startIfEnabled()}get isEnabled(){var e;return null!==(e=this.remoteEnabled)&&void 0!==e&&e}get isCapturing(){var e;return!(null==r||null===(e=r.onerror)||void 0===e||!e.__POSTHOG_INSTRUMENTED__)}get hasHandlers(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}startIfEnabled(){this.isEnabled&&!this.isCapturing&&(qs.info("enabled, starting..."),this.loadScript(this.startCapturing))}loadScript(e){var t,i;this.hasHandlers&&e(),null===(t=v.__PosthogExtensions__)||void 0===t||null===(i=t.loadExternalDependency)||void 0===i||i.call(t,this.instance,"exception-autocapture",(t=>{if(t)return qs.error("failed to load script",t);e()}))}stopCapturing(){var e,t;null===(e=this.unwrapOnError)||void 0===e||e.call(this),null===(t=this.unwrapUnhandledRejection)||void 0===t||t.call(this)}onRemoteConfig(e){var t=e.autocaptureExceptions;this.remoteEnabled=!!t||!1,this.instance.persistence&&this.instance.persistence.register({[fe]:this.remoteEnabled}),this.startIfEnabled()}captureException(e){var t=this.instance.requestRouter.endpointFor("ui");e.$exception_personURL="".concat(t,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(e)}}var Hs=U("[Web Vitals]"),Us=9e5;class js{constructor(e){var t;W(this,"_enabledServerSide",!1),W(this,"_initialized",!1),W(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),W(this,"_flushToCapture",(()=>{clearTimeout(this._delayedFlushTimer),0!==this.buffer.metrics.length&&(this.instance.capture("$web_vitals",this.buffer.metrics.reduce(((e,t)=>V(V({},e),{},{["$web_vitals_".concat(t.name,"_event")]:V({},t),["$web_vitals_".concat(t.name,"_value")]:t.value})),{})),this.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})})),W(this,"_addToBuffer",(e=>{var t,i=null===(t=this.instance.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0);if(M(i))Hs.error("Could not read session ID. Dropping metrics!");else{this.buffer=this.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var n=this._currentURL();M(n)||(O(null==e?void 0:e.name)||O(null==e?void 0:e.value)?Hs.error("Invalid metric received",e):this._maxAllowedValue&&e.value>=this._maxAllowedValue?Hs.error("Ignoring metric with value >= "+this._maxAllowedValue,e):(this.buffer.url!==n&&(this._flushToCapture(),this._delayedFlushTimer=setTimeout(this._flushToCapture,this.flushToCaptureTimeoutMs)),M(this.buffer.url)&&(this.buffer.url=n),this.buffer.firstMetricTimestamp=M(this.buffer.firstMetricTimestamp)?Date.now():this.buffer.firstMetricTimestamp,e.attribution&&e.attribution.interactionTargetElement&&(e.attribution.interactionTargetElement=void 0),this.buffer.metrics.push(V(V({},e),{},{$current_url:n,$session_id:i.sessionId,$window_id:i.windowId,timestamp:Date.now()})),this.buffer.metrics.length===this.allowedMetrics.length&&this._flushToCapture()))}})),W(this,"_startCapturing",(()=>{var e,t,i,n,r=v.__PosthogExtensions__;M(r)||M(r.postHogWebVitalsCallbacks)||({onLCP:e,onCLS:t,onFCP:i,onINP:n}=r.postHogWebVitalsCallbacks),e&&t&&i&&n?(this.allowedMetrics.indexOf("LCP")>-1&&e(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("CLS")>-1&&t(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("FCP")>-1&&i(this._addToBuffer.bind(this)),this.allowedMetrics.indexOf("INP")>-1&&n(this._addToBuffer.bind(this)),this._initialized=!0):Hs.error("web vitals callbacks not loaded - not starting")})),this.instance=e,this._enabledServerSide=!(null===(t=this.instance.persistence)||void 0===t||!t.props[pe]),this.startIfEnabled()}get allowedMetrics(){var e,t,i=R(this.instance.config.capture_performance)?null===(e=this.instance.config.capture_performance)||void 0===e?void 0:e.web_vitals_allowed_metrics:void 0;return M(i)?(null===(t=this.instance.persistence)||void 0===t?void 0:t.props[ve])||["CLS","FCP","INP","LCP"]:i}get flushToCaptureTimeoutMs(){return(R(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals_delayed_flush_ms:void 0)||5e3}get _maxAllowedValue(){var e=R(this.instance.config.capture_performance)&&N(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:Us;return 0<e&&e<=6e4?Us:e}get isEnabled(){var e=R(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return D(e)?e:this._enabledServerSide}startIfEnabled(){this.isEnabled&&!this._initialized&&(Hs.info("enabled, starting..."),this.loadScript(this._startCapturing))}onRemoteConfig(e){var t=R(e.capturePerformance)&&!!e.capturePerformance.web_vitals,i=R(e.capturePerformance)?e.capturePerformance.web_vitals_allowed_metrics:void 0;this.instance.persistence&&(this.instance.persistence.register({[pe]:t}),this.instance.persistence.register({[ve]:i})),this._enabledServerSide=t,this.startIfEnabled()}loadScript(e){var t,i,n;null!==(t=v.__PosthogExtensions__)&&void 0!==t&&t.postHogWebVitalsCallbacks&&e(),null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.loadExternalDependency)||void 0===n||n.call(i,this.instance,"web-vitals",(t=>{t?Hs.error("failed to load script",t):e()}))}_currentURL(){var e=r?r.location.href:void 0;return e||Hs.error("Could not determine current URL"),e}}var zs={icontains:(e,t)=>!!r&&t.href.toLowerCase().indexOf(e.toLowerCase())>-1,not_icontains:(e,t)=>!!r&&-1===t.href.toLowerCase().indexOf(e.toLowerCase()),regex:(e,t)=>!!r&&mt(t.href,e),not_regex:(e,t)=>!!r&&!mt(t.href,e),exact:(e,t)=>t.href===e,is_not:(e,t)=>t.href!==e};class Gs{constructor(e){var t=this;W(this,"getWebExperimentsAndEvaluateDisplayLogic",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t.getWebExperiments((e=>{Gs.logInfo("retrieved web experiments from the server"),t._flagToExperiments=new Map,e.forEach((e=>{if(e.feature_flag_key){var i;t._flagToExperiments&&(Gs.logInfo("setting flag key ",e.feature_flag_key," to web experiment ",e),null===(i=t._flagToExperiments)||void 0===i||i.set(e.feature_flag_key,e));var n=t.instance.getFeatureFlag(e.feature_flag_key);L(n)&&e.variants[n]&&t.applyTransforms(e.name,n,e.variants[n].transforms)}else if(e.variants)for(var r in e.variants){var s=e.variants[r];Gs.matchesTestVariant(s)&&t.applyTransforms(e.name,r,s.transforms)}}))}),e)})),this.instance=e,this.instance.onFeatureFlags((e=>{this.onFeatureFlags(e)}))}onFeatureFlags(e){if(this._is_bot())Gs.logInfo("Refusing to render web experiment since the viewer is a likely bot");else if(!this.instance.config.disable_web_experiments){if(O(this._flagToExperiments))return this._flagToExperiments=new Map,this.loadIfEnabled(),void this.previewWebExperiment();Gs.logInfo("applying feature flags",e),e.forEach((e=>{var t;if(this._flagToExperiments&&null!==(t=this._flagToExperiments)&&void 0!==t&&t.has(e)){var i,n=this.instance.getFeatureFlag(e),r=null===(i=this._flagToExperiments)||void 0===i?void 0:i.get(e);n&&null!=r&&r.variants[n]&&this.applyTransforms(r.name,n,r.variants[n].transforms)}}))}}previewWebExperiment(){var e=Gs.getWindowLocation();if(null!=e&&e.search){var t=bt(null==e?void 0:e.search,"__experiment_id"),i=bt(null==e?void 0:e.search,"__experiment_variant");t&&i&&(Gs.logInfo("previewing web experiments ".concat(t," && ").concat(i)),this.getWebExperiments((e=>{this.showPreviewWebExperiment(parseInt(t),i,e)}),!1,!0))}}loadIfEnabled(){this.instance.config.disable_web_experiments||this.getWebExperimentsAndEvaluateDisplayLogic()}getWebExperiments(e,t,i){if(this.instance.config.disable_web_experiments&&!i)return e([]);var n=this.instance.get_property("$web_experiments");if(n&&!t)return e(n);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/web_experiments/?token=".concat(this.instance.config.token)),method:"GET",callback:t=>{if(200!==t.statusCode||!t.json)return e([]);var i=t.json.experiments||[];return e(i)}})}showPreviewWebExperiment(e,t,i){var n=i.filter((t=>t.id===e));n&&n.length>0&&(Gs.logInfo("Previewing web experiment [".concat(n[0].name,"] with variant [").concat(t,"]")),this.applyTransforms(n[0].name,t,n[0].variants[t].transforms))}static matchesTestVariant(e){return!O(e.conditions)&&Gs.matchUrlConditions(e)&&Gs.matchUTMConditions(e)}static matchUrlConditions(e){var t;if(O(e.conditions)||O(null===(t=e.conditions)||void 0===t?void 0:t.url))return!0;var i,n,r,s=Gs.getWindowLocation();return!!s&&(null===(i=e.conditions)||void 0===i||!i.url||zs[null!==(n=null===(r=e.conditions)||void 0===r?void 0:r.urlMatchType)&&void 0!==n?n:"icontains"](e.conditions.url,s))}static getWindowLocation(){return null==r?void 0:r.location}static matchUTMConditions(e){var t;if(O(e.conditions)||O(null===(t=e.conditions)||void 0===t?void 0:t.utm))return!0;var i=yi.campaignParams();if(i.utm_source){var n,r,s,o,a,l,c,u,d,h,f,p,g,v,_,m,b=null===(n=e.conditions)||void 0===n||null===(r=n.utm)||void 0===r||!r.utm_campaign||(null===(s=e.conditions)||void 0===s||null===(o=s.utm)||void 0===o?void 0:o.utm_campaign)==i.utm_campaign,y=null===(a=e.conditions)||void 0===a||null===(l=a.utm)||void 0===l||!l.utm_source||(null===(c=e.conditions)||void 0===c||null===(u=c.utm)||void 0===u?void 0:u.utm_source)==i.utm_source,w=null===(d=e.conditions)||void 0===d||null===(h=d.utm)||void 0===h||!h.utm_medium||(null===(f=e.conditions)||void 0===f||null===(p=f.utm)||void 0===p?void 0:p.utm_medium)==i.utm_medium,k=null===(g=e.conditions)||void 0===g||null===(v=g.utm)||void 0===v||!v.utm_term||(null===(_=e.conditions)||void 0===_||null===(m=_.utm)||void 0===m?void 0:m.utm_term)==i.utm_term;return b&&w&&k&&y}return!1}static logInfo(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];H.info("[WebExperiments] ".concat(e),i)}applyTransforms(e,t,i){this._is_bot()?Gs.logInfo("Refusing to render web experiment since the viewer is a likely bot"):"control"!==t?i.forEach((i=>{if(i.selector){var n;Gs.logInfo("applying transform of variant ".concat(t," for experiment ").concat(e," "),i);var r=null===(n=document)||void 0===n?void 0:n.querySelectorAll(i.selector);null==r||r.forEach((e=>{var t=e;i.attributes&&i.attributes.forEach((e=>{switch(e.name){case"text":t.innerText=e.value;break;case"html":t.innerHTML=e.value;break;case"cssClass":t.className=e.value;break;default:t.setAttribute(e.name,e.value)}})),i.text&&(t.innerText=i.text),i.html&&(t.parentElement?t.parentElement.innerHTML=i.html:t.innerHTML=i.html),i.css&&t.setAttribute("style",i.css)}))}})):Gs.logInfo("Control variants leave the page unmodified.")}_is_bot(){return c&&this.instance?ys(c,this.instance.config.custom_blocked_useragents):void 0}}class Vs{constructor(e){this.instance=e}sendExceptionEvent(e){this.instance.capture("$exception",e,{_noTruncate:!0,_batchKey:"exceptionEvent"})}}var Ws=["$set_once","$set"],Ys=U("[SiteApps]");class Js{constructor(e){this.instance=e,this.bufferedInvocations=[],this.apps={}}get isEnabled(){return!!this.instance.config.opt_in_site_apps}eventCollector(e,t){if(t){var i=this.globalsForEvent(t);this.bufferedInvocations.push(i),this.bufferedInvocations.length>1e3&&(this.bufferedInvocations=this.bufferedInvocations.slice(10))}}get siteAppLoaders(){var e,t;return null===(e=v._POSTHOG_REMOTE_CONFIG)||void 0===e||null===(t=e[this.instance.config.token])||void 0===t?void 0:t.siteApps}init(){if(this.isEnabled){var e=this.instance._addCaptureHook(this.eventCollector.bind(this));this.stopBuffering=()=>{e(),this.bufferedInvocations=[],this.stopBuffering=void 0}}}globalsForEvent(e){var t,i,n,r,s,o,a;if(!e)throw new Error("Event payload is required");var l={},c=this.instance.get_property("$groups")||[],u=this.instance.get_property("$stored_group_properties")||{};for(var[d,h]of Object.entries(u))l[d]={id:c[d],type:d,properties:h};var{$set_once:f,$set:p}=e;return{event:V(V({},Y(e,Ws)),{},{properties:V(V(V({},e.properties),p?{$set:V(V({},null!==(t=null===(i=e.properties)||void 0===i?void 0:i.$set)&&void 0!==t?t:{}),p)}:{}),f?{$set_once:V(V({},null!==(n=null===(r=e.properties)||void 0===r?void 0:r.$set_once)&&void 0!==n?n:{}),f)}:{}),elements_chain:null!==(s=null===(o=e.properties)||void 0===o?void 0:o.$elements_chain)&&void 0!==s?s:"",distinct_id:null===(a=e.properties)||void 0===a?void 0:a.distinct_id}),person:{properties:this.instance.get_property("$stored_person_properties")},groups:l}}setupSiteApp(e){var t={id:e.id,loaded:!1,errored:!1};this.apps[e.id]=t;var i=i=>{var n;for(var r of(this.apps[e.id].errored=!i,this.apps[e.id].loaded=!0,Ys.info("Site app with id ".concat(e.id," ").concat(i?"loaded":"errored")),i&&this.bufferedInvocations.length&&(Ys.info("Processing ".concat(this.bufferedInvocations.length," events for site app with id ").concat(e.id)),this.bufferedInvocations.forEach((e=>{var i;return null===(i=t.processEvent)||void 0===i?void 0:i.call(t,e)}))),Object.values(this.apps)))if(!r.loaded)return;null===(n=this.stopBuffering)||void 0===n||n.call(this)};try{var{processEvent:n}=e.init({posthog:this.instance,callback:e=>{i(e)}});n&&(t.processEvent=n)}catch(t){Ys.error("Error while initializing PostHog app with config id ".concat(e.id),t),i(!1)}}onCapturedEvent(e){if(0!==Object.keys(this.apps).length){var t=this.globalsForEvent(e);for(var i of Object.values(this.apps))try{var n;null===(n=i.processEvent)||void 0===n||n.call(i,t)}catch(t){Ys.error("Error while processing event ".concat(e.event," for site app ").concat(i.id),t)}}}onRemoteConfig(e){var t,i,n,r=this;if(null!==(t=this.siteAppLoaders)&&void 0!==t&&t.length){if(!this.isEnabled)return void Ys.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.');for(var s of this.siteAppLoaders)this.setupSiteApp(s);this.instance.on("eventCaptured",(e=>this.onCapturedEvent(e)))}else if(null===(i=this.stopBuffering)||void 0===i||i.call(this),null!==(n=e.siteApps)&&void 0!==n&&n.length)if(this.isEnabled){var o=function(e,t){var i,n;v["__$$ph_site_app_".concat(e)]=r.instance,null===(i=v.__PosthogExtensions__)||void 0===i||null===(n=i.loadSiteApp)||void 0===n||n.call(i,r.instance,t,(t=>{if(t)return Ys.error("Error while initializing PostHog app with config id ".concat(e),t)}))};for(var{id:a,url:l}of e.siteApps)o(a,l)}else Ys.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}function Xs(e,t,i){return ur({distinct_id:e,userPropertiesToSet:t,userPropertiesToSetOnce:i})}var Ks={},Qs=()=>{},Zs="posthog",eo=!ar&&-1===(null==g?void 0:g.indexOf("MSIE"))&&-1===(null==g?void 0:g.indexOf("Mozilla")),to=()=>{var e;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:se(null==u?void 0:u.location),persistence:"localStorage+cookie",persistence_name:"",loaded:Qs,save_campaign_params:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:d&&L(null==d?void 0:d.search)&&-1!==d.search.indexOf("__posthog_debug=true")||!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_web_experiments:!0,disable_surveys:!1,disable_external_dependency_loading:!1,enable_recording_console_log:void 0,secure_cookie:"https:"===(null==r||null===(e=r.location)||void 0===e?void 0:e.protocol),ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,mask_personal_data_properties:!1,custom_personal_data_properties:[],advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:e=>{var t="Bad HTTP status: "+e.statusCode+" "+e.text;H.error(t)},get_device_id:e=>e,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"identified_only",before_send:void 0,_onCapture:Qs}},io=e=>{var t={};M(e.process_person)||(t.person_profiles=e.process_person),M(e.xhr_headers)||(t.request_headers=e.xhr_headers),M(e.cookie_name)||(t.persistence_name=e.cookie_name),M(e.disable_cookie)||(t.disable_persistence=e.disable_cookie),M(e.store_google)||(t.save_campaign_params=e.store_google),M(e.verbose)||(t.debug=e.verbose);var i=Q({},t,e);return P(e.property_blacklist)&&(M(e.property_denylist)?i.property_denylist=e.property_blacklist:P(e.property_denylist)?i.property_denylist=[...e.property_blacklist,...e.property_denylist]:H.error("Invalid value for property_denylist config: "+e.property_denylist)),i};class no{constructor(){W(this,"__forceAllowLocalhost",!1)}get _forceAllowLocalhost(){return this.__forceAllowLocalhost}set _forceAllowLocalhost(e){H.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=e}}class ro{get decideEndpointWasHit(){var e,t;return null!==(e=null===(t=this.featureFlags)||void 0===t?void 0:t.hasLoadedFlags)&&void 0!==e&&e}constructor(){W(this,"webPerformance",new no),W(this,"version",_.LIB_VERSION),W(this,"_internalEventEmitter",new as),this.config=to(),this.SentryIntegration=kr,this.sentryIntegration=e=>function(e,t){var i=wr(e,t);return{name:yr,processEvent:e=>i(e)}}(this,e),this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this._initialPersonProfilesConfig=null,this._cachedIdentify=null,this.featureFlags=new Xe(this),this.toolbar=new sr(this),this.scrollManager=new Ts(this),this.pageViewManager=new Sr(this),this.surveys=new fs(this),this.experiments=new Gs(this),this.exceptions=new Vs(this),this.rateLimiter=new gs(this),this.requestRouter=new br(this),this.consent=new Ds(this),this.people={set:(e,t,i)=>{var n=L(e)?{[e]:t}:e;this.setPersonProperties(n),null==i||i({})},set_once:(e,t,i)=>{var n=L(e)?{[e]:t}:e;this.setPersonProperties(void 0,n),null==i||i({})}},this.on("eventCaptured",(e=>H.info('send "'.concat(null==e?void 0:e.event,'"'),e)))}init(e,t,i){if(i&&i!==Zs){var n,r=null!==(n=Ks[i])&&void 0!==n?n:new ro;return r._init(e,t,i),Ks[i]=r,Ks[Zs][i]=r,r}return this._init(e,t,i)}_init(e){var t,i,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;if(M(e)||A(e))return H.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return H.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],s.person_profiles&&(this._initialPersonProfilesConfig=s.person_profiles),this.set_config(Q({},to(),io(s),{name:o,token:e})),this.config.on_xhr_error&&H.error("on_xhr_error is deprecated. Use on_request_error instead"),this.compression=s.disable_compression?void 0:n.GZipJS,this.persistence=new ki(this.config),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new ki(V(V({},this.config),{},{persistence:"sessionStorage"}));var a=V({},this.persistence.props),l=V({},this.sessionPersistence.props);if(this._requestQueue=new or((e=>this._send_retriable_request(e))),this._retryQueue=new pr(this),this.__request_queue=[],this.config.__preview_experimental_cookieless_mode||(this.sessionManager=new _r(this),this.sessionPropsManager=new _s(this,this.sessionManager,this.persistence)),new Ns(this).startIfEnabledOrStop(),this.siteApps=new Js(this),null===(t=this.siteApps)||void 0===t||t.init(),this.config.__preview_experimental_cookieless_mode||(this.sessionRecording=new Qn(this),this.sessionRecording.startIfEnabledOrStop()),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new As(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new Ps(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new js(this),this.exceptionObserver=new Bs(this),this.exceptionObserver.startIfEnabled(),this.deadClicksAutocapture=new xs(this,Ss),this.deadClicksAutocapture.startIfEnabled(),_.DEBUG=_.DEBUG||this.config.debug,_.DEBUG&&H.info("Starting in debug mode",{this:this,config:s,thisC:V({},this.config),p:a,s:l}),this._sync_opt_out_with_persistence(),void 0!==(null===(i=s.bootstrap)||void 0===i?void 0:i.distinctID)){var c,u,d=this.config.get_device_id(nt()),h=null!==(c=s.bootstrap)&&void 0!==c&&c.isIdentifiedID?d:s.bootstrap.distinctID;this.persistence.set_property($e,null!==(u=s.bootstrap)&&void 0!==u&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:s.bootstrap.distinctID,$device_id:h})}if(this._hasBootstrappedFeatureFlags()){var f,p,g=Object.keys((null===(f=s.bootstrap)||void 0===f?void 0:f.featureFlags)||{}).filter((e=>{var t,i;return!(null===(t=s.bootstrap)||void 0===t||null===(i=t.featureFlags)||void 0===i||!i[e])})).reduce(((e,t)=>{var i,n;return e[t]=(null===(i=s.bootstrap)||void 0===i||null===(n=i.featureFlags)||void 0===n?void 0:n[t])||!1,e}),{}),v=Object.keys((null===(p=s.bootstrap)||void 0===p?void 0:p.featureFlagPayloads)||{}).filter((e=>g[e])).reduce(((e,t)=>{var i,n,r,o;return null!==(i=s.bootstrap)&&void 0!==i&&null!==(n=i.featureFlagPayloads)&&void 0!==n&&n[t]&&(e[t]=null===(r=s.bootstrap)||void 0===r||null===(o=r.featureFlagPayloads)||void 0===o?void 0:o[t]),e}),{});this.featureFlags.receivedFeatureFlags({featureFlags:g,featureFlagPayloads:v})}if(this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:je,$device_id:null},"");else if(!this.get_distinct_id()){var m=this.config.get_device_id(nt());this.register_once({distinct_id:m,$device_id:m},""),this.persistence.set_property($e,"anonymous")}return ae(r,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this),{passive:!1}),this.toolbar.maybeLoadToolbar(),s.segment?function(e,t){var i=e.config.segment;if(!i)return t();!function(e,t){var i=e.config.segment;if(!i)return t();var n=i=>{var n=()=>i.anonymousId()||nt();e.config.get_device_id=n,i.id()&&(e.register({distinct_id:i.id(),$device_id:n()}),e.persistence.set_property($e,"identified")),t()},r=i.user();"then"in r&&T(r.then)?r.then((e=>n(e))):n(r)}(e,(()=>{i.register((e=>{Promise&&Promise.resolve||Er.warn("This browser does not have Promise support, and can not use the segment integration");var t=(t,i)=>{var n;if(!i)return t;t.event.userId||t.event.anonymousId===e.get_distinct_id()||(Er.info("No userId set, resetting PostHog"),e.reset()),t.event.userId&&t.event.userId!==e.get_distinct_id()&&(Er.info("UserId set, identifying with PostHog"),e.identify(t.event.userId));var r=e._calculate_event_properties(i,null!==(n=t.event.properties)&&void 0!==n?n:{},new Date);return t.event.properties=Object.assign({},r,t.event.properties),t};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:e=>t(e,e.event.event),page:e=>t(e,"$pageview"),identify:e=>t(e,"$identify"),screen:e=>t(e,"$screen")}})(e)).then((()=>{t()}))}))}(this,(()=>this._loaded())):this._loaded(),T(this.config._onCapture)&&this.config._onCapture!==Qs&&(H.warn("onCapture is deprecated. Please use `before_send` instead"),this.on("eventCaptured",(e=>this.config._onCapture(e.event,e)))),this}_onRemoteConfig(e){var t,i,r,s,o,a,l,c;if(!u||!u.body)return H.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((()=>{this._onRemoteConfig(e)}),500);this.compression=void 0,e.supportedCompression&&!this.config.disable_compression&&(this.compression=w(e.supportedCompression,n.GZipJS)?n.GZipJS:w(e.supportedCompression,n.Base64)?n.Base64:void 0),null!==(t=e.analytics)&&void 0!==t&&t.endpoint&&(this.analyticsDefaultEndpoint=e.analytics.endpoint),this.set_config({person_profiles:this._initialPersonProfilesConfig?this._initialPersonProfilesConfig:"identified_only"}),null===(i=this.siteApps)||void 0===i||i.onRemoteConfig(e),null===(r=this.sessionRecording)||void 0===r||r.onRemoteConfig(e),null===(s=this.autocapture)||void 0===s||s.onRemoteConfig(e),null===(o=this.heatmaps)||void 0===o||o.onRemoteConfig(e),this.surveys.onRemoteConfig(e),null===(a=this.webVitalsAutocapture)||void 0===a||a.onRemoteConfig(e),null===(l=this.exceptionObserver)||void 0===l||l.onRemoteConfig(e),null===(c=this.deadClicksAutocapture)||void 0===c||c.onRemoteConfig(e)}_loaded(){try{this.config.loaded(this)}catch(e){H.critical("`loaded` function failed",e)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((()=>{this.consent.isOptedIn()&&this._captureInitialPageview()}),1),new er(this).load(),this.featureFlags.decide()}_start_queue_if_opted_in(){var e;this.has_opted_out_capturing()||this.config.request_batching&&(null===(e=this._requestQueue)||void 0===e||e.enable())}_dom_loaded(){this.has_opted_out_capturing()||X(this.__request_queue,(e=>this._send_retriable_request(e))),this.__request_queue=[],this._start_queue_if_opted_in()}_handle_unload(){var e,t;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),null===(e=this._requestQueue)||void 0===e||e.unload(),null===(t=this._retryQueue)||void 0===t||t.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}_send_request(e){this.__loaded&&(eo?this.__request_queue.push(e):this.rateLimiter.isServerRateLimited(e.batchKey)||(e.transport=e.transport||this.config.api_transport,e.url=cr(e.url,{ip:this.config.ip?1:0}),e.headers=V({},this.config.request_headers),e.compression="best-available"===e.compression?this.compression:e.compression,e.fetchOptions=e.fetchOptions||this.config.fetch_options,(e=>{var t,i,n,r=V({},e);r.timeout=r.timeout||6e4,r.url=cr(r.url,{_:(new Date).getTime().toString(),ver:_.LIB_VERSION,compression:r.compression});var s=null!==(t=r.transport)&&void 0!==t?t:"fetch",o=null!==(i=null===(n=oe(hr,(e=>e.transport===s)))||void 0===n?void 0:n.method)&&void 0!==i?i:hr[0].method;if(!o)throw new Error("No available transport method");o(r)})(V(V({},e),{},{callback:t=>{var i,n,r;this.rateLimiter.checkForLimiting(t),t.statusCode>=400&&(null===(n=(r=this.config).on_request_error)||void 0===n||n.call(r,t)),null===(i=e.callback)||void 0===i||i.call(e,t)}}))))}_send_retriable_request(e){this._retryQueue?this._retryQueue.retriableRequest(e):this._send_request(e)}_execute_array(e){var t,i=[],n=[],r=[];X(e,(e=>{e&&(t=e[0],P(t)?r.push(e):T(e)?e.call(this):P(e)&&"alias"===t?i.push(e):P(e)&&-1!==t.indexOf("capture")&&T(this[t])?r.push(e):n.push(e))}));var s=function(e,t){X(e,(function(e){if(P(e[0])){var i=t;K(e,(function(e){i=i[e[0]].apply(i,e.slice(1))}))}else this[e[0]].apply(this,e.slice(1))}),t)};s(i,this),s(n,this),s(r,this)}_hasBootstrappedFeatureFlags(){var e,t;return(null===(e=this.config.bootstrap)||void 0===e?void 0:e.featureFlags)&&Object.keys(null===(t=this.config.bootstrap)||void 0===t?void 0:t.featureFlags).length>0||!1}push(e){this._execute_array([e])}capture(e,t,i){var n;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!M(e)&&L(e)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var r=null!=i&&i.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(null==r||!r.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.save_campaign_params&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.save_campaign_params||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,o=(null==i?void 0:i.timestamp)||s,a=nt(),l={uuid:a,event:e,properties:this._calculate_event_properties(e,t||{},o,a)};r&&(l.properties.$lib_rate_limit_remaining_tokens=r.remainingTokens),(null==i?void 0:i.$set)&&(l.$set=null==i?void 0:i.$set);var c=this._calculate_set_once_properties(null==i?void 0:i.$set_once);c&&(l.$set_once=c),(l=function(e,t){return i=e,n=e=>L(e)&&!$(t)?e.slice(0,t):e,r=new Set,function e(t,i){return t!==Object(t)?n?n(t):t:r.has(t)?void 0:(r.add(t),P(t)?(s=[],X(t,(t=>{s.push(e(t))}))):(s={},K(t,((t,i)=>{r.has(t)||(s[i]=e(t,i))}))),s);var s}(i);var i,n,r}(l,null!=i&&i._noTruncate?null:this.config.properties_string_max_length)).timestamp=o,M(null==i?void 0:i.timestamp)||(l.properties.$event_time_override_provided=!0,l.properties.$event_time_override_system_time=s);var u=V(V({},l.properties.$set),l.$set);if(F(u)||this.setPersonPropertiesForFlags(u),!O(this.config.before_send)){var d=this._runBeforeSend(l);if(!d)return;l=d}this._internalEventEmitter.emit("eventCaptured",l);var h={method:"POST",url:null!==(n=null==i?void 0:i._url)&&void 0!==n?n:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:l,compression:"best-available",batchKey:null==i?void 0:i._batchKey};return!this.config.request_batching||i&&(null==i||!i._batchKey)||null!=i&&i.send_instantly?this._send_retriable_request(h):this._requestQueue.enqueue(h),l}H.critical("This capture call is ignored due to client rate limiting.")}}else H.error("No event name provided to posthog.capture")}else H.uninitializedWarning("posthog.capture")}_addCaptureHook(e){return this.on("eventCaptured",(t=>e(t.event,t)))}_calculate_event_properties(e,t,i,n){if(i=i||new Date,!this.persistence||!this.sessionPersistence)return t;var r=this.persistence.remove_event_timer(e),s=V({},t);if(s.token=this.config.token,this.config.__preview_experimental_cookieless_mode&&(s.$cookieless_mode=!0),"$snapshot"===e){var o=V(V({},this.persistence.properties()),this.sessionPersistence.properties());return s.distinct_id=o.distinct_id,(!L(s.distinct_id)&&!N(s.distinct_id)||A(s.distinct_id))&&H.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),s}var a,l=yi.properties({maskPersonalDataProperties:this.config.mask_personal_data_properties,customPersonalDataProperties:this.config.custom_personal_data_properties});if(this.sessionManager){var{sessionId:c,windowId:d}=this.sessionManager.checkAndGetSessionAndWindowId();s.$session_id=c,s.$window_id=d}if(this.sessionRecording&&(s.$recording_status=this.sessionRecording.status),this.requestRouter.region===gr.CUSTOM&&(s.$lib_custom_api_host=this.config.api_host),a="$pageview"===e?this.pageViewManager.doPageView(i,n):"$pageleave"===e?this.pageViewManager.doPageLeave(i):this.pageViewManager.doEvent(),s=Q(s,a),"$pageview"===e&&u&&(s.title=u.title),!M(r)){var h=i.getTime()-r;s.$duration=parseFloat((h/1e3).toFixed(3))}g&&this.config.opt_out_useragent_filter&&(s.$browser_type=this._is_bot()?"bot":"browser"),(s=Q({},l,this.persistence.properties(),this.sessionPersistence.properties(),s)).$is_identified=this._isIdentified(),P(this.config.property_denylist)?K(this.config.property_denylist,(function(e){delete s[e]})):H.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var f=this.config.sanitize_properties;f&&(H.error("sanitize_properties is deprecated. Use before_send instead"),s=f(s,e));var p=this._hasPersonProcessing();return s.$process_person_profile=p,p&&this._requirePersonProcessing("_calculate_event_properties"),s}_calculate_set_once_properties(e){if(!this.persistence||!this._hasPersonProcessing())return e;var t=Q({},this.persistence.get_initial_props(),e||{}),i=this.config.sanitize_properties;return i&&(H.error("sanitize_properties is deprecated. Use before_send instead"),t=i(t,"$set_once")),F(t)?void 0:t}register(e,t){var i;null===(i=this.persistence)||void 0===i||i.register(e,t)}register_once(e,t,i){var n;null===(n=this.persistence)||void 0===n||n.register_once(e,t,i)}register_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.register(e)}unregister(e){var t;null===(t=this.persistence)||void 0===t||t.unregister(e)}unregister_for_session(e){var t;null===(t=this.sessionPersistence)||void 0===t||t.unregister(e)}_register_single(e,t){this.register({[e]:t})}getFeatureFlag(e,t){return this.featureFlags.getFeatureFlag(e,t)}getFeatureFlagPayload(e){var t=this.featureFlags.getFeatureFlagPayload(e);try{return JSON.parse(t)}catch(e){return t}}isFeatureEnabled(e,t){return this.featureFlags.isFeatureEnabled(e,t)}reloadFeatureFlags(){this.featureFlags.reloadFeatureFlags()}updateEarlyAccessFeatureEnrollment(e,t){this.featureFlags.updateEarlyAccessFeatureEnrollment(e,t)}getEarlyAccessFeatures(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(e,t)}on(e,t){return this._internalEventEmitter.on(e,t)}onFeatureFlags(e){return this.featureFlags.onFeatureFlags(e)}onSessionId(e){var t,i;return null!==(t=null===(i=this.sessionManager)||void 0===i?void 0:i.onSessionId(e))&&void 0!==t?t:()=>{}}getSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getSurveys(e,t)}getActiveMatchingSurveys(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.surveys.getActiveMatchingSurveys(e,t)}renderSurvey(e,t){this.surveys.renderSurvey(e,t)}canRenderSurvey(e){this.surveys.canRenderSurvey(e)}getNextSurveyStep(e,t,i){return this.surveys.getNextSurveyStep(e,t,i)}identify(e,t,i){if(!this.__loaded||!this.persistence)return H.uninitializedWarning("posthog.identify");if(N(e)&&(e=e.toString(),H.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),e){if(["distinct_id","distinctid"].includes(e.toLowerCase()))H.critical('The string "'.concat(e,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var n=this.get_distinct_id();if(this.register({$user_id:e}),!this.get_property("$device_id")){var r=n;this.register_once({$had_persisted_distinct_id:!0,$device_id:r},"")}e!==n&&e!==this.get_property(ce)&&(this.unregister(ce),this.register({distinct_id:e}));var s="anonymous"===(this.persistence.get_property($e)||"anonymous");e!==n&&s?(this.persistence.set_property($e,"identified"),this.setPersonPropertiesForFlags(t||{},!1),this.capture("$identify",{distinct_id:e,$anon_distinct_id:n},{$set:t||{},$set_once:i||{}}),this.featureFlags.setAnonymousDistinctId(n),this._cachedIdentify=Xs(e,t,i)):(t||i)&&(this._cachedIdentify!==Xs(e,t,i)?(this.setPersonProperties(t,i),this._cachedIdentify=Xs(e,t,i)):H.info("A duplicate posthog.identify call was made with the same properties. It has been ignored.")),e!==n&&(this.reloadFeatureFlags(),this.unregister(Ae))}}else H.error("Unique user id has not been set in posthog.identify")}setPersonProperties(e,t){(e||t)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(e||{}),this.capture("$set",{$set:e||{},$set_once:t||{}}))}group(e,t,i){if(e&&t){if(this._requirePersonProcessing("posthog.group")){var n=this.getGroups();n[e]!==t&&this.resetGroupPropertiesForFlags(e),this.register({$groups:V(V({},n),{},{[e]:t})}),i&&(this.capture("$groupidentify",{$group_type:e,$group_key:t,$group_set:i}),this.setGroupPropertiesForFlags({[e]:i})),n[e]===t||i||this.reloadFeatureFlags()}}else H.error("posthog.group requires a group type and group key")}resetGroups(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}setPersonPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.featureFlags.setPersonPropertiesForFlags(e,t)}resetPersonPropertiesForFlags(){this.featureFlags.resetPersonPropertiesForFlags()}setGroupPropertiesForFlags(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(e,t)}resetGroupPropertiesForFlags(e){this.featureFlags.resetGroupPropertiesForFlags(e)}reset(e){var t,i,n,r;if(H.info("reset"),!this.__loaded)return H.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");if(this.consent.reset(),null===(t=this.persistence)||void 0===t||t.clear(),null===(i=this.sessionPersistence)||void 0===i||i.clear(),this.surveys.reset(),null===(n=this.persistence)||void 0===n||n.set_property($e,"anonymous"),null===(r=this.sessionManager)||void 0===r||r.resetSessionId(),this._cachedIdentify=null,this.config.__preview_experimental_cookieless_mode)this.register_once({distinct_id:je,$device_id:null},"");else{var o=this.config.get_device_id(nt());this.register_once({distinct_id:o,$device_id:e?o:s},"")}this.register({$last_posthog_reset:(new Date).toISOString()},1)}get_distinct_id(){return this.get_property("distinct_id")}getGroups(){return this.get_property("$groups")||{}}get_session_id(){var e,t;return null!==(e=null===(t=this.sessionManager)||void 0===t?void 0:t.checkAndGetSessionAndWindowId(!0).sessionId)&&void 0!==e?e:""}get_session_replay_url(e){if(!this.sessionManager)return"";var{sessionId:t,sessionStartTimestamp:i}=this.sessionManager.checkAndGetSessionAndWindowId(!0),n=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(t));if(null!=e&&e.withTimestamp&&i){var r,s=null!==(r=e.timestampLookBack)&&void 0!==r?r:10;if(!i)return n;var o=Math.max(Math.floor(((new Date).getTime()-i)/1e3)-s,0);n+="?t=".concat(o)}return n}alias(e,t){return e===this.get_property(le)?(H.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(M(t)&&(t=this.get_distinct_id()),e!==t?(this._register_single(ce,e),this.capture("$create_alias",{alias:e,distinct_id:t})):(H.warn("alias matches current distinct_id - skipping api call."),this.identify(e),-1)):void 0}set_config(e){var t,i,n,r,s=V({},this.config);R(e)&&(Q(this.config,io(e)),null===(t=this.persistence)||void 0===t||t.update_config(this.config,s),this.sessionPersistence="sessionStorage"===this.config.persistence||"memory"===this.config.persistence?this.persistence:new ki(V(V({},this.config),{},{persistence:"sessionStorage"})),ct.is_supported()&&"true"===ct.get("ph_debug")&&(this.config.debug=!0),this.config.debug&&(_.DEBUG=!0,H.info("set_config",{config:e,oldConfig:s,newConfig:V({},this.config)})),null===(i=this.sessionRecording)||void 0===i||i.startIfEnabledOrStop(),null===(n=this.autocapture)||void 0===n||n.startIfEnabled(),null===(r=this.heatmaps)||void 0===r||r.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}startSessionRecording(e){var t,i,n,r,s,o=!0===e,a={sampling:o||!(null==e||!e.sampling),linked_flag:o||!(null==e||!e.linked_flag),url_trigger:o||!(null==e||!e.url_trigger),event_trigger:o||!(null==e||!e.event_trigger)};Object.values(a).some(Boolean)&&(null===(t=this.sessionManager)||void 0===t||t.checkAndGetSessionAndWindowId(),a.sampling&&(null===(i=this.sessionRecording)||void 0===i||i.overrideSampling()),a.linked_flag&&(null===(n=this.sessionRecording)||void 0===n||n.overrideLinkedFlag()),a.url_trigger&&(null===(r=this.sessionRecording)||void 0===r||r.overrideTrigger("url")),a.event_trigger&&(null===(s=this.sessionRecording)||void 0===s||s.overrideTrigger("event")));this.set_config({disable_session_recording:!1})}stopSessionRecording(){this.set_config({disable_session_recording:!0})}sessionRecordingStarted(){var e;return!(null===(e=this.sessionRecording)||void 0===e||!e.started)}captureException(e,t){var i,n=new Error("PostHog syntheticException"),r=T(null===(i=v.__PosthogExtensions__)||void 0===i?void 0:i.parseErrorAsProperties)?V(V({},v.__PosthogExtensions__.parseErrorAsProperties([e.message,void 0,void 0,void 0,e],{syntheticException:n})),t):V({$exception_level:"error",$exception_list:[{type:e.name,value:e.message,mechanism:{handled:!0,synthetic:!1}}]},t);this.exceptions.sendExceptionEvent(r)}loadToolbar(e){return this.toolbar.loadToolbar(e)}get_property(e){var t;return null===(t=this.persistence)||void 0===t?void 0:t.props[e]}getSessionProperty(e){var t;return null===(t=this.sessionPersistence)||void 0===t?void 0:t.props[e]}toString(){var e,t=null!==(e=this.config.name)&&void 0!==e?e:Zs;return t!==Zs&&(t=Zs+"."+t),t}_isIdentified(){var e,t;return"identified"===(null===(e=this.persistence)||void 0===e?void 0:e.get_property($e))||"identified"===(null===(t=this.sessionPersistence)||void 0===t?void 0:t.get_property($e))}_hasPersonProcessing(){var e,t,i,n;return!("never"===this.config.person_profiles||"identified_only"===this.config.person_profiles&&!this._isIdentified()&&F(this.getGroups())&&(null===(e=this.persistence)||void 0===e||null===(t=e.props)||void 0===t||!t[ce])&&(null===(i=this.persistence)||void 0===i||null===(n=i.props)||void 0===n||!n[He]))}_shouldCapturePageleave(){return!0===this.config.capture_pageleave||"if_capture_pageview"===this.config.capture_pageleave&&this.config.capture_pageview}createPersonProfile(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}_requirePersonProcessing(e){return"never"===this.config.person_profiles?(H.error(e+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(He,!0),!0)}_sync_opt_out_with_persistence(){var e,t,i,n,r=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,o=this.config.disable_persistence||r&&!!s;(null===(e=this.persistence)||void 0===e?void 0:e.disabled)!==o&&(null===(i=this.persistence)||void 0===i||i.set_disabled(o)),(null===(t=this.sessionPersistence)||void 0===t?void 0:t.disabled)!==o&&(null===(n=this.sessionPersistence)||void 0===n||n.set_disabled(o))}opt_in_capturing(e){var t;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(M(null==e?void 0:e.captureEventName)||null!=e&&e.captureEventName)&&this.capture(null!==(t=null==e?void 0:e.captureEventName)&&void 0!==t?t:"$opt_in",null==e?void 0:e.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}opt_out_capturing(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}has_opted_in_capturing(){return this.consent.isOptedIn()}has_opted_out_capturing(){return this.consent.isOptedOut()}clear_opt_in_out_capturing(){this.consent.reset(),this._sync_opt_out_with_persistence()}_is_bot(){return c?ys(c,this.config.custom_blocked_useragents):void 0}_captureInitialPageview(){u&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:u.title},{send_instantly:!0}))}debug(e){!1===e?(null==r||r.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(null==r||r.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}_runBeforeSend(e){if(O(this.config.before_send))return e;var t=P(this.config.before_send)?this.config.before_send:[this.config.before_send],i=e;for(var n of t){if(i=n(i),O(i)){var r="Event '".concat(e.event,"' was rejected in beforeSend function");return q(e.event)?H.warn("".concat(r,". This can cause unexpected behavior.")):H.info(r),null}i.properties&&!F(i.properties)||H.warn("Event '".concat(e.event,"' has no properties after beforeSend function, this is likely an error."))}return i}getPageViewId(){var e;return null===(e=this.pageViewManager._currentPageview)||void 0===e?void 0:e.pageViewId}}!function(e,t){for(var i=0;i<t.length;i++)e.prototype[t[i]]=ie(e.prototype[t[i]])}(ro,["identify"]);var so,oo=(so=Ks[Zs]=new ro,function(){function e(){e.done||(e.done=!0,eo=!1,K(Ks,(function(e){e._dom_loaded()})))}null!=u&&u.addEventListener?"complete"===u.readyState?e():ae(u,"DOMContentLoaded",e,{capture:!1}):r&&H.error("Browser doesn't support `document.addEventListener` so PostHog couldn't be initialized")}(),so)},337:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(618),s=n(i(475)),o=n(i(777)),a=n(i(228)),l=n(i(713));class c{constructor(){this.initMenuScrollbarTransitions(),this.constrainDropdownMenuPositions(),c.initRatingColourGradient(),o.default.initCheckboxes(),c.initChevrons(),this.initLogInOut(),s.default.syncLoginUi(),c.tryRemoveAds(),this.scrollToCurrentHash(),this.overrideHashChange(),this.overrideFixedLinks(),this.initSearchValue(),this.initTracker(),this.initAppLinkMenu(),this.initRankingHoverItems()}initLogInOut(){const e=document.querySelector("#lout form");e?(e["openid.realm"].value="https://club.steam250.com",e["openid.return_to"].value=`https://club.steam250.com/steam/login?r=${location.origin+location.pathname}`,document.querySelector("#lout button").addEventListener("click",(e=>localStorage.setItem("login","sync"))),document.querySelector("#lin button").addEventListener("click",(e=>s.default.logout())),"sync"===localStorage.getItem("login")&&(localStorage.removeItem("login"),s.default.syncLogin())):console.debug("Steam user area unavailable: skipped.")}initMenuScrollbarTransitions(){const e="t11g";document.querySelectorAll("ol.menu li").forEach((t=>{const i=t.querySelector("ol");i&&(t.addEventListener("mouseenter",(t=>0===i.clientHeight&&i.classList.add(e))),t.addEventListener("mouseleave",(t=>i.classList.add(e))))})),document.querySelectorAll("ol.menu > li ol").forEach((t=>{t.addEventListener("transitionend",(i=>t.classList.remove(e))),t.addEventListener("wheel",(e=>{t.clientHeight+t.scrollTop+e.deltaY>t.scrollHeight?(t.scrollTop=t.scrollHeight,e.preventDefault()):t.scrollTop+e.deltaY<0&&(t.scrollTop=0,e.preventDefault()),e.stopPropagation()}))}))}constrainDropdownMenuPositions(){document.querySelectorAll("ol.menu > li > ol").forEach((e=>{const t=e.getBoundingClientRect();t.left<0&&(e.style.left=`calc(${getComputedStyle(e).left} - ${t.left}px)`),t.right>document.documentElement.clientWidth&&(e.style.left=`calc(${getComputedStyle(e).left} - ${t.right-document.documentElement.clientWidth}px)`)}))}scrollToCurrentHash(){addEventListener("load",(e=>this.scrollToHash(location.hash)))}overrideHashChange(){addEventListener("hashchange",(e=>this.scrollToHash(location.hash)))}overrideFixedLinks(){document.querySelectorAll(".fixedlinks a").forEach((e=>{e.addEventListener("click",(t=>{this.scrollToHash(e.hash),t.preventDefault()}))}))}scrollToHash(e){const t="highlight";if(document.querySelectorAll(".ranking [id]").forEach((e=>e.classList.remove(t))),!e)return;const i=document.querySelector("ol.menu").getBoundingClientRect().height,n=this.resolveHashTarget(e);if(n){let e=n.getBoundingClientRect().top-i;const r=document.querySelector(".applist, .main.ranking");if(r&&r.contains(n)){if(n.classList.add(t),function(e){const t=e.getBoundingClientRect();return t.top>=i&&t.left>=0&&t.bottom<=innerHeight&&t.right<=innerWidth}(n))return;e+=n.getBoundingClientRect().height/2-innerHeight/3}scrollTo(scrollX,scrollY+Math.ceil(e))}}resolveHashTarget(e){if(e.startsWith("#app/")){let[,t,i]=e.split("/",3),n=document.querySelector(`.applist a[href$="/${t}"], .ranking a[href$="/${t}"]`);return n?n.closest("[id]"):void console.error(`Couldn't find game on this ranking: "${decodeURIComponent(i)}".`)}return document.getElementById(e.substring(1))}static isLoggedIn(){return s.default.isLoggedIn()}static isClub250(){return"https://club.steam250.com"===location.origin}static syncLogin(){return s.default.syncLogin()}static syncLogout(){return s.default.syncLogout()}static syncGames(){s.default.syncGames()}static showAds(){const e=localStorage.getItem("user");if(e){const t=JSON.parse(e);return!(t.hasOwnProperty("noads")&&t.noads)}return!0}static tryRemoveAds(){c.showAds()||document.querySelectorAll("ins").forEach((e=>e.remove()))}initSearchValue(){const e=(0,r.parseParam)("q");null!==e&&document.querySelectorAll("input[name=q]").forEach((t=>t.value=e.replace(/\+/g," ")))}initTracker(){""==="MISSING_ENV_VAR".NOTRACK||l.default.init("phc_Rjmhrs656s6Say2ICy0A5xFi0HHGD38KTXxh1XI4ntD",{api_host:"//ph.steam250.com",person_profiles:"always"})}initAppLinkMenu(){const e=document.getElementById("linkmenu"),t="show";let i;document.querySelectorAll(".ranking .links").forEach((n=>{n.addEventListener("click",(r=>{e.style.top=n.offsetTop+n.offsetHeight+5+"px",e.style.left=n.offsetLeft+"px",e.querySelector("a:first-of-type > span").innerHTML=n.closest("[id]").id,e.classList.toggle(t,i!==n||void 0),n.classList.toggle(t,e.classList.contains(t)),i=n,r.preventDefault()})),n.addEventListener("blur",(i=>{e.classList.remove(t),n.classList.remove(t)}))})),document.querySelectorAll("#linkmenu a").forEach((e=>{e.addEventListener("click",(t=>{if(e.classList.contains("cp")&&(e.classList.contains("rank")&&this.copyToClipboard(i.href),e.classList.contains("app"))){const e=this.findSteamAppId(i.closest("[id]")),t=encodeURIComponent(this.findSteamAppName(i.closest("div")));this.copyToClipboard(`${location.origin}${location.pathname}#app/${e}/${t}`)}}))}))}initRankingHoverItems(){document.querySelectorAll(".compact.ranking li > .title").forEach((e=>{const t=e.appendChild(e.cloneNode(!0));t.style.pointerEvents="none",e.addEventListener("mouseenter",(e=>{t.classList.remove("animate"),t.offsetWidth,t.classList.add("animate")})),e.addEventListener("animationend",(e=>{t.classList.remove("animate")}))}))}static initRatingColourGradient(){const e=a.default.scale(["#de5854","#dfe372","#83d866"]).domain([0,60,100]);document.querySelectorAll(".rating").forEach((t=>{const[i,n]=/(\D*)(\d+%?)/.exec(t.innerText).slice(1);if(i){const e=document.createElement("span");t.innerHTML=i,e.innerHTML=n,t.insertAdjacentElement("beforeend",e),t=e}t.style.color=e(parseFloat(t.innerText)).hex()}))}static initChevrons(){document.querySelectorAll(".more-button > span:last-of-type").forEach((e=>{e.parentNode.appendChild(e.cloneNode()),e.parentNode.appendChild(e.cloneNode())}))}findSteamAppId(e){const t=e.querySelector("img[src]");if(t)return t.src.match(/\/(\d+)\//)[1]}findSteamAppName(e){return e.querySelector(".title > a").innerText}copyToClipboard(e){document.queryCommandSupported&&document.queryCommandSupported("copy")||alert("Clipboard is not supported in this browser!");const t=document.createElement("textarea");t.textContent=e,t.style.position="fixed",document.body.appendChild(t),t.select();try{return document.execCommand("copy")}catch(e){return alert("Failed to copy clipboard data."),!1}finally{document.body.removeChild(t)}}}window.S250=c,new c},777:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.Middle=0]="Middle",e[e.Right=1]="Right",e[e.Left=2]="Left"}(i||(i={}));t.default=class{static initCheckboxes(){document.querySelectorAll("[role=checkbox]").forEach((e=>{var t,n;const r=[...e.querySelectorAll("input")],s=r[0],o=s.parentNode.querySelector("span"),a=()=>(c||(c=parseFloat(getComputedStyle(o).width)),u||(u=c/3),d||(d=2*u)),l=s.go2=t=>{const n=t=>{h=t,r.filter((e=>e.value===t.toString()))[0].checked=!0,e.ariaChecked={[i.Middle]:"mixed",[i.Right]:"true",[i.Left]:"false"}[t]};a()?n(t):setTimeout((()=>a()&&n(t)))};let c,u,d,h=+(null!==(n=null===(t=r.filter((e=>e.checked))[0])||void 0===t?void 0:t.value)&&void 0!==n?n:0);l(h),s.addEventListener("click",(e=>{const t=e.clientX-o.getBoundingClientRect().x;t>=u&&t<=d?l(i.Middle):h===i.Middle?l(t>d?i.Right:i.Left):h===i.Left?l(t<u?i.Middle:i.Right):l(t>d?i.Middle:i.Left)})),e.addEventListener("keydown",(e=>{" "===e.key&&(l(++h%3),e.preventDefault())}))})),document.querySelectorAll("label[tabindex]:has(input[type=checkbox])").forEach((e=>e.addEventListener("keydown",(t=>{" "===t.key&&(e.click(),t.preventDefault())}))))}}},566:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});new(n(i(225)).default)},618:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseParam=void 0,t.parseParam=function(e){const t=RegExp("[?&]"+e+"=([^&]*)").exec(location.search);return t&&decodeURIComponent(t[1])}},475:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{l(n.next(e))}catch(e){s(e)}}function a(e){try{l(n.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static isLoggedIn(){return localStorage.hasOwnProperty("user")||localStorage.hasOwnProperty("whoami")}static logout(){document.body.insertAdjacentHTML("beforeend",`\n            <form method="post" action="https://club.steam250.com/logout" name="logout">\n                <input type="hidden" name="r" value="${location.origin+location.pathname}">\n            </form>\n        `),this.syncLogout(),document.forms.namedItem("logout").submit()}static syncLogin(){var e;return i(this,void 0,void 0,(function*(){const t=yield fetch("https://club.steam250.com/api/whoami",{credentials:"include"}),i=yield t.text();if(!t.ok)return console.error("Login sync failed:",t.status,t.statusText,i);const[n,r,s,o]=i.split("\0",4);let a=null===(e=r.match(/^(?:\d+\/[\da-z]{40}\..{3}|[\da-z]{40})/))||void 0===e?void 0:e[0];localStorage.setItem("user",JSON.stringify({id:n,avatar:a,name:a?r.substring(a.length):"ERROR",noads:"1"===s,tier:+o})),this.postClub250Message("login synced"),S250.tryRemoveAds(),this.syncLoginUi(),this.syncGames()}))}static syncLogout(){localStorage.removeItem("user"),this.postClub250Message("logout synced")}static syncGames(){this.postClub250Message("games"),addEventListener("message",(e=>{"https://club.steam250.com"===e.origin&&(console.debug("C250:",e.data),"games"===e.data.message&&(localStorage.setItem("games",e.data.games),localStorage.setItem("games.date",e.data.modified)))})),localStorage.getItem("games.date")||localStorage.removeItem("games")}static syncLoginUi(){if(this.isLoggedIn()&&(this.rewireTagLinks(),this.hideObsoleteTiers()),S250.isClub250())return;const e=document.getElementById("user");if(!e)return;const t=e.classList;t.remove("lin","lout"),t.add(this.isLoggedIn()?"lin":"lout"),this.isLoggedIn()&&this.updateUserBar()}static hideObsoleteTiers(){const e=localStorage.getItem("user");if(!e)return;const t=JSON.parse(e);t.tier&&document.querySelectorAll("ol.menu .micro.tier"+(S250.isClub250()?"":", #body .micro.tier")).forEach((e=>{const i=+[...e.classList].filter((e=>/^t\d$/.test(e)))[0].substring(1);t.tier>=i&&e.remove()}))}static rewireTagLinks(){const e=new RegExp("^https://[^/]+/tag/");document.querySelectorAll("a[data-id]").forEach((t=>{e.test(t.href)&&(t.href=`https://club.steam250.com/tag/${t.dataset.id}`)}))}static updateUserBar(){const e="https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images",t=localStorage.getItem("user");if(!t)return;const i=JSON.parse(t),n=document.querySelector("#lin .avatar");if(!n)return;n.href="https://club.steam250.com/me";const r=n.appendChild(document.createElement("img"));r.alt=r.title=i.name,i.avatar.includes("/")?r.src=`${e}/items/${i.avatar}`:r.src=`${e}/avatars/${i.avatar.substring(0,2)}/${i.avatar}.jpg'`,this.markOwnedGames()}static markOwnedGames(){const e=localStorage.getItem("games"),t=document.querySelector("#user .owned");if(!e||!t)return;const i=JSON.parse(e),n=document.querySelectorAll(".main.ranking > div[id] > div:first-of-type > a");n.forEach((e=>{const t=e.href.match(/\/app\/(\d+)/)[1];i.hasOwnProperty(t)&&(e.classList.add("owned"),e.setAttribute("data-content",this.formatTimePlayed(i[t])))}));const r=n.length;if(r){const e=document.querySelectorAll(".main.ranking .owned").length;t.innerText=`${e}/${r} (${Math.round(e/r*100)}%)`}else t.closest("dl").remove()}static formatTimePlayed(e){return e<60?e+" minute"+(1!==e?"s":""):(e/60).toFixed(1)+" hour"+(60!==e?"s":"")}static postClub250Message(e){parent!==window&&parent.postMessage(e,"https://club.steam250.com")}}},225:function(e){e.exports=function(){"use strict";function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},e.apply(this,arguments)}var t="undefined"!=typeof window,i=t&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),n=t&&"IntersectionObserver"in window,r=t&&"classList"in document.createElement("p"),s=t&&window.devicePixelRatio>1,o={elements_selector:".lazy",container:i||t?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_bg_set:"bg-set",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",class_entered:"entered",class_exited:"exited",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!0,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1,restore_on_error:!1},a=function(t){return e({},o,t)},l=function(e,t){var i,n="LazyLoad::Initialized",r=new e(t);try{i=new CustomEvent(n,{detail:{instance:r}})}catch(e){(i=document.createEvent("CustomEvent")).initCustomEvent(n,!1,!1,{instance:r})}window.dispatchEvent(i)},c="src",u="srcset",d="sizes",h="poster",f="llOriginalAttrs",p="data",g="loading",v="loaded",_="applied",m="error",b="native",y="data-",w="ll-status",k=function(e,t){return e.getAttribute(y+t)},E=function(e){return k(e,w)},S=function(e,t){return function(e,t,i){var n="data-ll-status";null!==i?e.setAttribute(n,i):e.removeAttribute(n)}(e,0,t)},x=function(e){return S(e,null)},C=function(e){return null===E(e)},I=function(e){return E(e)===b},P=[g,v,_,m],T=function(e,t,i,n){e&&"function"==typeof e&&(void 0===n?void 0===i?e(t):e(t,i):e(t,i,n))},R=function(e,t){""!==t&&(r?e.classList.add(t):e.className+=(e.className?" ":"")+t)},F=function(e,t){""!==t&&(r?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,""))},M=function(e){return e.llTempImage},L=function(e,t){if(t){var i=t._observer;i&&i.unobserve(e)}},A=function(e,t){e&&(e.loadingCount+=t)},$=function(e,t){e&&(e.toLoadCount=t)},O=function(e){for(var t,i=[],n=0;t=e.children[n];n+=1)"SOURCE"===t.tagName&&i.push(t);return i},N=function(e,t){var i=e.parentNode;i&&"PICTURE"===i.tagName&&O(i).forEach(t)},D=function(e,t){O(e).forEach(t)},q=[c],B=[c,h],H=[c,u,d],U=[p],j=function(e){return!!e[f]},z=function(e){return e[f]},G=function(e){return delete e[f]},V=function(e,t){if(!j(e)){var i={};t.forEach((function(t){i[t]=e.getAttribute(t)})),e[f]=i}},W=function(e,t){if(j(e)){var i=z(e);t.forEach((function(t){!function(e,t,i){i?e.setAttribute(t,i):e.removeAttribute(t)}(e,t,i[t])}))}},Y=function(e,t,i){R(e,t.class_applied),S(e,_),i&&(t.unobserve_completed&&L(e,t),T(t.callback_applied,e,i))},J=function(e,t,i){R(e,t.class_loading),S(e,g),i&&(A(i,1),T(t.callback_loading,e,i))},X=function(e,t,i){i&&e.setAttribute(t,i)},K=function(e,t){X(e,d,k(e,t.data_sizes)),X(e,u,k(e,t.data_srcset)),X(e,c,k(e,t.data_src))},Q={IMG:function(e,t){N(e,(function(e){V(e,H),K(e,t)})),V(e,H),K(e,t)},IFRAME:function(e,t){V(e,q),X(e,c,k(e,t.data_src))},VIDEO:function(e,t){D(e,(function(e){V(e,q),X(e,c,k(e,t.data_src))})),V(e,B),X(e,h,k(e,t.data_poster)),X(e,c,k(e,t.data_src)),e.load()},OBJECT:function(e,t){V(e,U),X(e,p,k(e,t.data_src))}},Z=["IMG","IFRAME","VIDEO","OBJECT"],ee=function(e,t){!t||function(e){return e.loadingCount>0}(t)||function(e){return e.toLoadCount>0}(t)||T(e.callback_finish,t)},te=function(e,t,i){e.addEventListener(t,i),e.llEvLisnrs[t]=i},ie=function(e,t,i){e.removeEventListener(t,i)},ne=function(e){return!!e.llEvLisnrs},re=function(e){if(ne(e)){var t=e.llEvLisnrs;for(var i in t){var n=t[i];ie(e,i,n)}delete e.llEvLisnrs}},se=function(e,t,i){!function(e){delete e.llTempImage}(e),A(i,-1),function(e){e&&(e.toLoadCount-=1)}(i),F(e,t.class_loading),t.unobserve_completed&&L(e,i)},oe=function(e,t,i){var n=M(e)||e;ne(n)||function(e,t,i){ne(e)||(e.llEvLisnrs={});var n="VIDEO"===e.tagName?"loadeddata":"load";te(e,n,t),te(e,"error",i)}(n,(function(r){!function(e,t,i,n){var r=I(t);se(t,i,n),R(t,i.class_loaded),S(t,v),T(i.callback_loaded,t,n),r||ee(i,n)}(0,e,t,i),re(n)}),(function(r){!function(e,t,i,n){var r=I(t);se(t,i,n),R(t,i.class_error),S(t,m),T(i.callback_error,t,n),i.restore_on_error&&W(t,H),r||ee(i,n)}(0,e,t,i),re(n)}))},ae=function(e,t,i){!function(e){return Z.indexOf(e.tagName)>-1}(e)?function(e,t,i){!function(e){e.llTempImage=document.createElement("IMG")}(e),oe(e,t,i),function(e){j(e)||(e[f]={backgroundImage:e.style.backgroundImage})}(e),function(e,t,i){var n=k(e,t.data_bg),r=k(e,t.data_bg_hidpi),o=s&&r?r:n;o&&(e.style.backgroundImage='url("'.concat(o,'")'),M(e).setAttribute(c,o),J(e,t,i))}(e,t,i),function(e,t,i){var n=k(e,t.data_bg_multi),r=k(e,t.data_bg_multi_hidpi),o=s&&r?r:n;o&&(e.style.backgroundImage=o,Y(e,t,i))}(e,t,i),function(e,t,i){var n=k(e,t.data_bg_set);if(n){var r=n.split("|"),s=r.map((function(e){return"image-set(".concat(e,")")}));e.style.backgroundImage=s.join(),""===e.style.backgroundImage&&(s=r.map((function(e){return"-webkit-image-set(".concat(e,")")})),e.style.backgroundImage=s.join()),Y(e,t,i)}}(e,t,i)}(e,t,i):function(e,t,i){oe(e,t,i),function(e,t,i){var n=Q[e.tagName];n&&(n(e,t),J(e,t,i))}(e,t,i)}(e,t,i)},le=function(e){e.removeAttribute(c),e.removeAttribute(u),e.removeAttribute(d)},ce=function(e){N(e,(function(e){W(e,H)})),W(e,H)},ue={IMG:ce,IFRAME:function(e){W(e,q)},VIDEO:function(e){D(e,(function(e){W(e,q)})),W(e,B),e.load()},OBJECT:function(e){W(e,U)}},de=function(e,t){(function(e){var t=ue[e.tagName];t?t(e):function(e){if(j(e)){var t=z(e);e.style.backgroundImage=t.backgroundImage}}(e)})(e),function(e,t){C(e)||I(e)||(F(e,t.class_entered),F(e,t.class_exited),F(e,t.class_applied),F(e,t.class_loading),F(e,t.class_loaded),F(e,t.class_error))}(e,t),x(e),G(e)},he=["IMG","IFRAME","VIDEO"],fe=function(e){return e.use_native&&"loading"in HTMLImageElement.prototype},pe=function(e,t,i){e.forEach((function(e){return function(e){return e.isIntersecting||e.intersectionRatio>0}(e)?function(e,t,i,n){var r=function(e){return P.indexOf(E(e))>=0}(e);S(e,"entered"),R(e,i.class_entered),F(e,i.class_exited),function(e,t,i){t.unobserve_entered&&L(e,i)}(e,i,n),T(i.callback_enter,e,t,n),r||ae(e,i,n)}(e.target,e,t,i):function(e,t,i,n){C(e)||(R(e,i.class_exited),function(e,t,i,n){i.cancel_on_exit&&function(e){return E(e)===g}(e)&&"IMG"===e.tagName&&(re(e),function(e){N(e,(function(e){le(e)})),le(e)}(e),ce(e),F(e,i.class_loading),A(n,-1),x(e),T(i.callback_cancel,e,t,n))}(e,t,i,n),T(i.callback_exit,e,t,n))}(e.target,e,t,i)}))},ge=function(e){return Array.prototype.slice.call(e)},ve=function(e){return e.container.querySelectorAll(e.elements_selector)},_e=function(e){return function(e){return E(e)===m}(e)},me=function(e,t){return function(e){return ge(e).filter(C)}(e||ve(t))},be=function(e,i){var r=a(e);this._settings=r,this.loadingCount=0,function(e,t){n&&!fe(e)&&(t._observer=new IntersectionObserver((function(i){pe(i,e,t)}),function(e){return{root:e.container===document?null:e.container,rootMargin:e.thresholds||e.threshold+"px"}}(e)))}(r,this),function(e,i){t&&(i._onlineHandler=function(){!function(e,t){var i;(i=ve(e),ge(i).filter(_e)).forEach((function(t){F(t,e.class_error),x(t)})),t.update()}(e,i)},window.addEventListener("online",i._onlineHandler))}(r,this),this.update(i)};return be.prototype={update:function(e){var t,r,s=this._settings,o=me(e,s);$(this,o.length),!i&&n?fe(s)?function(e,t,i){e.forEach((function(e){-1!==he.indexOf(e.tagName)&&function(e,t,i){e.setAttribute("loading","lazy"),oe(e,t,i),function(e,t){var i=Q[e.tagName];i&&i(e,t)}(e,t),S(e,b)}(e,t,i)})),$(i,0)}(o,s,this):(r=o,function(e){e.disconnect()}(t=this._observer),function(e,t){t.forEach((function(t){e.observe(t)}))}(t,r)):this.loadAll(o)},destroy:function(){this._observer&&this._observer.disconnect(),t&&window.removeEventListener("online",this._onlineHandler),ve(this._settings).forEach((function(e){G(e)})),delete this._observer,delete this._settings,delete this._onlineHandler,delete this.loadingCount,delete this.toLoadCount},loadAll:function(e){var t=this,i=this._settings;me(e,i).forEach((function(e){L(e,t),ae(e,i,t)}))},restoreAll:function(){var e=this._settings;ve(e).forEach((function(t){de(t,e)}))}},be.load=function(e,t){var i=a(t);ae(e,i)},be.resetStatus=function(e){x(e)},t&&function(e,t){if(t)if(t.length)for(var i,n=0;i=t[n];n+=1)l(e,i);else l(e,t)}(be,window.lazyLoadOptions),be}()},228:function(e){e.exports=function(){"use strict";function e(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=1),u(d(t,e),i)}function t(t){t._clipped=!1,t._unclipped=t.slice(0);for(var i=0;i<=3;i++)i<3?((t[i]<0||t[i]>255)&&(t._clipped=!0),t[i]=e(t[i],0,255)):3===i&&(t[i]=e(t[i],0,1));return t}for(var i={},n=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];n<r.length;n+=1){var s=r[n];i["[object "+s+"]"]=s.toLowerCase()}function o(e){return i[Object.prototype.toString.call(e)]||"object"}function a(e,t){return void 0===t&&(t=null),e.length>=3?Array.prototype.slice.call(e):"object"==o(e[0])&&t?t.split("").filter((function(t){return void 0!==e[0][t]})).map((function(t){return e[0][t]})):e[0]}function l(e){if(e.length<2)return null;var t=e.length-1;return"string"==o(e[t])?e[t].toLowerCase():null}var c=Math.PI,u=Math.min,d=Math.max,h=2*c,f=c/3,p=c/180,g=180/c,v={format:{},autodetect:[]},_=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this;if("object"===o(e[0])&&e[0].constructor&&e[0].constructor===this.constructor)return e[0];var r=l(e),s=!1;if(!r){s=!0,v.sorted||(v.autodetect=v.autodetect.sort((function(e,t){return t.p-e.p})),v.sorted=!0);for(var a=0,c=v.autodetect;a<c.length;a+=1){var u=c[a];if(r=u.test.apply(u,e))break}}if(!v.format[r])throw new Error("unknown format: "+e);var d=v.format[r].apply(null,s?e:e.slice(0,-1));n._rgb=t(d),3===n._rgb.length&&n._rgb.push(1)};_.prototype.toString=function(){return"function"==o(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var m="2.6.0",b=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(b.Color,[null].concat(e)))};b.Color=_,b.version=m;var y=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=(e=a(e,"cmyk"))[0],n=e[1],r=e[2],s=e[3],o=e.length>4?e[4]:1;return 1===s?[0,0,0,o]:[i>=1?0:255*(1-i)*(1-s),n>=1?0:255*(1-n)*(1-s),r>=1?0:255*(1-r)*(1-s),o]},w=Math.max,k=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb"),n=i[0],r=i[1],s=i[2],o=1-w(n/=255,w(r/=255,s/=255)),l=o<1?1/(1-o):0;return[(1-n-o)*l,(1-r-o)*l,(1-s-o)*l,o]};_.prototype.cmyk=function(){return k(this._rgb)},b.cmyk=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["cmyk"])))},v.format.cmyk=y,v.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"cmyk"))&&4===e.length)return"cmyk"}});var E=function(e){return Math.round(100*e)/100},S=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"hsla"),n=l(e)||"lsa";return i[0]=E(i[0]||0),i[1]=E(100*i[1])+"%",i[2]=E(100*i[2])+"%","hsla"===n||i.length>3&&i[3]<1?(i[3]=i.length>3?i[3]:1,n="hsla"):i.length=3,n+"("+i.join(",")+")"},x=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r=(e=a(e,"rgba"))[0],s=e[1],o=e[2],l=u(r/=255,s/=255,o/=255),c=d(r,s,o),h=(c+l)/2;return c===l?(i=0,n=Number.NaN):i=h<.5?(c-l)/(c+l):(c-l)/(2-c-l),r==c?n=(s-o)/(c-l):s==c?n=2+(o-r)/(c-l):o==c&&(n=4+(r-s)/(c-l)),(n*=60)<0&&(n+=360),e.length>3&&void 0!==e[3]?[n,i,h,e[3]]:[n,i,h]},C=Math.round,I=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgba"),n=l(e)||"rgb";return"hsl"==n.substr(0,3)?S(x(i),n):(i[0]=C(i[0]),i[1]=C(i[1]),i[2]=C(i[2]),("rgba"===n||i.length>3&&i[3]<1)&&(i[3]=i.length>3?i[3]:1,n="rgba"),n+"("+i.slice(0,"rgb"===n?3:4).join(",")+")")},P=Math.round,T=function(){for(var e,t=[],i=arguments.length;i--;)t[i]=arguments[i];var n,r,s,o=(t=a(t,"hsl"))[0],l=t[1],c=t[2];if(0===l)n=r=s=255*c;else{var u=[0,0,0],d=[0,0,0],h=c<.5?c*(1+l):c+l-c*l,f=2*c-h,p=o/360;u[0]=p+1/3,u[1]=p,u[2]=p-1/3;for(var g=0;g<3;g++)u[g]<0&&(u[g]+=1),u[g]>1&&(u[g]-=1),6*u[g]<1?d[g]=f+6*(h-f)*u[g]:2*u[g]<1?d[g]=h:3*u[g]<2?d[g]=f+(h-f)*(2/3-u[g])*6:d[g]=f;n=(e=[P(255*d[0]),P(255*d[1]),P(255*d[2])])[0],r=e[1],s=e[2]}return t.length>3?[n,r,s,t[3]]:[n,r,s,1]},R=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,F=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,M=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,L=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,A=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,$=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,O=Math.round,N=function(e){var t;if(e=e.toLowerCase().trim(),v.format.named)try{return v.format.named(e)}catch(e){}if(t=e.match(R)){for(var i=t.slice(1,4),n=0;n<3;n++)i[n]=+i[n];return i[3]=1,i}if(t=e.match(F)){for(var r=t.slice(1,5),s=0;s<4;s++)r[s]=+r[s];return r}if(t=e.match(M)){for(var o=t.slice(1,4),a=0;a<3;a++)o[a]=O(2.55*o[a]);return o[3]=1,o}if(t=e.match(L)){for(var l=t.slice(1,5),c=0;c<3;c++)l[c]=O(2.55*l[c]);return l[3]=+l[3],l}if(t=e.match(A)){var u=t.slice(1,4);u[1]*=.01,u[2]*=.01;var d=T(u);return d[3]=1,d}if(t=e.match($)){var h=t.slice(1,4);h[1]*=.01,h[2]*=.01;var f=T(h);return f[3]=+t[4],f}};N.test=function(e){return R.test(e)||F.test(e)||M.test(e)||L.test(e)||A.test(e)||$.test(e)},_.prototype.css=function(e){return I(this._rgb,e)},b.css=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["css"])))},v.format.css=N,v.autodetect.push({p:5,test:function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];if(!t.length&&"string"===o(e)&&N.test(e))return"css"}}),v.format.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgba");return i[0]*=255,i[1]*=255,i[2]*=255,i},b.gl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["gl"])))},_.prototype.gl=function(){var e=this._rgb;return[e[0]/255,e[1]/255,e[2]/255,e[3]]};var D=Math.floor,q=function(){for(var e,t,i,n,r,s,o=[],l=arguments.length;l--;)o[l]=arguments[l];var c,u,d,h=(o=a(o,"hcg"))[0],f=o[1],p=o[2];p*=255;var g=255*f;if(0===f)c=u=d=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var v=D(h/=60),_=h-v,m=p*(1-f),b=m+g*(1-_),y=m+g*_,w=m+g;switch(v){case 0:c=(e=[w,y,m])[0],u=e[1],d=e[2];break;case 1:c=(t=[b,w,m])[0],u=t[1],d=t[2];break;case 2:c=(i=[m,w,y])[0],u=i[1],d=i[2];break;case 3:c=(n=[m,b,w])[0],u=n[1],d=n[2];break;case 4:c=(r=[y,m,w])[0],u=r[1],d=r[2];break;case 5:c=(s=[w,m,b])[0],u=s[1],d=s[2]}}return[c,u,d,o.length>3?o[3]:1]},B=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n=a(e,"rgb"),r=n[0],s=n[1],o=n[2],l=u(r,s,o),c=d(r,s,o),h=c-l,f=100*h/255,p=l/(255-h)*100;return 0===h?i=Number.NaN:(r===c&&(i=(s-o)/h),s===c&&(i=2+(o-r)/h),o===c&&(i=4+(r-s)/h),(i*=60)<0&&(i+=360)),[i,f,p]};_.prototype.hcg=function(){return B(this._rgb)},b.hcg=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hcg"])))},v.format.hcg=q,v.autodetect.push({p:1,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"hcg"))&&3===e.length)return"hcg"}});var H=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,U=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,j=function(e){if(e.match(H)){4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]);var t=parseInt(e,16);return[t>>16,t>>8&255,255&t,1]}if(e.match(U)){5!==e.length&&9!==e.length||(e=e.substr(1)),4===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]);var i=parseInt(e,16);return[i>>24&255,i>>16&255,i>>8&255,Math.round((255&i)/255*100)/100]}throw new Error("unknown hex color: "+e)},z=Math.round,G=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgba"),n=i[0],r=i[1],s=i[2],o=i[3],c=l(e)||"auto";void 0===o&&(o=1),"auto"===c&&(c=o<1?"rgba":"rgb");var u="000000"+((n=z(n))<<16|(r=z(r))<<8|(s=z(s))).toString(16);u=u.substr(u.length-6);var d="0"+z(255*o).toString(16);switch(d=d.substr(d.length-2),c.toLowerCase()){case"rgba":return"#"+u+d;case"argb":return"#"+d+u;default:return"#"+u}};_.prototype.hex=function(e){return G(this._rgb,e)},b.hex=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hex"])))},v.format.hex=j,v.autodetect.push({p:4,test:function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];if(!t.length&&"string"===o(e)&&[3,4,5,6,7,8,9].indexOf(e.length)>=0)return"hex"}});var V=Math.cos,W=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var n,r,s,o=(t=a(t,"hsi"))[0],l=t[1],c=t[2];return isNaN(o)&&(o=0),isNaN(l)&&(l=0),o>360&&(o-=360),o<0&&(o+=360),(o/=360)<1/3?r=1-((s=(1-l)/3)+(n=(1+l*V(h*o)/V(f-h*o))/3)):o<2/3?s=1-((n=(1-l)/3)+(r=(1+l*V(h*(o-=1/3))/V(f-h*o))/3)):n=1-((r=(1-l)/3)+(s=(1+l*V(h*(o-=2/3))/V(f-h*o))/3)),[255*(n=e(c*n*3)),255*(r=e(c*r*3)),255*(s=e(c*s*3)),t.length>3?t[3]:1]},Y=Math.min,J=Math.sqrt,X=Math.acos,K=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n=a(e,"rgb"),r=n[0],s=n[1],o=n[2],l=Y(r/=255,s/=255,o/=255),c=(r+s+o)/3,u=c>0?1-l/c:0;return 0===u?i=NaN:(i=(r-s+(r-o))/2,i/=J((r-s)*(r-s)+(r-o)*(s-o)),i=X(i),o>s&&(i=h-i),i/=h),[360*i,u,c]};_.prototype.hsi=function(){return K(this._rgb)},b.hsi=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hsi"])))},v.format.hsi=W,v.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"hsi"))&&3===e.length)return"hsi"}}),_.prototype.hsl=function(){return x(this._rgb)},b.hsl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hsl"])))},v.format.hsl=T,v.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"hsl"))&&3===e.length)return"hsl"}});var Q=Math.floor,Z=function(){for(var e,t,i,n,r,s,o=[],l=arguments.length;l--;)o[l]=arguments[l];var c,u,d,h=(o=a(o,"hsv"))[0],f=o[1],p=o[2];if(p*=255,0===f)c=u=d=p;else{360===h&&(h=0),h>360&&(h-=360),h<0&&(h+=360);var g=Q(h/=60),v=h-g,_=p*(1-f),m=p*(1-f*v),b=p*(1-f*(1-v));switch(g){case 0:c=(e=[p,b,_])[0],u=e[1],d=e[2];break;case 1:c=(t=[m,p,_])[0],u=t[1],d=t[2];break;case 2:c=(i=[_,p,b])[0],u=i[1],d=i[2];break;case 3:c=(n=[_,m,p])[0],u=n[1],d=n[2];break;case 4:c=(r=[b,_,p])[0],u=r[1],d=r[2];break;case 5:c=(s=[p,_,m])[0],u=s[1],d=s[2]}}return[c,u,d,o.length>3?o[3]:1]},ee=Math.min,te=Math.max,ie=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r,s=(e=a(e,"rgb"))[0],o=e[1],l=e[2],c=ee(s,o,l),u=te(s,o,l),d=u-c;return r=u/255,0===u?(i=Number.NaN,n=0):(n=d/u,s===u&&(i=(o-l)/d),o===u&&(i=2+(l-s)/d),l===u&&(i=4+(s-o)/d),(i*=60)<0&&(i+=360)),[i,n,r]};_.prototype.hsv=function(){return ie(this._rgb)},b.hsv=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hsv"])))},v.format.hsv=Z,v.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"hsv"))&&3===e.length)return"hsv"}});var ne={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},re=Math.pow,se=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i,n,r,s=(e=a(e,"lab"))[0],o=e[1],l=e[2];return n=(s+16)/116,i=isNaN(o)?n:n+o/500,r=isNaN(l)?n:n-l/200,n=ne.Yn*ae(n),i=ne.Xn*ae(i),r=ne.Zn*ae(r),[oe(3.2404542*i-1.5371385*n-.4985314*r),oe(-.969266*i+1.8760108*n+.041556*r),oe(.0556434*i-.2040259*n+1.0572252*r),e.length>3?e[3]:1]},oe=function(e){return 255*(e<=.00304?12.92*e:1.055*re(e,1/2.4)-.055)},ae=function(e){return e>ne.t1?e*e*e:ne.t2*(e-ne.t0)},le=Math.pow,ce=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb"),n=i[0],r=i[1],s=i[2],o=he(n,r,s),l=o[0],c=o[1],u=116*c-16;return[u<0?0:u,500*(l-c),200*(c-o[2])]},ue=function(e){return(e/=255)<=.04045?e/12.92:le((e+.055)/1.055,2.4)},de=function(e){return e>ne.t3?le(e,1/3):e/ne.t2+ne.t0},he=function(e,t,i){return e=ue(e),t=ue(t),i=ue(i),[de((.4124564*e+.3575761*t+.1804375*i)/ne.Xn),de((.2126729*e+.7151522*t+.072175*i)/ne.Yn),de((.0193339*e+.119192*t+.9503041*i)/ne.Zn)]};_.prototype.lab=function(){return ce(this._rgb)},b.lab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["lab"])))},v.format.lab=se,v.autodetect.push({p:2,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"lab"))&&3===e.length)return"lab"}});var fe=Math.sin,pe=Math.cos,ge=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"lch"),n=i[0],r=i[1],s=i[2];return isNaN(s)&&(s=0),[n,pe(s*=p)*r,fe(s)*r]},ve=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=(e=a(e,"lch"))[0],n=e[1],r=e[2],s=ge(i,n,r),o=s[0],l=s[1],c=s[2],u=se(o,l,c);return[u[0],u[1],u[2],e.length>3?e[3]:1]},_e=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"hcl").reverse();return ve.apply(void 0,i)},me=Math.sqrt,be=Math.atan2,ye=Math.round,we=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"lab"),n=i[0],r=i[1],s=i[2],o=me(r*r+s*s),l=(be(s,r)*g+360)%360;return 0===ye(1e4*o)&&(l=Number.NaN),[n,o,l]},ke=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb"),n=i[0],r=i[1],s=i[2],o=ce(n,r,s),l=o[0],c=o[1],u=o[2];return we(l,c,u)};_.prototype.lch=function(){return ke(this._rgb)},_.prototype.hcl=function(){return ke(this._rgb).reverse()},b.lch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["lch"])))},b.hcl=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["hcl"])))},v.format.lch=ve,v.format.hcl=_e,["lch","hcl"].forEach((function(e){return v.autodetect.push({p:2,test:function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];if("array"===o(t=a(t,e))&&3===t.length)return e}})}));var Ee={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};_.prototype.name=function(){for(var e=G(this._rgb,"rgb"),t=0,i=Object.keys(Ee);t<i.length;t+=1){var n=i[t];if(Ee[n]===e)return n.toLowerCase()}return e},v.format.named=function(e){if(e=e.toLowerCase(),Ee[e])return j(Ee[e]);throw new Error("unknown color name: "+e)},v.autodetect.push({p:5,test:function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];if(!t.length&&"string"===o(e)&&Ee[e.toLowerCase()])return"named"}});var Se=function(e){if("number"==o(e)&&e>=0&&e<=16777215)return[e>>16,e>>8&255,255&e,1];throw new Error("unknown num color: "+e)},xe=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb");return(i[0]<<16)+(i[1]<<8)+i[2]};_.prototype.num=function(){return xe(this._rgb)},b.num=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["num"])))},v.format.num=Se,v.autodetect.push({p:5,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(1===e.length&&"number"===o(e[0])&&e[0]>=0&&e[0]<=16777215)return"num"}});var Ce=Math.round;_.prototype.rgb=function(e){return void 0===e&&(e=!0),!1===e?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Ce)},_.prototype.rgba=function(e){return void 0===e&&(e=!0),this._rgb.slice(0,4).map((function(t,i){return i<3?!1===e?t:Ce(t):t}))},b.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["rgb"])))},v.format.rgb=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgba");return void 0===i[3]&&(i[3]=1),i},v.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"rgba"))&&(3===e.length||4===e.length&&"number"==o(e[3])&&e[3]>=0&&e[3]<=1))return"rgb"}});var Ie=Math.log,Pe=function(e){var t,i,n,r=e/100;return r<66?(t=255,i=r<6?0:-155.25485562709179-.44596950469579133*(i=r-2)+104.49216199393888*Ie(i),n=r<20?0:.8274096064007395*(n=r-10)-254.76935184120902+115.67994401066147*Ie(n)):(t=351.97690566805693+.114206453784165*(t=r-55)-40.25366309332127*Ie(t),i=325.4494125711974+.07943456536662342*(i=r-50)-28.0852963507957*Ie(i),n=255),[t,i,n,1]},Te=Math.round,Re=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];for(var i,n=a(e,"rgb"),r=n[0],s=n[2],o=1e3,l=4e4,c=.4;l-o>c;){var u=Pe(i=.5*(l+o));u[2]/u[0]>=s/r?l=i:o=i}return Te(i)};_.prototype.temp=_.prototype.kelvin=_.prototype.temperature=function(){return Re(this._rgb)},b.temp=b.kelvin=b.temperature=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["temp"])))},v.format.temp=v.format.kelvin=v.format.temperature=Pe;var Fe=Math.pow,Me=Math.sign,Le=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=(e=a(e,"lab"))[0],n=e[1],r=e[2],s=Fe(i+.3963377774*n+.2158037573*r,3),o=Fe(i-.1055613458*n-.0638541728*r,3),l=Fe(i-.0894841775*n-1.291485548*r,3);return[255*Ae(4.0767416621*s-3.3077115913*o+.2309699292*l),255*Ae(-1.2684380046*s+2.6097574011*o-.3413193965*l),255*Ae(-.0041960863*s-.7034186147*o+1.707614701*l),e.length>3?e[3]:1]};function Ae(e){var t=Math.abs(e);return t>.0031308?(Me(e)||1)*(1.055*Fe(t,1/2.4)-.055):12.92*e}var $e=Math.cbrt,Oe=Math.pow,Ne=Math.sign,De=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb"),n=i[0],r=i[1],s=i[2],o=[qe(n/255),qe(r/255),qe(s/255)],l=o[0],c=o[1],u=o[2],d=$e(.4122214708*l+.5363325363*c+.0514459929*u),h=$e(.2119034982*l+.6806995451*c+.1073969566*u),f=$e(.0883024619*l+.2817188376*c+.6299787005*u);return[.2104542553*d+.793617785*h-.0040720468*f,1.9779984951*d-2.428592205*h+.4505937099*f,.0259040371*d+.7827717662*h-.808675766*f]};function qe(e){var t=Math.abs(e);return t<.04045?e/12.92:(Ne(e)||1)*Oe((t+.055)/1.055,2.4)}_.prototype.oklab=function(){return De(this._rgb)},b.oklab=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["oklab"])))},v.format.oklab=Le,v.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"oklab"))&&3===e.length)return"oklab"}});var Be=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=(e=a(e,"lch"))[0],n=e[1],r=e[2],s=ge(i,n,r),o=s[0],l=s[1],c=s[2],u=Le(o,l,c);return[u[0],u[1],u[2],e.length>3?e[3]:1]},He=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=a(e,"rgb"),n=i[0],r=i[1],s=i[2],o=De(n,r,s),l=o[0],c=o[1],u=o[2];return we(l,c,u)};_.prototype.oklch=function(){return He(this._rgb)},b.oklch=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return new(Function.prototype.bind.apply(_,[null].concat(e,["oklch"])))},v.format.oklch=Be,v.autodetect.push({p:3,test:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if("array"===o(e=a(e,"oklch"))&&3===e.length)return"oklch"}}),_.prototype.alpha=function(e,t){return void 0===t&&(t=!1),void 0!==e&&"number"===o(e)?t?(this._rgb[3]=e,this):new _([this._rgb[0],this._rgb[1],this._rgb[2],e],"rgb"):this._rgb[3]},_.prototype.clipped=function(){return this._rgb._clipped||!1},_.prototype.darken=function(e){void 0===e&&(e=1);var t=this,i=t.lab();return i[0]-=ne.Kn*e,new _(i,"lab").alpha(t.alpha(),!0)},_.prototype.brighten=function(e){return void 0===e&&(e=1),this.darken(-e)},_.prototype.darker=_.prototype.darken,_.prototype.brighter=_.prototype.brighten,_.prototype.get=function(e){var t=e.split("."),i=t[0],n=t[1],r=this[i]();if(n){var s=i.indexOf(n)-("ok"===i.substr(0,2)?2:0);if(s>-1)return r[s];throw new Error("unknown channel "+n+" in mode "+i)}return r};var Ue=Math.pow,je=1e-7,ze=20;_.prototype.luminance=function(e,t){if(void 0===t&&(t="rgb"),void 0!==e&&"number"===o(e)){if(0===e)return new _([0,0,0,this._rgb[3]],"rgb");if(1===e)return new _([255,255,255,this._rgb[3]],"rgb");var i=this.luminance(),n=ze,r=function(i,s){var o=i.interpolate(s,.5,t),a=o.luminance();return Math.abs(e-a)<je||!n--?o:a>e?r(i,o):r(o,s)},s=(i>e?r(new _([0,0,0]),this):r(this,new _([255,255,255]))).rgb();return new _(s.concat([this._rgb[3]]))}return Ge.apply(void 0,this._rgb.slice(0,3))};var Ge=function(e,t,i){return.2126*(e=Ve(e))+.7152*(t=Ve(t))+.0722*(i=Ve(i))},Ve=function(e){return(e/=255)<=.03928?e/12.92:Ue((e+.055)/1.055,2.4)},We={};function Ye(e,t,i){void 0===i&&(i=.5);for(var n=[],r=arguments.length-3;r-- >0;)n[r]=arguments[r+3];var s=n[0]||"lrgb";if(We[s]||n.length||(s=Object.keys(We)[0]),!We[s])throw new Error("interpolation mode "+s+" is not defined");return"object"!==o(e)&&(e=new _(e)),"object"!==o(t)&&(t=new _(t)),We[s](e,t,i).alpha(e.alpha()+i*(t.alpha()-e.alpha()))}_.prototype.mix=_.prototype.interpolate=function(e,t){void 0===t&&(t=.5);for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];return Ye.apply(void 0,[this,e,t].concat(i))},_.prototype.premultiply=function(e){void 0===e&&(e=!1);var t=this._rgb,i=t[3];return e?(this._rgb=[t[0]*i,t[1]*i,t[2]*i,i],this):new _([t[0]*i,t[1]*i,t[2]*i,i],"rgb")},_.prototype.saturate=function(e){void 0===e&&(e=1);var t=this,i=t.lch();return i[1]+=ne.Kn*e,i[1]<0&&(i[1]=0),new _(i,"lch").alpha(t.alpha(),!0)},_.prototype.desaturate=function(e){return void 0===e&&(e=1),this.saturate(-e)},_.prototype.set=function(e,t,i){void 0===i&&(i=!1);var n=e.split("."),r=n[0],s=n[1],a=this[r]();if(s){var l=r.indexOf(s)-("ok"===r.substr(0,2)?2:0);if(l>-1){if("string"==o(t))switch(t.charAt(0)){case"+":case"-":a[l]+=+t;break;case"*":a[l]*=+t.substr(1);break;case"/":a[l]/=+t.substr(1);break;default:a[l]=+t}else{if("number"!==o(t))throw new Error("unsupported value for Color.set");a[l]=t}var c=new _(a,r);return i?(this._rgb=c._rgb,this):c}throw new Error("unknown channel "+s+" in mode "+r)}return a},_.prototype.tint=function(e){void 0===e&&(e=.5);for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return Ye.apply(void 0,[this,"white",e].concat(t))},_.prototype.shade=function(e){void 0===e&&(e=.5);for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];return Ye.apply(void 0,[this,"black",e].concat(t))};var Je=function(e,t,i){var n=e._rgb,r=t._rgb;return new _(n[0]+i*(r[0]-n[0]),n[1]+i*(r[1]-n[1]),n[2]+i*(r[2]-n[2]),"rgb")};We.rgb=Je;var Xe=Math.sqrt,Ke=Math.pow,Qe=function(e,t,i){var n=e._rgb,r=n[0],s=n[1],o=n[2],a=t._rgb,l=a[0],c=a[1],u=a[2];return new _(Xe(Ke(r,2)*(1-i)+Ke(l,2)*i),Xe(Ke(s,2)*(1-i)+Ke(c,2)*i),Xe(Ke(o,2)*(1-i)+Ke(u,2)*i),"rgb")};We.lrgb=Qe;var Ze=function(e,t,i){var n=e.lab(),r=t.lab();return new _(n[0]+i*(r[0]-n[0]),n[1]+i*(r[1]-n[1]),n[2]+i*(r[2]-n[2]),"lab")};function et(e,t,i,n){var r,s,o,a,l,c,u,d,h,f,p,g,v;return"hsl"===n?(o=e.hsl(),a=t.hsl()):"hsv"===n?(o=e.hsv(),a=t.hsv()):"hcg"===n?(o=e.hcg(),a=t.hcg()):"hsi"===n?(o=e.hsi(),a=t.hsi()):"lch"===n||"hcl"===n?(n="hcl",o=e.hcl(),a=t.hcl()):"oklch"===n&&(o=e.oklch().reverse(),a=t.oklch().reverse()),"h"!==n.substr(0,1)&&"oklch"!==n||(l=(r=o)[0],u=r[1],h=r[2],c=(s=a)[0],d=s[1],f=s[2]),isNaN(l)||isNaN(c)?isNaN(l)?isNaN(c)?g=Number.NaN:(g=c,1!=h&&0!=h||"hsv"==n||(p=d)):(g=l,1!=f&&0!=f||"hsv"==n||(p=u)):g=l+i*(c>l&&c-l>180?c-(l+360):c<l&&l-c>180?c+360-l:c-l),void 0===p&&(p=u+i*(d-u)),v=h+i*(f-h),new _("oklch"===n?[v,p,g]:[g,p,v],n)}We.lab=Ze;var tt=function(e,t,i){return et(e,t,i,"lch")};We.lch=tt,We.hcl=tt;var it=function(e,t,i){var n=e.num(),r=t.num();return new _(n+i*(r-n),"num")};We.num=it;var nt=function(e,t,i){return et(e,t,i,"hcg")};We.hcg=nt;var rt=function(e,t,i){return et(e,t,i,"hsi")};We.hsi=rt;var st=function(e,t,i){return et(e,t,i,"hsl")};We.hsl=st;var ot=function(e,t,i){return et(e,t,i,"hsv")};We.hsv=ot;var at=function(e,t,i){var n=e.oklab(),r=t.oklab();return new _(n[0]+i*(r[0]-n[0]),n[1]+i*(r[1]-n[1]),n[2]+i*(r[2]-n[2]),"oklab")};We.oklab=at;var lt=function(e,t,i){return et(e,t,i,"oklch")};We.oklch=lt;var ct=Math.pow,ut=Math.sqrt,dt=Math.PI,ht=Math.cos,ft=Math.sin,pt=Math.atan2;function gt(e,t,i){void 0===t&&(t="lrgb"),void 0===i&&(i=null);var n=e.length;i||(i=Array.from(new Array(n)).map((function(){return 1})));var r=n/i.reduce((function(e,t){return e+t}));if(i.forEach((function(e,t){i[t]*=r})),e=e.map((function(e){return new _(e)})),"lrgb"===t)return vt(e,i);for(var s=e.shift(),o=s.get(t),a=[],l=0,c=0,u=0;u<o.length;u++)if(o[u]=(o[u]||0)*i[0],a.push(isNaN(o[u])?0:i[0]),"h"===t.charAt(u)&&!isNaN(o[u])){var d=o[u]/180*dt;l+=ht(d)*i[0],c+=ft(d)*i[0]}var h=s.alpha()*i[0];e.forEach((function(e,n){var r=e.get(t);h+=e.alpha()*i[n+1];for(var s=0;s<o.length;s++)if(!isNaN(r[s]))if(a[s]+=i[n+1],"h"===t.charAt(s)){var u=r[s]/180*dt;l+=ht(u)*i[n+1],c+=ft(u)*i[n+1]}else o[s]+=r[s]*i[n+1]}));for(var f=0;f<o.length;f++)if("h"===t.charAt(f)){for(var p=pt(c/a[f],l/a[f])/dt*180;p<0;)p+=360;for(;p>=360;)p-=360;o[f]=p}else o[f]=o[f]/a[f];return h/=n,new _(o,t).alpha(h>.99999?1:h,!0)}var vt=function(e,i){for(var n=e.length,r=[0,0,0,0],s=0;s<e.length;s++){var o=e[s],a=i[s]/n,l=o._rgb;r[0]+=ct(l[0],2)*a,r[1]+=ct(l[1],2)*a,r[2]+=ct(l[2],2)*a,r[3]+=l[3]*a}return r[0]=ut(r[0]),r[1]=ut(r[1]),r[2]=ut(r[2]),r[3]>.9999999&&(r[3]=1),new _(t(r))},_t=Math.pow;function mt(t){var i="rgb",n=b("#ccc"),r=0,s=[0,1],a=[],l=[0,0],c=!1,u=[],d=!1,h=0,f=1,p=!1,g={},v=!0,_=1,m=function(e){if((e=e||["#fff","#000"])&&"string"===o(e)&&b.brewer&&b.brewer[e.toLowerCase()]&&(e=b.brewer[e.toLowerCase()]),"array"===o(e)){1===e.length&&(e=[e[0],e[0]]),e=e.slice(0);for(var t=0;t<e.length;t++)e[t]=b(e[t]);a.length=0;for(var i=0;i<e.length;i++)a.push(i/(e.length-1))}return S(),u=e},y=function(e){if(null!=c){for(var t=c.length-1,i=0;i<t&&e>=c[i];)i++;return i-1}return 0},w=function(e){return e},k=function(e){return e},E=function(t,r){var s,d;if(null==r&&(r=!1),isNaN(t)||null===t)return n;d=r?t:c&&c.length>2?y(t)/(c.length-2):f!==h?(t-h)/(f-h):1,d=k(d),r||(d=w(d)),1!==_&&(d=_t(d,_)),d=e(d=l[0]+d*(1-l[0]-l[1]),0,1);var p=Math.floor(1e4*d);if(v&&g[p])s=g[p];else{if("array"===o(u))for(var m=0;m<a.length;m++){var E=a[m];if(d<=E){s=u[m];break}if(d>=E&&m===a.length-1){s=u[m];break}if(d>E&&d<a[m+1]){d=(d-E)/(a[m+1]-E),s=b.interpolate(u[m],u[m+1],d,i);break}}else"function"===o(u)&&(s=u(d));v&&(g[p]=s)}return s},S=function(){return g={}};m(t);var x=function(e){var t=b(E(e));return d&&t[d]?t[d]():t};return x.classes=function(e){if(null!=e){if("array"===o(e))c=e,s=[e[0],e[e.length-1]];else{var t=b.analyze(s);c=0===e?[t.min,t.max]:b.limits(t,"e",e)}return x}return c},x.domain=function(e){if(!arguments.length)return s;h=e[0],f=e[e.length-1],a=[];var t=u.length;if(e.length===t&&h!==f)for(var i=0,n=Array.from(e);i<n.length;i+=1){var r=n[i];a.push((r-h)/(f-h))}else{for(var o=0;o<t;o++)a.push(o/(t-1));if(e.length>2){var l=e.map((function(t,i){return i/(e.length-1)})),c=e.map((function(e){return(e-h)/(f-h)}));c.every((function(e,t){return l[t]===e}))||(k=function(e){if(e<=0||e>=1)return e;for(var t=0;e>=c[t+1];)t++;var i=(e-c[t])/(c[t+1]-c[t]);return l[t]+i*(l[t+1]-l[t])})}}return s=[h,f],x},x.mode=function(e){return arguments.length?(i=e,S(),x):i},x.range=function(e,t){return m(e),x},x.out=function(e){return d=e,x},x.spread=function(e){return arguments.length?(r=e,x):r},x.correctLightness=function(e){return null==e&&(e=!0),p=e,S(),w=p?function(e){for(var t=E(0,!0).lab()[0],i=E(1,!0).lab()[0],n=t>i,r=E(e,!0).lab()[0],s=t+(i-t)*e,o=r-s,a=0,l=1,c=20;Math.abs(o)>.01&&c-- >0;)n&&(o*=-1),o<0?(a=e,e+=.5*(l-e)):(l=e,e+=.5*(a-e)),r=E(e,!0).lab()[0],o=r-s;return e}:function(e){return e},x},x.padding=function(e){return null!=e?("number"===o(e)&&(e=[e,e]),l=e,x):l},x.colors=function(e,i){arguments.length<2&&(i="hex");var n=[];if(0===arguments.length)n=u.slice(0);else if(1===e)n=[x(.5)];else if(e>1){var r=s[0],o=s[1]-r;n=bt(0,e).map((function(t){return x(r+t/(e-1)*o)}))}else{t=[];var a=[];if(c&&c.length>2)for(var l=1,d=c.length,h=1<=d;h?l<d:l>d;h?l++:l--)a.push(.5*(c[l-1]+c[l]));else a=s;n=a.map((function(e){return x(e)}))}return b[i]&&(n=n.map((function(e){return e[i]()}))),n},x.cache=function(e){return null!=e?(v=e,x):v},x.gamma=function(e){return null!=e?(_=e,x):_},x.nodata=function(e){return null!=e?(n=b(e),x):n},x}function bt(e,t,i){for(var n=[],r=e<t,s=t,o=e;r?o<s:o>s;r?o++:o--)n.push(o);return n}var yt=function(e){for(var t=[1,1],i=1;i<e;i++){for(var n=[1],r=1;r<=t.length;r++)n[r]=(t[r]||0)+t[r-1];t=n}return t},wt=function(e){var t,i,n,r,s,o,a;if(2===(e=e.map((function(e){return new _(e)}))).length)t=e.map((function(e){return e.lab()})),s=t[0],o=t[1],r=function(e){var t=[0,1,2].map((function(t){return s[t]+e*(o[t]-s[t])}));return new _(t,"lab")};else if(3===e.length)i=e.map((function(e){return e.lab()})),s=i[0],o=i[1],a=i[2],r=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*s[t]+2*(1-e)*e*o[t]+e*e*a[t]}));return new _(t,"lab")};else if(4===e.length){var l;n=e.map((function(e){return e.lab()})),s=n[0],o=n[1],a=n[2],l=n[3],r=function(e){var t=[0,1,2].map((function(t){return(1-e)*(1-e)*(1-e)*s[t]+3*(1-e)*(1-e)*e*o[t]+3*(1-e)*e*e*a[t]+e*e*e*l[t]}));return new _(t,"lab")}}else{if(!(e.length>=5))throw new RangeError("No point in running bezier with only one color.");var c,u,d;c=e.map((function(e){return e.lab()})),d=e.length-1,u=yt(d),r=function(e){var t=1-e,i=[0,1,2].map((function(i){return c.reduce((function(n,r,s){return n+u[s]*Math.pow(t,d-s)*Math.pow(e,s)*r[i]}),0)}));return new _(i,"lab")}}return r};function kt(e){var t=wt(e);return t.scale=function(){return mt(t)},t}var Et=function(e,t,i){if(!Et[i])throw new Error("unknown blend mode "+i);return Et[i](e,t)},St=function(e){return function(t,i){var n=b(i).rgb(),r=b(t).rgb();return b.rgb(e(n,r))}},xt=function(e){return function(t,i){var n=[];return n[0]=e(t[0],i[0]),n[1]=e(t[1],i[1]),n[2]=e(t[2],i[2]),n}},Ct=function(e){return e},It=function(e,t){return e*t/255},Pt=function(e,t){return e>t?t:e},Tt=function(e,t){return e>t?e:t},Rt=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},Ft=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},Mt=function(e,t){return 255*(1-(1-t/255)/(e/255))},Lt=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e};Et.normal=St(xt(Ct)),Et.multiply=St(xt(It)),Et.screen=St(xt(Rt)),Et.overlay=St(xt(Ft)),Et.darken=St(xt(Pt)),Et.lighten=St(xt(Tt)),Et.dodge=St(xt(Lt)),Et.burn=St(xt(Mt));var At=Math.pow,$t=Math.sin,Ot=Math.cos;function Nt(e,i,n,r,s){void 0===e&&(e=300),void 0===i&&(i=-1.5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===s&&(s=[0,1]);var a,l=0;"array"===o(s)?a=s[1]-s[0]:(a=0,s=[s,s]);var c=function(o){var c=h*((e+120)/360+i*o),u=At(s[0]+a*o,r),d=(0!==l?n[0]+o*l:n)*u*(1-u)/2,f=Ot(c),p=$t(c);return b(t([255*(u+d*(-.14861*f+1.78277*p)),255*(u+d*(-.29227*f-.90649*p)),255*(u+d*(1.97294*f)),1]))};return c.start=function(t){return null==t?e:(e=t,c)},c.rotations=function(e){return null==e?i:(i=e,c)},c.gamma=function(e){return null==e?r:(r=e,c)},c.hue=function(e){return null==e?n:("array"===o(n=e)?0==(l=n[1]-n[0])&&(n=n[1]):l=0,c)},c.lightness=function(e){return null==e?s:("array"===o(e)?(s=e,a=e[1]-e[0]):(s=[e,e],a=0),c)},c.scale=function(){return b.scale(c)},c.hue(n),c}var Dt="0123456789abcdef",qt=Math.floor,Bt=Math.random;function Ht(){for(var e="#",t=0;t<6;t++)e+=Dt.charAt(qt(16*Bt()));return new _(e,"hex")}var Ut=Math.log,jt=Math.pow,zt=Math.floor,Gt=Math.abs;function Vt(e,t){void 0===t&&(t=null);var i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===o(e)&&(e=Object.values(e)),e.forEach((function(e){t&&"object"===o(e)&&(e=e[t]),null==e||isNaN(e)||(i.values.push(e),i.sum+=e,e<i.min&&(i.min=e),e>i.max&&(i.max=e),i.count+=1)})),i.domain=[i.min,i.max],i.limits=function(e,t){return Wt(i,e,t)},i}function Wt(e,t,i){void 0===t&&(t="equal"),void 0===i&&(i=7),"array"==o(e)&&(e=Vt(e));var n=e.min,r=e.max,s=e.values.sort((function(e,t){return e-t}));if(1===i)return[n,r];var a=[];if("c"===t.substr(0,1)&&(a.push(n),a.push(r)),"e"===t.substr(0,1)){a.push(n);for(var l=1;l<i;l++)a.push(n+l/i*(r-n));a.push(r)}else if("l"===t.substr(0,1)){if(n<=0)throw new Error("Logarithmic scales are only possible for values > 0");var c=Math.LOG10E*Ut(n),u=Math.LOG10E*Ut(r);a.push(n);for(var d=1;d<i;d++)a.push(jt(10,c+d/i*(u-c)));a.push(r)}else if("q"===t.substr(0,1)){a.push(n);for(var h=1;h<i;h++){var f=(s.length-1)*h/i,p=zt(f);if(p===f)a.push(s[p]);else{var g=f-p;a.push(s[p]*(1-g)+s[p+1]*g)}}a.push(r)}else if("k"===t.substr(0,1)){var v,_=s.length,m=new Array(_),b=new Array(i),y=!0,w=0,k=null;(k=[]).push(n);for(var E=1;E<i;E++)k.push(n+E/i*(r-n));for(k.push(r);y;){for(var S=0;S<i;S++)b[S]=0;for(var x=0;x<_;x++)for(var C=s[x],I=Number.MAX_VALUE,P=void 0,T=0;T<i;T++){var R=Gt(k[T]-C);R<I&&(I=R,P=T),b[P]++,m[x]=P}for(var F=new Array(i),M=0;M<i;M++)F[M]=null;for(var L=0;L<_;L++)null===F[v=m[L]]?F[v]=s[L]:F[v]+=s[L];for(var A=0;A<i;A++)F[A]*=1/b[A];y=!1;for(var $=0;$<i;$++)if(F[$]!==k[$]){y=!0;break}k=F,++w>200&&(y=!1)}for(var O={},N=0;N<i;N++)O[N]=[];for(var D=0;D<_;D++)O[v=m[D]].push(s[D]);for(var q=[],B=0;B<i;B++)q.push(O[B][0]),q.push(O[B][O[B].length-1]);q=q.sort((function(e,t){return e-t})),a.push(q[0]);for(var H=1;H<q.length;H+=2){var U=q[H];isNaN(U)||-1!==a.indexOf(U)||a.push(U)}}return a}function Yt(e,t){e=new _(e),t=new _(t);var i=e.luminance(),n=t.luminance();return i>n?(i+.05)/(n+.05):(n+.05)/(i+.05)}var Jt=Math.sqrt,Xt=Math.pow,Kt=Math.min,Qt=Math.max,Zt=Math.atan2,ei=Math.abs,ti=Math.cos,ii=Math.sin,ni=Math.exp,ri=Math.PI;function si(e,t,i,n,r){void 0===i&&(i=1),void 0===n&&(n=1),void 0===r&&(r=1);var s=function(e){return 360*e/(2*ri)},o=function(e){return 2*ri*e/360};e=new _(e),t=new _(t);var a=Array.from(e.lab()),l=a[0],c=a[1],u=a[2],d=Array.from(t.lab()),h=d[0],f=d[1],p=d[2],g=(l+h)/2,v=(Jt(Xt(c,2)+Xt(u,2))+Jt(Xt(f,2)+Xt(p,2)))/2,m=.5*(1-Jt(Xt(v,7)/(Xt(v,7)+Xt(25,7)))),b=c*(1+m),y=f*(1+m),w=Jt(Xt(b,2)+Xt(u,2)),k=Jt(Xt(y,2)+Xt(p,2)),E=(w+k)/2,S=s(Zt(u,b)),x=s(Zt(p,y)),C=S>=0?S:S+360,I=x>=0?x:x+360,P=ei(C-I)>180?(C+I+360)/2:(C+I)/2,T=1-.17*ti(o(P-30))+.24*ti(o(2*P))+.32*ti(o(3*P+6))-.2*ti(o(4*P-63)),R=I-C;R=ei(R)<=180?R:I<=C?R+360:R-360,R=2*Jt(w*k)*ii(o(R)/2);var F=h-l,M=k-w,L=1+.015*Xt(g-50,2)/Jt(20+Xt(g-50,2)),A=1+.045*E,$=1+.015*E*T,O=30*ni(-Xt((P-275)/25,2)),N=-2*Jt(Xt(E,7)/(Xt(E,7)+Xt(25,7)))*ii(2*o(O)),D=Jt(Xt(F/(i*L),2)+Xt(M/(n*A),2)+Xt(R/(r*$),2)+N*(M/(n*A))*(R/(r*$)));return Qt(0,Kt(100,D))}function oi(e,t,i){void 0===i&&(i="lab"),e=new _(e),t=new _(t);var n=e.get(i),r=t.get(i),s=0;for(var o in n){var a=(n[o]||0)-(r[o]||0);s+=a*a}return Math.sqrt(s)}function ai(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];try{return new(Function.prototype.bind.apply(_,[null].concat(e))),!0}catch(e){return!1}}for(var li={cool:function(){return mt([b.hsl(180,1,.9),b.hsl(250,.7,.4)])},hot:function(){return mt(["#000","#f00","#ff0","#fff"]).mode("rgb")}},ci={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ui=0,di=Object.keys(ci);ui<di.length;ui+=1){var hi=di[ui];ci[hi.toLowerCase()]=ci[hi]}return Object.assign(b,{average:gt,bezier:kt,blend:Et,cubehelix:Nt,mix:Ye,interpolate:Ye,random:Ht,scale:mt,analyze:Vt,contrast:Yt,deltaE:si,distance:oi,limits:Wt,valid:ai,scales:li,input:v,colors:Ee,brewer:ci}),b}()}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(337),i(319),i(566),i(385),i(652);var n=i(777);self.Checkbox=n.default})();